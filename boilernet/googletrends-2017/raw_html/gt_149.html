<!DOCTYPE html>
<!-- saved from url=(0063)https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906 -->
<html lang="en" data-reactroot="" class="gr__nbcnews_com"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="./M-050_files/event"></script><script type="text/javascript" async="async" src="./M-050_files/id"></script><script type="text/javascript" async="async" src="./M-050_files/id(1)"></script><script type="text/javascript" async="async" src="./M-050_files/id(2)"></script><script async="" src="./M-050_files/fbevents.js.Download"></script><script async="" src="./M-050_files/js"></script><script async="" src="./M-050_files/P35C41790-24D9-4BCD-9873-48B547719D85.js.Download"></script><script type="text/javascript" async="" src="./M-050_files/spm.v1.min.js.Download"></script><script async="" src="./M-050_files/beacon.js.Download"></script><script type="text/javascript" async="async" src="./M-050_files/id(3)"></script><title>What is DACA? What you need to know.</title><meta data-rh="true" name="msapplication-TileColor" content="#FFFFFF"><meta data-rh="true" name="msapplication-TileImage" content="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/ms-icon-144x144.png"><meta data-rh="true" name="msapplication-config" content="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/browserconfig.xml"><meta data-rh="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-rh="true" property="fb:app_id" content="10150138890205613"><meta data-rh="true" property="fb:pages" content="155869377766434"><meta data-rh="true" property="fb:pages" content="114288853688"><meta data-rh="true" property="fb:pages" content="273864989376427"><meta data-rh="true" property="fb:pages" content="25987609066"><meta data-rh="true" property="fb:pages" content="103708747870"><meta data-rh="true" property="fb:pages" content="117112876419"><meta data-rh="true" property="fb:pages" content="493352494017633"><meta data-rh="true" property="fb:pages" content="143109582453645"><meta data-rh="true" property="fb:pages" content="153005644864469"><meta data-rh="true" property="fb:pages" content="598356233569407"><meta data-rh="true" property="fb:pages" content="62499551911"><meta data-rh="true" property="fb:pages" content="90692553761"><meta data-rh="true" property="fb:pages" content="108546889203630"><meta data-rh="true" property="fb:pages" content="154957517930371"><meta data-rh="true" property="fb:pages" content="114945745226947"><meta data-rh="true" property="fb:pages" content="164878620263509"><meta data-rh="true" property="fb:pages" content="219012311450917"><meta data-rh="true" property="fb:pages" content="280920811923248"><meta data-rh="true" property="fb:pages" content="358279854182174"><meta data-rh="true" property="fb:pages" content="809948162383434"><meta data-rh="true" property="fb:pages" content="864302923644949"><meta data-rh="true" property="fb:pages" content="868876563129583"><meta data-rh="true" property="fb:pages" content="1508175089456029"><meta data-rh="true" property="og:site_name" content="NBC News"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" name="twitter:site" content="@NBCNews"><meta data-rh="true" name="twitter:creator" content="NBCNews"><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta data-rh="true" property="og:image:type" content="image/jpeg"><meta data-rh="true" property="og:image:width" content="1200"><meta data-rh="true" property="og:image:height" content="630"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" name="twitter:card" content="summary_large_image"><link data-rh="true" rel="shortcut icon" type="image/x-icon" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon.ico"><link data-rh="true" rel="icon" type="image/png" sizes="16x16" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon-16x16.png"><link data-rh="true" rel="icon" type="image/png" sizes="32x32" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon-32x32.png"><link data-rh="true" rel="icon" type="image/png" sizes="96x96" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon-96x96.png"><link data-rh="true" rel="apple-touch-icon" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon.png"><link data-rh="true" rel="apple-touch-icon-precomposed" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-precomposed.png"><link data-rh="true" rel="apple-touch-icon" sizes="57x57" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-57x57.png"><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-60x60.png"><link data-rh="true" rel="apple-touch-icon" sizes="72x72" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-72x72.png"><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-76x76.png"><link data-rh="true" rel="apple-touch-icon" sizes="114x114" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-114x114.png"><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-120x120.png"><link data-rh="true" rel="apple-touch-icon" sizes="144x144" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-144x144.png"><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-152x152.png"><link data-rh="true" rel="apple-touch-icon" sizes="180x180" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-180x180.png"><link data-rh="true" rel="manifest" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/manifest.json"><link data-rh="true" rel="icon" sizes="36x36" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-36x36.png"><link data-rh="true" rel="icon" sizes="48x48" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-48x48.png"><link data-rh="true" rel="icon" sizes="72x72" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-72x72.png"><link data-rh="true" rel="icon" sizes="96x96" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-96x96.png"><link data-rh="true" rel="icon" sizes="144x144" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-144x144.png"><link data-rh="true" rel="icon" sizes="192x192" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-192x192.png"><script data-rh="true" type="application/ld+json">{"@context":"http://schema.org/","@type":"Organization","url":"http://www.nbcnews.com","logo":{"@type":"ImageObject","url":"https://sslnodeassets.nbcnews.com/cdnassets/projects/site-images/nbcnews-logo-white.png","width":166,"height":24},"sameAs":["https://twitter.com/nbcnews","https://www.facebook.com/nbcnews","https://plus.google.com/+nbcnews","https://www.instagram.com/nbcnews","https://www.youtube.com/nbcnews"]}</script><link href="./M-050_files/icons.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="apple-itunes-app" content="app-id=319740707"><link href="./M-050_files/main-691b09bcb93047ea795a.css" media="screen, projection" rel="stylesheet" type="text/css" charset="UTF-8"><script src="./M-050_files/jquery-2.2.4.min.js.Download"></script><style id="dy-common-style" class="dy-common-style" type="text/css">.dy-wysiwyg{line-height:normal;direction:ltr;align-text:left;margin:0;padding:0;background-color:transparent}.dy-wysiwyg a{text-decoration:none;color:#00E}.dy-full-width-notifications-close,.dy-lb-close{color:#fff;display:inline-block;position:absolute}.dynotifyjs-wrapper .dy-lb-close{z-index:1;top:-8px;right:-9px;border:none;transition:opacity .15s;opacity:.7;background-size:14px;background-repeat:no-repeat;background-position:2px;width:18px;height:18px}.dynotifyjs-wrapper .dy-lb-close:hover{opacity:1}.dynotifyjs-corner{position:fixed;margin:0;z-index:1050}.dynotifyjs-corner .dynotifyjs-container,.dynotifyjs-corner .dynotifyjs-wrapper{position:relative;display:block;height:inherit;width:inherit;margin:11px 8px}.dynotifyjs-wrapper{z-index:1;position:absolute;display:inline-block;height:0;width:0}.dynotifyjs-container{display:none;z-index:1;position:absolute}[data-dynotify-html],[data-dynotify-text]{position:relative}.dynotifyjs-arrow{position:absolute;z-index:2;width:0;height:0}.dy-lb-close{top:-12px;right:-11px;cursor:pointer;border:1px solid #918686;border-radius:30px;height:22px;width:22px;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) #575757;background-size:22px}.dy-full-width-notifications-close{top:5px;right:5px;z-index:1;border:none;transition:opacity .15s;-webkit-transition:opacity .15s;opacity:.7;width:18px;height:18px;cursor:pointer;border-radius:30px;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) 2px no-repeat #575757;background-size:14px}.dy-full-width-notifications-close:hover{opacity:1}.dy_full_width_notifications_container{position:fixed;left:0;right:0;z-index:1040}.dy_full_width_notifications_container.dy_bottom_notification{bottom:0}.dy_full_width_notifications_container.dy_top_notification{top:0}.dy_full_width_notifications_container .dy_full_width_notification_instance{opacity:0;-webkit-transition:opacity .15s;transition:opacity .15s;position:relative}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_active{opacity:1}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_from_bottom{-webkit-animation:dy_appear_from_bottom .25s;animation:dy_appear_from_bottom .25s}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_from_top{-webkit-animation:dy_appear_from_top .25s;animation:dy_appear_from_top .25s}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_will_exit_top{-webkit-animation:dy_exit_top .25s;animation:dy_exit_top .25s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_will_exit_bottom{-webkit-animation:dy_exit_bottom .25s;animation:dy_exit_bottom .25s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}@-webkit-keyframes dy_appear_from_bottom{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dy_appear_from_bottom{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dy_appear_from_top{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dy_appear_from_top{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dy_exit_top{100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@keyframes dy_exit_top{100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@-webkit-keyframes dy_exit_bottom{100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes dy_exit_bottom{100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}.dy-modal-container{position:fixed;z-index:99999;top:0;left:0;bottom:0;right:0;width:100%;height:100%;display:table;-webkit-transition:opacity .2s ease;transition:opacity .2s ease}.dy-modal-container .dy-modal-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;opacity:0;-webkit-transition:opacity .2s;transition:opacity .2s;background-color:#000}.dy-modal-container .dy-modal-wrapper{position:relative;z-index:1;display:table-cell;vertical-align:middle;text-align:center;width:100%}.dy-modal-container .dy-modal-wrapper.dy-modal-bottom{padding-bottom:20px;vertical-align:bottom}.dy-modal-container .dy-modal-wrapper.dy-modal-top{padding-top:20px;vertical-align:top}.dy-modal-container .dy-modal-wrapper .dy-modal-contents{position:relative;display:inline-block;-webkit-animation:dy-modal-enter .25s;animation:dy-modal-enter .25s;visibility:hidden}.dy-modal-container .dy-modal-wrapper .dy-modal-contents .dy-lb-close{z-index:1;top:-9px;right:-9px;border:none;opacity:.7;transition:opacity .15s;width:18px;height:18px;cursor:pointer;position:absolute;border-radius:30px;color:#fff;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) 2px no-repeat #575757;background-size:14px}.dy-modal-container .dy-modal-wrapper .dy-modal-contents .dy-lb-close:hover{opacity:1}@-webkit-keyframes dy-modal-enter{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}85%{-webkit-transform:scale(1.1);transform:scale(1.1)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}</style><script type="text/javascript" async="true" src="./M-050_files/st"></script><script src="./M-050_files/jenga"></script><link rel="stylesheet" type="text/css" href="./M-050_files/vpg.min_85287.css"><style type="text/css"></style><script src="./M-050_files/loader.js.Download"></script><script src="./M-050_files/ndp-hls.js.Download"></script><style type="text/css">.ndp-video{position:relative;padding:0;margin:0;height:100%;width:100%}.ndp-video .ndp-video-player{padding:0;margin:0;height:100%;width:100%;font-size:16px} .ndp-video-player{text-shadow:none;background:initial}.ndp-video-player .ndp-captions-track-container{position:relative;width:inherit;height:inherit;text-align:center;letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;pointer-events:none;user-select:none;word-break:break-word;overflow:hidden;font:22px sans-serif;text-decoration:none}.ndp-video-player .ndp-captions-track-region,.ndp-video-player .ndp-captions-track-cue{position:absolute;unicode-bidi:plaintext;overflow-wrap:break-word;writing-mode:horizontal-tb;width:auto;height:auto;text-align:start;vertical-align:middle;user-select:none}.ndp-video-player .ndp-captions-track-region{overflow:hidden;min-height:0;display:inline-flex;flex-flow:column nowrap;justify-content:flex-end;align-items:center;direction:ltr}.ndp-video-player .ndp-captions-track-region *{text-shadow:none}.ndp-video-player .ndp-captions-track-region.ndp-captions-track-hidden{z-index:-999;visibility:hidden;display:none;height:0;width:0;top:-1px;left:-1px}.ndp-video-player .ndp-captions-track-region>.ndp-captions-track-window{resize:horizontal;display:inline-flex;flex-flow:column nowrap;justify-content:center;align-items:center}.ndp-video-player .ndp-captions-track-cue{position:relative;display:inline-block;padding:2px 2px 0 2px;margin:0;transition-property:height;transition-duration:0.433s;transition-timing-function:ease-in-out;transform:translateY(1px)}.ndp-video-player .ndp-captions-track-cue.ndp-user-default-style{font-size:1rem;text-shadow:none;color:#d2d2d2;background:rgba(0,0,0,0.8)}.ndp-video-player .ndp-captions-track-cue>.ndp-captions-track-cue-text{display:inline-block;padding:0 1px 0 1px;margin-bottom:2px;border-radius:2.5px;border:1px dotted transparent}.ndp-video-player .ndpCaptionOptionsCard{height:100%;max-height:480px;width:100%;max-width:640px;position:absolute;top:50%;left:50%;-ms-transform:translateX(-50%) translateY(-50%);-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);font-family:Arial}.ndp-video-player .ndpCaptionCardHeader{height:8%;width:100%;position:absolute;left:0;top:0;color:white;background-color:black}.ndp-video-player .ndpCaptionCardLabel{margin-left:10px}.ndp-video-player .ndpCaptionCardClose{float:right}.ndp-video-player .ndpCaptionCardSettings{height:60%;width:100%;position:absolute;top:8%;left:0;background-color:rgba(0,0,0,0.8);font-size:12px;overflow:auto}.ndp-video-player .ndpCaptionCardPreviewArea{height:32%;width:100%;position:absolute;left:0;top:68%;overflow:auto;font-size:16px;line-height:initial}.ndp-video-player .ndpCaptionCardPreviewWrapper{position:absolute;width:60%;top:50%;left:50%;-ms-transform:translateX(-50%) translateY(-50%);-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.ndp-video-player .ndpCaptionCardPreviewWindow{display:inline-block;padding:4px}.ndp-video-player .ndpCaptionCardPresetWrapper{height:100%;width:20%;color:white;position:absolute;left:0;top:0;text-align:center}.ndp-video-player .ndpCaptionCardPresetLabel{display:block}.ndp-video-player .ndpCaptionCardStyleWrapper{height:100%;width:30%;color:white;position:absolute;left:20%;top:0}.ndp-video-player .ndpCaptionColorsWrapper{height:100%;width:50%;color:white;position:absolute;left:50%;top:0;text-align:center}.ndp-video-player .ndpCaptionSettingsButtonsWrapper{position:absolute;bottom:0;right:0}.ndp-video-player .ndpCaptions{display:inline-block;padding:2px;width:60%;font-family:'Courier New';font-size:100%;color:#ccc;background-color:rgba(0,0,0,0.8)}.ndp-video-player .ndpCaptionFormWrapper{color:black;display:block;width:100%}.ndp-video-player .ndpCaptionModeWrapper{color:black;display:block}.ndp-video-player .ndpCaptionLabel{color:white;display:block}.ndp-video-player .ndpCaptionColors button{border:1px solid white;width:40px;height:40px;margin:3px}.ndp-video-player .ndpCaptionCardPresetWrapper button{border-color:grey;border-style:solid;width:45px;height:45px;margin:3px;font-size:20px}.ndp-video-player .stepper button{background-color:white;border:solid 1px black;width:25px;height:20px}.ndp-video-player .ndpCaptionCardClose{color:black;width:20px;height:20px;background-color:white;border:none;margin:2px}.ndp-video-player .ndpCaptionSettingsButtonsWrapper button{color:white;background-color:#777777;padding:7px 15px 7px 15px;text-decoration:none;border:none;margin:0px 10px 10px 0px}</style><style type="text/css" id="ndpCaptionsPreview">.ndpCaptionCardPreviewWindow { background-color: rgba(0, 0, 0, 0) } .ndpCaptionsUserSettingPreview { font-family: Verdana; font-size: 100%; color: rgb(255, 255, 255); background-color: rgb(0, 0, 0); }</style><style type="text/css" id="ndpCaptions">.ndp-captions-track-window { background-color: rgba(0, 0, 0, 0) } .ndpCaptionsUserSetting { font-family: Verdana; font-size: 100%; color: rgb(255, 255, 255); background-color: rgb(0, 0, 0); }</style><script src="./M-050_files/widgets.js.Download" defer="defer" charset="utf-8"></script><script charset="utf-8" src="./M-050_files/grid_moment_timeline_tweet.a26b00efbad7a82218338ff484d86e56.js.Download"></script><script charset="utf-8" src="./M-050_files/moment_timeline_tweet.50bff1a04f1f37b6a41fa15859518e07.js.Download"></script><script charset="utf-8" src="./M-050_files/tweet.7105d49c4a3cba9c5c6727b0e1a9eae8.js.Download"></script><link rel="canonical" href="https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906" data-rh="true"><link rel="amphtml" href="https://www.nbcnews.com/news/amp/ncna854906" data-rh="true"><meta name="description" content="DACA stands for Deferred Action for Childhood Arrivals and was created by President Barack Obama. The program protected immigrants from deportation and allowed work permits." data-rh="true"><meta property="og:url" content="https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906" data-rh="true"><meta property="og:title" content="What is DACA? Who are the Dreamers?" data-rh="true"><meta property="og:description" content="DACA stands for Deferred Action for Childhood Arrivals and was created by President Barack Obama. The program protected immigrants from deportation and allowed work permits." data-rh="true"><meta property="og:image" content="https://media1.s-nbcnews.com/j/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.1200;630;7;70;5.jpg" data-rh="true"><meta property="og:image:secure_url" content="https://media1.s-nbcnews.com/j/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.1200;630;7;70;5.jpg" data-rh="true"><meta name="twitter:image:src" content="https://media1.s-nbcnews.com/j/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.1024;512;7;70;5.jpg" data-rh="true"><meta name="twitter:image" content="https://media1.s-nbcnews.com/j/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.1024;512;7;70;5.jpg" data-rh="true"><meta name="twitter:title" content="What is DACA? Who are the Dreamers?" data-rh="true"><meta name="twitter:description" content="DACA stands for Deferred Action for Childhood Arrivals and was created by President Barack Obama. The program protected immigrants from deportation and allowed work permits." data-rh="true"><meta name="thumbnail" content="https://media1.s-nbcnews.com/j/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.1024;768;7;70;3.jpg" data-rh="true"><script type="application/ld+json" data-rh="true">{"@context":{"@vocab":"http://schema.org","pageType":{"@id":"Text","@type":"@id"},"vertical":{"@id":"Text","@type":"@id"},"subVertical":{"@id":"Text","@type":"@id"},"section":{"@id":"Text","@type":"@id"},"subSection":{"@id":"Text","@type":"@id"},"label":{"@id":"Text","@type":"@id"},"packageId":{"@id":"Text","@type":"@id"},"sponsor":{"@id":"Text","@type":"@id"},"ecommerceEnabled":{"@id":"Text","@type":"@id"}},"@type":"Dataset","url":"https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906","pageType":"Article","vertical":"news","subVertical":"","section":"politics","subSection":"immigration","label":"","packageId":"","sponsor":"","ecommerceEnabled":false}</script><script type="application/ld+json" data-rh="true">{"@context":{"@vocab":"http://schema.org","articleId":{"@id":"Text","@type":"@id"},"topics":{"@id":"Text","@type":"@id"}},"@type":"NewsArticle","headline":"What is DACA? What you need to know.","url":"https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906","thumbnailUrl":"https://media1.s-nbcnews.com/j/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.1024;768;7;70;3.jpg","alternativeHeadline":"What is DACA? What you need to know.","dateCreated":"2018-03-08T22:26:00.000Z","datePublished":"2018-03-08T22:26:00.000Z","dateModified":"2018-06-26T16:18:10.000Z","articleSection":"politics","articleId":"ncna854906","identifier":{"@type":"PropertyValue","propertyID":"uid","value":"ncna854906"},"topics":"","image":{"@type":"ImageObject","url":"https://media1.s-nbcnews.com/i/newscms/2018_10/2355751/180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.jpg","caption":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground in a pattern that spells out the word \"unafraid\" as they rally in support of DACA recipients, Monday, March 5, 2018, on Capitol Hill in Washington.","width":2500,"height":1546},"author":[{"@type":"Person","jobTitle":"Author","name":"Suzanne Gamboa","image":"https://media3.s-nbcnews.com/i/newscms/2014_06/168326/140116-byline-gamboa-sq-_j4a8736_5719bd14a999a2319b1c2b68453e17a3.jpg"}],"publisher":{"@type":"Organization","name":"NBC News","logo":{"@type":"ImageObject","url":"https://nodeassets.nbcnews.com/cdnassets/projects/site-images/nbcnews-logo-white.png","width":166,"height":24}},"description":"DACA stands for Deferred Action for Childhood Arrivals and was created by President Barack Obama. The program protected immigrants from deportation and allowed work permits.","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906"},"video":[]}</script></head><body class="articlePage" data-gr-c-s-loaded="true" data-rh="class"><div id="content"><div class="news container___2vv8Q" data-reactroot=""><div class="gridGuides grid___3ZRoB"><div class="gridColumns___1zOp6"><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div></div></div><div class="bannerAd___M8HV_ ad-container"><div class="adBackground___3sysw" style="height:0px"></div><div class="pkg-other ad"><div data-enigma="true" data-slot="topbanner" data-sizes="[[[1000,1],[[728,90],[970,66],[970,90],[970,250],[1900,400]]],[[758,1],[[728,90],[970,66],[970,90],[970,250],[1900,400]]],[[0,0],[[1900,400]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></div><div style="margin-top:0"></div><div class="globalNav globalNav___2LJyT"><ul class="links___bzPJ0"><li class="link___1baAy"><a href="https://www.nbcnews.com/" class=" vilynx_listened">News</a></li><li class="link___1baAy"><a href="https://www.nbcnews.com/nightly-news" class=" vilynx_listened">Nightly News</a></li><li class="link___1baAy"><a href="https://www.nbcnews.com/meet-the-press" class=" vilynx_listened">Meet the Press</a></li><li class="link___1baAy"><a href="https://www.nbcnews.com/dateline" class=" vilynx_listened">Dateline</a></li><li class="link___1baAy secondary___1L96o"><a href="https://www.msnbc.com/" class=" vilynx_listened">MSNBC</a></li><li class="link___1baAy secondary___1L96o"><a href="https://www.today.com/" class=" vilynx_listened">TODAY</a></li></ul><button class="searchIconButton css-reset-btn db absolute right-0 top-0 h-100"><span class="searchIconButton__icon icon icon-search searchIconButton__icon icon icon-search db absolute vh-center color-inherit"></span></button></div><section class="searchOverlay fixed top-0 bottom-0 left-0 right-0 bg-white z-max fade-out" tabindex="0"><button class="css-reset-btn fr pa2 mt2 mr2"><span class="searchOverlay__icon icon icon-close b gray-60"></span></button><div class="clearfix"></div><div class="layout-grid-container"><form action="https://www.nbcnews.com/pages/search/" method="GET" class="searchForm relative grid-col-12-l overlay__searchForm___W519g"><label class="searchForm__label overflow-hidden v-hidden absolute" for="q" id="search_label">Search</label><div class="searchForm__box df items-center justify-between"><input type="search" class="searchForm__input f7 lh-1 mb3 flex-grow-1" aria-labelledby="search_label" id="q" name="q" placeholder="Search NBC News"><button class="searchIconButton css-reset-btn db relative flex-none h2 w2 f5 tr"><span class="searchIconButton__icon icon icon-search searchIconButton__icon icon icon-search db absolute v-center right-0 color-inherit"></span></button></div></form></div></section><div class="container___20-Ws" style="top:0"><nav class="navbar___1EKcg vertical___3U7Kb active___2Ix3F scrolled___yAb5r stuck___PEoMv"><div class="logo___1IYlZ"><a href="https://www.nbcnews.com/"><span class="verticalLogo___12p7A white___NqBga active___3azSy"><svg class="peacock___1R6oM" width="67" height="39" viewBox="578 62 67 39" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M579.074 90.58c1.717-4.494 6.472-6.08 10.697-3.37l18.29 12.754h-22.18c-4.62 0-8.252-4.23-6.8-9.385"></path><path class="feather___29myi" d="M579.074 90.58c1.717-4.494 6.472-6.08 10.697-3.37l18.29 12.754h-22.18c-4.62 0-8.252-4.23-6.8-9.385"></path><path class="feather___29myi" d="M597.563 75.863l9.442 21.613-19.478-13.35c-4.887-3.24-3.896-8.79-1.19-11.237 3.83-3.24 9.245-2.12 11.226 2.97"></path><path class="feather___29myi" d="M610.57 70.93l-3.433 24.19-9.772-23c-2.113-5.75 2.64-9.516 5.81-9.583 3.632-.396 8.188 2.38 7.396 8.394"></path><path class="feather___29myi" d="M625.494 72.103l-9.707 23.067-3.102-20.82c-.265-3.17 1.716-3.237 2.443-3.832-.133-.463-1.124-.463-1.124-.463h-1.848c-.198-5.42 4.028-7.8 7.462-7.535 3.697.132 7.856 4.428 5.876 9.583"></path><path class="feather___29myi" d="M635.338 84.167L615.86 97.584l9.177-21.348c2.775-6.742 9.245-5.42 11.556-2.842 2.51 2.51 3.235 7.6-1.255 10.773"></path><path class="feather___29myi" d="M637.448 99.9h-22.515l18.29-12.756c4.49-2.975 9.244-.266 10.498 3.635 1.327 4.36-1.65 9.12-6.27 9.12"></path></g></svg><span class="vertical___12aYe"><span class="logo___HCovU icon icon-vertical-news"></span></span></span></a><div class="sponsorContainer___34TDx adsEmpty___s7Rag ad-container"><span class="sponsorText___pkaD2">Sponsored by</span><div class="pkg-other ad adsSponsorLogo___205aG"><div data-enigma="true" data-slot="sponsorlogo" data-sizes="[[[1000,1],[88,31]],[[758,1],[]],[[0,0],[]]]" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></div></div><div class="headlineWrapper___1QKmN undefined"><div class="headlineTitle___3PPzS"><h2 class="headlineTitleText___CRuAl">What is DACA? What you need to know.</h2></div><div class="socialShareWrapper___39f3A"><div class="socialShareList socialWrapper___3Xzcr"><input type="checkbox" class="socialMenuCheckbox___wPMTO" id="social-menu-toggle--navbar" tabindex="-1"><ul class="socialList___3uU5h js-social-share"><li class="socialListText___1zCg1">Share this —</li><li class="socialListIcon___qe6cE"><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906" target="_blank" rel="noopener noreferrer" class=" vilynx_listened"><span class="icon icon-facebook socialIcon___23yXL"></span></a></li><li class="socialListIcon___qe6cE"><a href="https://twitter.com/intent/tweet?text=What%20is%20DACA%3F%20Who%20are%20the%20Dreamers%3F&amp;via=nbcnews&amp;url=https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906&amp;original_referer=https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906" target="_blank" rel="noopener noreferrer" class=" vilynx_listened"><span class="icon icon-twitter socialIcon___23yXL"></span></a></li><li class="socialListIcon___qe6cE"><a href="mailto:?subject=What%20is%20DACA?%20What%20you%20need%20to%20know.&amp;body=https://www.nbcnews.com/storyline/smart-facts/what-daca-n854906" class=" vilynx_listened"><span class="icon icon-email socialIcon___23yXL socialIconEmail___3L16X"></span></a></li><li class="socialListIcon___qe6cE socialListIconVisibleSmall___3KHjr"><a class="js-sms-link vilynx_listened" href="sms:?body=What%20is%20DACA%3F%20What%20you%20need%20to%20know.%20via%20NBC%20News%20-%20https%3A%2F%2Fwww.nbcnews.com%2Fstoryline%2Fsmart-facts%2Fwhat-daca-n854906"><span class="icon icon-phone socialIcon___23yXL"></span></a></li></ul><label class="socialMenuExpand___3QMcb" for="social-menu-toggle--navbar"><span class="socialMenuDot___1HnaQ"></span><svg viewBox="0 0 20 20" class="socialMenuClose___80u9j"><line x1="0" x2="20" y1="0" y2="20" class="socialMenuCloseLine___2H9En"></line><line x1="0" x2="20" y1="20" y2="0" class="socialMenuCloseLine___2H9En"></line></svg></label></div></div></div><button class="hamburger___2FGRa"><span></span><span></span><span></span></button></nav></div><div class="content___F38wa"><div><div><div class="article container___2EGEI"><section class="articleHero container___2r2e1 noimage___gg7P9"><header class="header___ivcmX mh5"><aside><h2 class="unibrow articleTitleSection eyebrow relative z-3 taxterm___3ynvJ f2 founders-mono ttu ls-tight"><a href="https://www.nbcnews.com/politics/immigration" class=" vilynx_listened"><span>Immigration</span></a></h2></aside><div class="articleHero___37q3K"><h1 class="headline___CuovH f8 f9-m fw3 mb3 mt0 founders-cond lh-none f10-xl" __label="title">What is DACA? What you need to know.</h1></div></header><div class="heroMediaHolder___1X_U1"></div></section><article class="articleBody gridContainer___3alrm noMainImage___3YWBu" data-taboola-target="read-more"><div class="pkg-other ad"><div data-enigma="true" data-slot="interstitial" data-sizes="[[[0,0],[[4,4]]]]" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div><div class="section___2arDM"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"></div></div><div class="section___2arDM lastSection___2KSdE"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"><div class="tabletNewsletter___Av6eE"><div class="container___jsHMh news___34TC8"><div class="borderTop___3KbzM"></div><div></div><div class="signupBackground___27LhS"><h2 class="signupTitle___15fvr">Breaking News Emails</h2><div class="signupForeground___2FAE6"><div class="signupMessage___3ctJh">Get breaking news alerts and special reports. The news and stories that matter, delivered weekday mornings.</div><button class="animateSubscribeButton___EAiad signupButton___Vnoko founders-cond lh-none f4 fs-normal ls-normal pv6">SUBSCRIBE</button></div></div></div></div><section class="mb7"><div class="mb1 founders-mono f2 lh-copy gray-80 ls-tight" __label="date"><time class="pubDate___3OViw" datetime="Thu Mar 08 2018 18:44:44 GMT+0000 (UTC)">March 8, 2018 / 7:44 PM GMT+1</time><span>&nbsp;/ Updated&nbsp;</span><time class="pubDate___3OViw" datetime="Thu Mar 08 2018 22:26:00 GMT+0000 (UTC)">March 8, 2018 / 11:26 PM GMT+1</time></div><div class="founders-cond f6 lh-none" __label="author">By <!-- -->Suzanne Gamboa</div></section><p class="" __label="main">President Barack Obama created the <a href="https://www.nbcnews.com/news/latino/obama-administration-start-taking-daca-requests-feb-18-n296766" class=" vilynx_listened">Deferred Action for Childhood Arrivals program</a>, better known as DACA, as he faced increasing backlash from allies and activists for failing to get immigration reform in his first term and was gearing up for a re-election run.</p><section class="related related--recommendedContent related___2RfEH"><div class="inner___He6NE"><div class="related__boxes related__boxes--recommendedContent todayboxes___jjC-0"><div class="todayboxesinner___3pDup"></div><div class="todayboxesbottom___2F78Y"></div></div><div class="background___3J1WX"></div><div class="related__title related__title--recommendedContent titleWrapper___1JWkE"><h4 class="title___15PLX">Recommended</h4></div><div id="recommended" class="related__items related__items--recommendedContent items___3G8l3"></div></div></section><h3 class="" __label="main">What did DACA do?</h3><p class="" __label="main"><a href="http://www.nytimes.com/2012/06/16/us/us-to-stop-deporting-some-illegal-immigrants.html">Announced on June 15, 2012</a>, the program temporarily shielded certain immigrants from deportation and made them eligible for work permits. The program allowed for infinite renewals, but was considered a stopgap measure until Congress could address immigration reform.</p><figure class="medium___16lj6" __label="main"><picture class="theimg___1sY8s"><source srcset="https://media4.s-nbcnews.com/j/newscms/2018_11/2359886/180312-daca-protest-nationwide-ac-651p_931d636fa82ff1fb398e1636d1c36ce5.fit-560w.jpg" media="(min-width: 1000px)"><img src="./M-050_files/180312-daca-protest-nationwide-ac-651p_931d636fa82ff1fb398e1636d1c36ce5.fit-760w.jpg" alt="Image: Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building in Los Angeles, California"></picture><figcaption class="caption___fMPAB f3 lh-copy grey-100 publico-txt caption___1mNth mt4"><span class="mr3">Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building on Sept. 5, 2017 in Los Angeles.</span><span class="f2 ls-tight gray-80 ws-tight founders-mono dib">Kyle Grillot / Reuters</span></figcaption></figure><h3 class="" __label="main">When and why did DACA end?</h3><p class="" __label="main">On the orders of President Donald Trump last September, Attorney General Jeff Sessions declared that <a href="https://www.nbcnews.com/politics/immigration/trump-dreamers-daca-immigration-announcement-n798686" class=" vilynx_listened">DACA would end March 5</a>. The administration immediately stopped taking new applications for DACA and accepted renewals for about a month. The administration said the deadline would pressure Congress to come up with a substitute for DACA, although there is strong opposition to the program among some Republican conservatives, particularly to Obama’s use of executive authority to create it. Congress has not found a substitute and, in the meantime, <a href="https://www.nbcnews.com/news/latino/another-judge-blocks-trump-administration-ending-daca-program-n847766" class=" vilynx_listened">two judges have ordered the administration to accept renewals</a> again. Because DACA is granted for two years at a time, some immigrants won’t see their DACA end right away.</p><h3 class="" __label="main">How many people have DACA?</h3><p class="" __label="main">The latest number reported by Department of Homeland Security’s <a href="https://www.uscis.gov/sites/default/files/USCIS/Resources/Reports%20and%20Studies/Immigration%20Forms%20Data/All%20Form%20Types/DACA/daca_performancedata_fy2017_qtr4.pdf">Citizenship and Immigration Services</a> is about 690,000 as of Sept. 4, 2017. But Trump announced the end of DACA on Sept. 5, and advocates say some 122 immigrants a day were losing DACA since then for a total about 19,000. But that number does not take into account the recent court orders that have allowed <a href="https://www.uscis.gov/archive/renew-your-daca">renewals to restart.</a></p><h3 class="" __label="main">What about DACA Renewals?</h3><p class="" __label="main">Some immigrants have chosen not to renew or have been unable to because they fear providing <a href="https://www.nbcnews.com/news/latino/kelly-s-lazy-dreamer-comment-racist-obscures-truth-daca-numbers-n845746" class=" vilynx_listened">identifying information</a> about themselves or their families to the administration, which has ramped up its arrests of people not legally in the country. Others are unable to scrape together the $495 fee or gather needed documents, or face other reasons.</p><h3 class="" __label="main">Who is eligible for DACA? What are the DACA requirements?</h3><p class="" __label="main">To qualify, immigrants had to have been under 31 at the time the program was announced, have come to the U.S. before reaching their 16th birthday and lived in the U.S. continuously since June 15, 2007. They also had to have been in the U.S. the day of the announcement, be in school, have a diploma or the equivalent or be an honorably discharged veteran and not have been convicted of a felony, a significant misdemeanor, three or more misdemeanors or be a public or national security threat.</p><h3 class="" __label="main">Is there support for DACA?</h3><p class="lastMarkupItem" __label="main">Several polls have shown a majority of Americans support DACA. The support is less among Republicans. But a majority still supports the program. Results of an NBC News/Wall Street Journal poll released in December found <a href="https://www.nbcnews.com/politics/first-read/poll-public-sours-gop-tax-plan-democrats-regain-lead-economy-n831231" class=" vilynx_listened">62 percent of those polled wanted Congress to continue DACA</a>, while 19 percent said Congress should take no action and let it end.</p><div class="mv8"></div></div><div class="rightRail___IGUOf"><div data-packageid="ncna854906" class="pkg-other taboola taboola___4Gull"><div id="taboola-right-rail-thumbnails-ncna854906"></div></div><div class="pkg-other ad rightRailAd___35GWq tc tl-m ad-container"><div data-enigma="true" data-slot="boxflex" data-sizes="[[[1000,1],[[300,250],[300,600],[360,360],[360,720]]],[[758,1],[]],[[0,0],[]]]" data-offset="10" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></div></div><div class="pkg-other ad midresponsiveAd___3hmNF ad-container"><div data-enigma="true" data-slot="midresponsive" data-sizes="[[[1000,1],[[700,1],[5,5]]],[[758,1],[]],[[0,0],[]]]" data-offset="300" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></article><div data-packageid="ncna854906" class="pkg-other taboola taboola___4Gull"><div id="taboola-below-article-thumbnails---bento-ncna854906"></div></div></div></div></div><div><div class="article container___2EGEI"><section class="articleHero container___2r2e1 standard___2w0ZP"><header class="header___ivcmX mh5"><aside><h2 class="unibrow articleTitleSection eyebrow relative z-3 taxterm___3ynvJ f2 founders-mono ttu ls-tight"><a href="https://www.nbcnews.com/decision-2018" class=" vilynx_listened"><span>Midterms 2018</span></a></h2></aside><div class="articleHero___37q3K"><h1 class="headline___CuovH f8 f9-m fw3 mb3 mt0 founders-cond lh-none f10-xl">Watching the undecided voters with four days to go</h1><div class="articleDek dekSummary___GcgCT f4 f5-m f6-l f7-xl publico-hed lh-copy fw3 ls-normal mb3 mb6-m">First Read is your briefing from "Meet the Press" and the NBC Political Unit on the day's most important political stories and why they matter.</div></div></header><div class="heroMediaHolder___1X_U1 mb8"><div class="heroMediaContainer___a869h"><figure class="hero___1ex_0"><picture class="mainImg___TvWaS"><source srcset="https://media2.s-nbcnews.com/j/newscms/2018_43/2619186/181025-election-vote-ballot-ac-443p_5698a40402a9d10868f21dfafe7bab1d.fit-2000w.jpg" media="(min-width: 1240px)"><source srcset="https://media2.s-nbcnews.com/j/newscms/2018_43/2619186/181025-election-vote-ballot-ac-443p_5698a40402a9d10868f21dfafe7bab1d.fit-1240w.jpg" media="(min-width: 1000px)"><source srcset="https://media2.s-nbcnews.com/j/newscms/2018_43/2619186/181025-election-vote-ballot-ac-443p_5698a40402a9d10868f21dfafe7bab1d.fit-1000w.jpg" media="(min-width: 758px)"><img src="./M-050_files/181025-election-vote-ballot-ac-443p_5698a40402a9d10868f21dfafe7bab1d.fit-760w.jpg" alt="Image: General Election, Vote"></picture></figure></div><figcaption class="caption___fMPAB f3 lh-copy grey-100 publico-txt caption___uXf1A mt4"><span class="mr3">People cast their ballots at a community center during early voting in Potomac, Maryland, two weeks ahead of the key US midterm polls on October 25, 2018.</span><span class="f2 ls-tight gray-80 ws-tight founders-mono dib">Brendan Smialowski / AFP - Getty Images</span></figcaption></div></section><article class="articleBody gridContainer___3alrm" data-taboola-target="read-more"><div class="pkg-other ad"><div data-enigma="true" data-slot="interstitial" data-sizes="[[[0,0],[[4,4]]]]" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div><div class="section___2arDM"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"></div></div><div class="section___2arDM lastSection___2KSdE"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"><div class="tabletNewsletter___Av6eE"><div class="container___jsHMh news___34TC8"><div class="borderTop___3KbzM"></div><div></div><div class="signupBackground___27LhS"><h2 class="signupTitle___15fvr">Breaking News Emails</h2><div class="signupForeground___2FAE6"><div class="signupMessage___3ctJh">Get breaking news alerts and special reports. The news and stories that matter, delivered weekday mornings.</div><button class="animateSubscribeButton___EAiad signupButton___Vnoko founders-cond lh-none f4 fs-normal ls-normal pv6">SUBSCRIBE</button></div></div></div></div><section class="mb7"><div class="mb1 founders-mono f2 lh-copy gray-80 ls-tight"><time class="pubDate___3OViw" datetime="Fri Nov 02 2018 12:49:41 GMT+0000 (UTC)">Nov. 2, 2018 / 1:49 PM GMT+1</time></div><div class="founders-cond f6 lh-none">By Chuck Todd, Mark Murray and Carrie Dann</div></section><p class="">WASHINGTON — If there’s been one constant over the last few days, it’s how close all the polls have been, especially for the Senate and gubernatorial contests. It’s tied in FL-SEN and FL-GOV, per <a href="http://cdn.cnn.com/cnn/2018/images/11/01/rel2_fl.pdf">CNN</a>. It’s a jump ball in <a href="https://www.wsbtv.com/news/local/new-poll-race-for-ga-governor-as-close-as-ever/864589580">GA-GOV</a> (which is likely headed to a runoff). And our NBC/Marist polls of <a href="https://www.nbcnews.com/politics/first-read/poll-sinema-leads-mcsally-arizona-senate-race-n925876" class=" vilynx_listened">AZ-SEN</a> and <a href="https://www.nbcnews.com/politics/first-read/poll-indiana-senate-race-dead-heat-n929396" class=" vilynx_listened">IN-SEN</a> showed incredibly close races.</p><p class="">So how might these tight matchups break in the end? Our NBC/Marist polls of Arizona and Indiana looked at the “persuadable” voters — that is, those who were either undecided or were leaning towards a particular candidate but said they might change their mind.</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><div id="taboolaReadMoreBelow"></div><p class=""><strong>Our Indiana poll</strong> — which had Dem Joe Donnelly leading Republican Mike Braun by 3 points — found 14 percent of likely voters being persuadable, and among these persuadable voters, Trump’s approval rating is 42 percent-38 percent (versus 50 percent-42 percent among all likely voters). Donnelly’s fav/unfav is 27 percent/25 percent (+2), versus Braun’s fav/unfav at 14 percent/35 percent (-21). And congressional preference is even among these voters (when it was R+7 among all likely voters).</p><p class=""><em>Bottom line: These persuadable voters in Indiana seem like true swing voters, and they’re more negative on Braun than on Donnelly.</em></p><p class=""><strong>In Arizona</strong> — where Dem Kyrsten Sinema was ahead of Republican Martha McSally by 3 points in a three-way contest — 10 percent of the likely voters are persuadable, and Trump’s job rating is 25 percent-49 percent; Sinema’s fav/unfav is 26 percent/44 percent (-18); McSally’s fav/unfav is 16 percent/41 percent (-25); and congressional preference is D+3.</p><p class=""><em>Bottom line: These voters in Arizona are really down on President Trump, and they don’t like Sinema or McSally (but they like McSally even less).</em></p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">And we’ll be watching these undecided/persuadable voters in our final NBC/Marist polls that we’ll be releasing on Monday…</p><h2 class="">Watching the independent voters with four days to go</h2><p class="">For all of the attention on the fired-up base voters (Trump supporters vs. urban/suburban women), it’s also important to keep an eye on the middle of the electorate. </p><p class="">In our Arizona poll, Sinema was winning independents by 26 points (58 percent to 32 percent); just 33 percent of independents approved of Trump’s job performance; and indies preferred a Dem-controlled Congress by 14 points (50 percent to 36 percent).</p><p class="">In our Indiana poll, Donnelly was winning independents by 23 points (54 percent to 31 percent); just 39 percent of indies approved of Trump’s job; and independents preferred a Dem-controlled Congress by 9 points (47 percent to 38 percent).</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">And in our Tennessee poll, Dem Phil Bredesen was winning indies by 24 points (59 percent to 35 percent); just 42 percent of indies approved of Trump’s job; and indies preferred a Dem-controlled by 5 points (46 percent to 41 percent).</p><h2 class="">Remembering how VA-GOV last year played out in the final days</h2><p class="">And with President Trump closing on a message of fear and immigration in these waning days, here’s a reminder: This is exactly the same message that Ed Gillespie and the GOP used at the end of the 2017 gubernatorial race in Virginia.</p><h2 class="">Yesterday’s split-screen day: Trump versus Oprah</h2><p class="">Here was President Trump talking about immigration: “At this very moment large well-organized caravans of migrants are marching towards our southern border. Some people call it an invasion. It's like an invasion. They have violently overrun the Mexican border.”</p><p class="">More Trump: “Once they arrive, the Democrat Party's vision is to offer them free healthcare, free welfare, free education and even the right to vote. You and the hard working members of our country will be asked to pick up the entire tab.”</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">And this from Trump: “I will tell you this. Anybody throwing stones, rocks, like they did to Mexico and the Mexican military and  Mexican police, where they badly hurt police and soldiers of Mexico, we will consider that a firearm because there's not much difference.”</p><p class="">Meanwhile, here was Oprah Winfrey campaigning for Democrat Stacey Abrams in Georgia, per NBC’s Kristen Welker: "I am not here because I am making some grand stand, because I'm thinking of running myself. I don't want to run. I am not trying to test any waters. Won’t want to go into those waters."</p><p class="">More Winfrey: "I'm here today because of the men and women who were lynched, discriminated, suppressed at the polls ... Their blood is seeped into my DNA… And I refuse to let their sacrifices be in vain…And for anybody here who has an ancestor who didn't have the right to vote and you are choosing not to vote wherever you are in this state, in this country, you are dishonoring your family.”</p><section class="inlineVideo___3ZAlE"><div class="background___MJluj"><div class="player___16ja0"><div class="videoPlayer container___2PgWR adNotPlaying___2SAW9"><div class="relative"><a href="https://www.today.com/video/trump-doubles-down-on-border-battle-ahead-of-midterms-1359979075517" class="videoPlayer__playLink videoPlayer__playLink--manual vilynx_enabled vilynx_listened vilynx_observe vilynx_registered"><div class="supra-wrapper" style="float: none; margin: 0px; max-height: none; width: 560px; height: 315.156px;"><img class="vilynx_wrapperImg" src="./M-050_files/tdy_news_hallie_trump_181102_1920x1080.1000" style="z-index: 2;"><div class="redirectWrapper"><div class="redirectCenter" style="height: 315.156px; font-size: 40px;"><div class="text" style="max-width: unset; margin-bottom: 10px;">Video Will Begin In...</div><div id="counter" class="counter" style="font-size: 60px; line-height: 68px; max-width: unset; margin-bottom: unset;">3</div></div></div></div><picture class=""><source srcset="https://media3.s-nbcnews.com/j/MSNBC/Components/Video/201811/tdy_news_hallie_trump_181102_1920x1080.860;484;7;70;5.jpg" media="(min-width: 1240px)"><source srcset="https://media3.s-nbcnews.com/j/MSNBC/Components/Video/201811/tdy_news_hallie_trump_181102_1920x1080.1000;563;7;70;5.jpg" media="(min-width: 758px)"><img src="./M-050_files/tdy_news_hallie_trump_181102_1920x1080.760" class="vilynx_mainImg" style="display: block;"></picture></a><button class="videoPlayer__play videoPlayer__play--manual play___2SVnM playButton___2unnJ"><span class="playIcon____44_C icon icon-video"></span></button></div><div id="1359979075517"><div id="1359979075517_ndp_1541165053762" class="ndp-video"><div id="ndp_video_player_1541165053755" class="ndp-video-player"></div></div></div></div></div></div><div class="pt4 pl4 pr8 pt5-m pl6-m pr9-m info___3BGcG"><h2 class="title___1CDQX f5 f7-m lh-title founders-cond ma0 pa0"><a href="https://www.today.com/video/trump-doubles-down-on-border-battle-ahead-of-midterms-1359979075517" class=" vilynx_listened">Trump doubles down on border battle ahead of midterms</a></h2><span class="infoText___2xq7T f2 ttu mt3"><span class="date___2i7u0">Nov. 2, 2018</span><span>03:20</span></span><div class="share___20RDh share___1JwIX"><div class="shareExpander___2NOfK shareExpander___3rhK_ hoverEffect___2ABX6"><span class="shareDot___1pyZs shareDot___B7eCO"></span><svg class="shareClose___20QK- shareClose___CpTmB" viewBox="0 0 15 15"><line class="shareLine___2C4yN" x1="0" x2="15" y1="0" y2="15"></line><line class="shareLine___2C4yN" x1="0" x2="15" y1="15" y2="0"></line></svg></div><div class="shareList___CJe3K shareList___2nQGQ"><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.today.com/video/trump-doubles-down-on-border-battle-ahead-of-midterms-1359979075517" class="shareLink___I3Bnm vilynx_listened" target="_blank" rel="noopen noreferrer"><span class="icon icon-facebook shareIcon___1Agiy shareIcon___26LhB"></span></a><a href="https://twitter.com/intent/tweet?text=Trump%20doubles%20down%20on%20border%20battle%20ahead%20of%20midterms&amp;via=nbcnews&amp;url=https://www.today.com/video/trump-doubles-down-on-border-battle-ahead-of-midterms-1359979075517&amp;original_referer=https://www.today.com/video/trump-doubles-down-on-border-battle-ahead-of-midterms-1359979075517" class="shareLink___I3Bnm vilynx_listened" target="_blank" rel="noopen noreferrer"><span class="icon icon-twitter shareIcon___1Agiy shareIcon___26LhB"></span></a><a href="mailto:?subject=Trump%20doubles%20down%20on%20border%20battle%20ahead%20of%20midterms&amp;body=https://www.today.com/video/trump-doubles-down-on-border-battle-ahead-of-midterms-1359979075517" class="shareLink___I3Bnm vilynx_listened" target="_blank" rel="noopen noreferrer"><span class="icon icon-email shareIcon___1Agiy shareIcon___26LhB"></span></a></div></div></div></section><h2 class="">Fact-checking Trump’s misleading statements from his immigration speech</h2><p class=""> <a href="https://www.nbcnews.com/politics/immigration/trump-plans-block-migrants-claiming-asylum-between-legal-ports-entry-n930056" class=" vilynx_listened">NBC’s Julia Ainsley fact-checks</a> Trump’s immigration speech from yesterday:</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class=""><strong>Trump statement:</strong> The Trump administration was continuing an Obama-era policy of separating immigrant children from their parents at the border.</p><p class=""><strong>The facts:</strong> “The Obama administration only separated children from their parents if the parent was going to be charged with a crime, not including charges of crossing the border illegally. Last spring, under "zero tolerance," the Trump administration changed this policy to begin charging, and therefore separating, parents whose only crime was crossing the border illegally.”</p><p class=""><strong>Trump statement:</strong> There are 20 million undocumented immigrants in the United States</p><section class="related related--recommendedContent related___2RfEH"><div class="inner___He6NE"><div class="related__boxes related__boxes--recommendedContent todayboxes___jjC-0"><div class="todayboxesinner___3pDup"></div><div class="todayboxesbottom___2F78Y"></div></div><div class="background___3J1WX"></div><div class="related__title related__title--recommendedContent titleWrapper___1JWkE"><h4 class="title___15PLX">Recommended</h4></div><div id="recommended" class="related__items related__items--recommendedContent items___3G8l3"><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a href="https://www.nbcnews.com/video/pence-says-i-m-kind-of-a-big-deal-too-mocking-oprah-winfrey-campaign-efforts-1359359555874?icid=recommended" class="link___3qfFk pictureLink___3TXZA vilynx_listened" vilynx-id="https://www.nbcnews.com/video/pence-says-i-m-kind-of-a-big-deal-too-mocking-oprah-winfrey-campaign-efforts-1359359555874"><picture class="thumbnail___H4rRy"><source srcset="https://media4.s-nbcnews.com/j/MSNBC/Components/Video/201811/f_mo_dc_pence_181101.focal-80x80.jpg" media="(min-width: 758px)"><img src="./M-050_files/f_mo_dc_pence_181101.focal-60x60.jpg" alt=""></picture><span class="eyebrow___1iBD9"><span class="icon icon-video icon___tCEvo"></span></span></a></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a href="https://www.nbcnews.com/video/pence-says-i-m-kind-of-a-big-deal-too-mocking-oprah-winfrey-campaign-efforts-1359359555874?icid=recommended" class="link___3qfFk vilynx_listened" vilynx-id="https://www.nbcnews.com/video/pence-says-i-m-kind-of-a-big-deal-too-mocking-oprah-winfrey-campaign-efforts-1359359555874">Pence mocks Oprah: 'I'm kind of a big deal too'</a></h3></div></div><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a href="https://www.nbcnews.com/nightly-news-netcast/video/nightly-news-full-broadcast-november-1st-1359610436001?icid=recommended" class="link___3qfFk pictureLink___3TXZA vilynx_listened" vilynx-id="https://www.nbcnews.com/nightly-news-netcast/video/nightly-news-full-broadcast-november-1st-1359610436001"><picture class="thumbnail___H4rRy"><source srcset="https://media4.s-nbcnews.com/j/MSNBC/Components/Video/201811/nn_kwe_oprah_on_the_trail_181101_1920x1080.focal-80x80.jpg" media="(min-width: 758px)"><img src="./M-050_files/nn_kwe_oprah_on_the_trail_181101_1920x1080.focal-60x60.jpg" alt=""></picture><span class="eyebrow___1iBD9"><span class="icon icon-video icon___tCEvo"></span></span></a></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a href="https://www.nbcnews.com/nightly-news-netcast/video/nightly-news-full-broadcast-november-1st-1359610436001?icid=recommended" class="link___3qfFk vilynx_listened" vilynx-id="https://www.nbcnews.com/nightly-news-netcast/video/nightly-news-full-broadcast-november-1st-1359610436001">Nightly News Full Broadcast (November 1st)</a></h3></div></div></div></div></section><p class=""><strong>The facts:</strong> “Although it is impossible to know exactly how many there are, the Department of Homeland Security estimates this number to be closer to 12 million.”</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class=""><strong>Trump statement:</strong> Construction on the border wall is underway.</p><p class=""><strong>The facts</strong>: “While there has been some fence building and repairing of existing structures, no concrete has been poured on a new border wall.”</p><p class="">And the <a href="https://www.nytimes.com/2018/11/01/us/politics/fact-check-trump-immigration-.html?action=click&amp;module=Top%20Stories&amp;pgtype=Homepage">New York Times has more</a>…</p><p class=""><strong>Trump statement:</strong> “The Democrat Party’s vision is to offer them free health care, free welfare, free education and even the right to vote.”</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class=""><strong>The facts:</strong> “Legal immigrants to the United States can receive some public benefits and have a pathway to citizenship and the right to vote. But that is a matter of law — not merely the political platform or policies of the Democratic Party.”</p><h2 class="">Breaking down yesterday’s polls</h2><p class=""><strong>FL-GOV</strong></p><p class=""><a href="http://cdn.cnn.com/cnn/2018/images/11/01/rel2_fl.pdf">CNN</a>: Andrew Gillum (D) 49%, Ron DeSantis (R) 48%</p><p class=""><strong>FL-SEN</strong></p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class=""><a href="http://cdn.cnn.com/cnn/2018/images/11/01/rel2_fl.pdf">CNN</a>: Bill Nelson (D) 49%, Rick Scott (R) 47%</p><p class=""><strong>GA-GOV</strong></p><p class=""><a href="https://www.wsbtv.com/news/local/new-poll-race-for-ga-governor-as-close-as-ever/864589580">Atlanta Journal-Constitution</a>: Stacey Abrams (D) 47 percent, Brian Kemp (R) 47%</p><p class=""><strong>TN-SEN</strong></p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class=""><a href="http://cdn.cnn.com/cnn/2018/images/11/01/rel2_tn.pdf">CNN</a>: Marsha Blackburn (R) 49%, Phil Bredesen (D) 45%</p><p class=""><strong>VA-10</strong></p><p class=""><a href="http://apps.washingtonpost.com/g/page/politics/washington-post-schar-school-va-10-poll-oct-25-28/2346/?wpisrc=nl_post_polling&amp;wpmm=1">Washington Post-Schar School</a>: Jennifer Wexton (D) 54%, Barbara Comstock (R) 43%</p><h2 class="">Trump campaigns in West Virginia and Indiana</h2><p class="">Two rallies for the president today: At 4:00 pm ET, he holds a rally in Huntington, W.V. And at 7:15 pm ET, he stumps in Indianapolis, Ind.</p><h2 class="">Obama campaigns with Gillum and Abrams</h2><p class="">“Former President Barack Obama will campaign for Tallahassee Mayor Andrew Gillum in Miami on Friday afternoon, at a rally also featuring incumbent Sen. Bill Nelson, before heading a few hours north to Atlanta to meet up with former state House Minority Leader Stacey Abrams,” <a href="https://www.cnn.com/2018/11/02/politics/barack-obama-florida-georgia-gillum-abrams/index.html">CNN writes</a>.</p><h2 class="">Steve King’s opponent raised more than $600,000 on Tuesday and Wednesday alone</h2><p class="">The  jaw-dropping fundraising numbers in IA-4, per <a href="https://www.politico.com/story/2018/11/01/steve-king-jd-scholten-iowa-2018-954920?nname=playbook&amp;nid=0000014f-1646-d88f-a1cf-5f46b7bd0000&amp;nrid=0000014e-f104-dd93-ad7f-f90519e60000&amp;nlid=630318">Politico</a>: “Democrat J.D. Scholten, the former baseball player challenging GOP Rep. Steve King in Iowa, has seen a last second wave of cash come his way as King has sparked new controversy this fall. Scholten raised over $641,000 on Tuesday and Wednesday alone, his campaign shared with POLITICO.</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">That $640,000-plus is twice what Scholten had left on hand as of October 17.</p><h2 class="">134 House and Senate candidates refused to take corporate PAC money, per End Citizens United</h2><p class="lastMarkupItem">Speaking of money in politics, the folks over at End Citizens United send over these statistics: “Democratic candidates responded to voter anger about corruption in Washington by making their pledge to get big money out of politics a central theme in the 2018 election. This cycle, 134 House and Senate candidates on the ballot in November have refused to take corporate PAC money, and 107 House candidates sent a letter to Congress calling for a reform bill to be the first item on the agenda in 2019.”</p><div class="mv8"></div></div><div class="rightRail___IGUOf"><div data-packageid="ncna930276" class="pkg-other taboola taboola___4Gull"><div id="taboola-right-rail-thumbnails-ncna930276"></div></div><div class="pkg-other ad rightRailAd___35GWq tc tl-m ad-container"><div data-enigma="true" data-slot="boxflex" data-sizes="[[[1000,1],[[300,250],[300,600],[360,360],[360,720]]],[[758,1],[]],[[0,0],[]]]" data-offset="10" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></div></div><div class="pkg-other ad midresponsiveAd___3hmNF ad-container"><div data-enigma="true" data-slot="midresponsive" data-sizes="[[[1000,1],[[700,1],[5,5]]],[[758,1],[]],[[0,0],[]]]" data-offset="300" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></article><div data-packageid="ncna930276" class="pkg-other taboola taboola___4Gull"><div id="taboola-below-article-thumbnails---bento-ncna930276"></div></div></div></div><div><div class="article container___2EGEI"><section class="articleHero container___2r2e1 noimage___gg7P9"><header class="header___ivcmX mh5"><aside><h2 class="unibrow articleTitleSection eyebrow relative z-3 taxterm___3ynvJ f2 founders-mono ttu ls-tight"><a href="https://www.nbcnews.com/business/economy" class=" vilynx_listened"><span>Economy</span></a></h2></aside><div class="articleHero___37q3K"><h1 class="headline___CuovH f8 f9-m fw3 mb3 mt0 founders-cond lh-none f10-xl">U.S. economy continues its growth streak, adding 250,000 jobs in October</h1><div class="articleDek dekSummary___GcgCT f4 f5-m f6-l f7-xl publico-hed lh-copy fw3 ls-normal mb3 mb6-m">The jobs report is the last snapshot of the economy before the midterm elections next week.</div></div></header><div class="heroMediaHolder___1X_U1"></div></section><article class="articleBody gridContainer___3alrm noMainImage___3YWBu" data-taboola-target="read-more"><div class="pkg-other ad"><div data-enigma="true" data-slot="interstitial" data-sizes="[[[0,0],[[4,4]]]]" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div><div class="section___2arDM"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"></div></div><div class="section___2arDM lastSection___2KSdE"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"><div class="tabletNewsletter___Av6eE"><div class="container___jsHMh news___34TC8"><div class="borderTop___3KbzM"></div><div></div><div class="signupBackground___27LhS"><h2 class="signupTitle___15fvr">Breaking News Emails</h2><div class="signupForeground___2FAE6"><div class="signupMessage___3ctJh">Get breaking news alerts and special reports. The news and stories that matter, delivered weekday mornings.</div><button class="animateSubscribeButton___EAiad signupButton___Vnoko founders-cond lh-none f4 fs-normal ls-normal pv6">SUBSCRIBE</button></div></div></div></div><section class="mb7"><div class="mb1 founders-mono f2 lh-copy gray-80 ls-tight"><time class="pubDate___3OViw" datetime="Fri Nov 02 2018 12:31:00 GMT+0000 (UTC)">Nov. 2, 2018 / 1:31 PM GMT+1</time></div><div class="founders-cond f6 lh-none">By Lucy Bayly</div></section><p class="">The U.S. added 250,000 jobs in October and unemployment remained steady at 3.7 percent, marking the 97th straight month of economic expansion as Americans prepare to head to the polls for the midterm elections.</p><p class="">October's figures, released Friday morning by the Bureau of Labor Statistics, follow a disappointing jobs gain for the month of September — the lowest so far this year, at just 134,000.</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><div id="taboolaReadMoreBelow"></div><p class="">October’s strong number absorbs the weather-related impact of Hurricane Michael, which hit Florida and Georgia early in the month and displaced thousands of workers, and September’s Hurricane Florence, which depressed the jobs figure for that month but resulted in a bounce-back for October as workers returned to their positions and storm recovery jobs were added.</p><p class="">The jobs report is the last snapshot of the economy before the midterm elections next week and adds to a slew of healthy economic data released by the government in the past few days.</p><p class="">Consumer spending, which drives 70 percent of economic output, is at an 18-year high, <a href="https://www.nbcnews.com/business/consumer/consumer-confidence-its-highest-level-2000-n926206" target="_blank" class=" vilynx_listened">according to figures announced on Tuesday</a>. Spending grew by 4 percent in the last quarter, its strongest since 2014.</p><section class="related related--recommendedContent related___2RfEH"><div class="inner___He6NE"><div class="related__boxes related__boxes--recommendedContent todayboxes___jjC-0"><div class="todayboxesinner___3pDup"></div><div class="todayboxesbottom___2F78Y"></div></div><div class="background___3J1WX"></div><div class="related__title related__title--recommendedContent titleWrapper___1JWkE"><h4 class="title___15PLX">Recommended</h4></div><div id="recommended" class="related__items related__items--recommendedContent items___3G8l3"><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a href="https://www.nbcnews.com/better/video/boxers-vs-briefs-do-they-impact-sperm-count-1359251011599?icid=recommended" class="link___3qfFk pictureLink___3TXZA vilynx_listened" vilynx-id="https://www.nbcnews.com/better/video/boxers-vs-briefs-do-they-impact-sperm-count-1359251011599"><picture class="thumbnail___H4rRy"><source srcset="https://media2.s-nbcnews.com/j/MSNBC/Components/Video/201811/d_better_fea_MaleFertility_181101.focal-80x80.jpg" media="(min-width: 758px)"><img src="./M-050_files/d_better_fea_MaleFertility_181101.focal-60x60.jpg" alt=""></picture><span class="eyebrow___1iBD9"><span class="icon icon-video icon___tCEvo"></span></span></a></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a href="https://www.nbcnews.com/better/video/boxers-vs-briefs-do-they-impact-sperm-count-1359251011599?icid=recommended" class="link___3qfFk vilynx_listened" vilynx-id="https://www.nbcnews.com/better/video/boxers-vs-briefs-do-they-impact-sperm-count-1359251011599">Boxers or briefs: It matters more than you might think</a></h3></div></div><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a href="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659?icid=recommended" class="link___3qfFk pictureLink___3TXZA vilynx_listened" vilynx-id="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659"><picture class="thumbnail___H4rRy"><source srcset="https://media1.s-nbcnews.com/j/MSNBC/Components/Video/201811/lon_chinabus2_181102.focal-80x80.jpg" media="(min-width: 758px)"><img src="./M-050_files/lon_chinabus2_181102.focal-60x60.jpg" alt=""></picture><span class="eyebrow___1iBD9"><span class="icon icon-video icon___tCEvo"></span></span></a></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a href="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659?icid=recommended" class="link___3qfFk vilynx_listened" vilynx-id="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659">Video shows woman fight with bus driver, causing deadly crash into river</a></h3></div></div></div></div></section><p class="">"Consumers do not foresee the economy losing steam anytime soon," said Lynn Franco, an economist for the Conference Board, which calculates the Consumer Confidence Index.</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">GDP <a href="https://www.nbcnews.com/business/economy/latest-gdp-shows-economy-growing-rapid-pace-not-enough-buoy-n924821" target="_blank" class=" vilynx_listened">hit 3.5 percent last quarter</a>, the Commerce Department said last week, and wages jumped 0.9 percent in the third quarter to their highest level in a decade, <a href="https://www.nbcnews.com/business/economy/wages-just-hit-their-highest-level-decade-n926801" target="_blank" class=" vilynx_listened">according to government data released Wednesday.</a></p><p class="">However, the tightening labor market has already begun to strain certain sectors of the economy. Small business hiring has grown by just 1.2 percent this year, versus 2.5 percent for larger corporations, <a href="https://workforcereport.adp.com/" target="_blank">according to data from payroll processor ADP</a>.</p><p class="lastMarkupItem">"Small companies are finding it harder to compete for workers against larger companies that are able to offer more competitive wages and stronger benefits,” said ADP's Ahu Yildirmaz.</p><div class="mv8"></div></div><div class="rightRail___IGUOf"><div data-packageid="ncna930221" class="pkg-other taboola taboola___4Gull"><div id="taboola-right-rail-thumbnails-ncna930221"></div></div><div class="pkg-other ad rightRailAd___35GWq tc tl-m ad-container"><div data-enigma="true" data-slot="boxflex" data-sizes="[[[1000,1],[[300,250],[300,600],[360,360],[360,720]]],[[758,1],[]],[[0,0],[]]]" data-offset="10" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></div></div><div class="pkg-other ad midresponsiveAd___3hmNF ad-container"><div data-enigma="true" data-slot="midresponsive" data-sizes="[[[1000,1],[[700,1],[5,5]]],[[758,1],[]],[[0,0],[]]]" data-offset="300" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></article><div data-packageid="ncna930221" class="pkg-other taboola taboola___4Gull"><div id="taboola-below-article-thumbnails---bento-ncna930221"></div></div></div></div><div><div class="article container___2EGEI"><section class="articleHero container___2r2e1 standard___2w0ZP"><header class="header___ivcmX mh5"><aside><h2 class="unibrow articleTitleSection eyebrow relative z-3 taxterm___3ynvJ f2 founders-mono ttu ls-tight"><a href="https://www.nbcnews.com/tech-media" class=" vilynx_listened"><span>Tech &amp; Media</span></a></h2></aside><div class="articleHero___37q3K"><h1 class="headline___CuovH f8 f9-m fw3 mb3 mt0 founders-cond lh-none f10-xl">Apple to stop reporting iPhone unit sales, stock drops despite record revenue</h1><div class="articleDek dekSummary___GcgCT f4 f5-m f6-l f7-xl publico-hed lh-copy fw3 ls-normal mb3 mb6-m">The company reported fiscal fourth-quarter sales of $62.9 billion, a new record for the company.</div></div></header><div class="heroMediaHolder___1X_U1 mb8"><div class="heroMediaContainer___a869h"><figure class="hero___1ex_0"><picture class="mainImg___TvWaS"><source srcset="https://media4.s-nbcnews.com/j/newscms/2018_40/2591486/181004-apple-store-al-0833_3c14e3ae1968bf672b4c5d366d184f98.fit-2000w.jpg" media="(min-width: 1240px)"><source srcset="https://media4.s-nbcnews.com/j/newscms/2018_40/2591486/181004-apple-store-al-0833_3c14e3ae1968bf672b4c5d366d184f98.fit-1240w.jpg" media="(min-width: 1000px)"><source srcset="https://media4.s-nbcnews.com/j/newscms/2018_40/2591486/181004-apple-store-al-0833_3c14e3ae1968bf672b4c5d366d184f98.fit-1000w.jpg" media="(min-width: 758px)"><img src="./M-050_files/181004-apple-store-al-0833_3c14e3ae1968bf672b4c5d366d184f98.fit-760w.jpg" alt="Image: Apple store"></picture></figure></div><figcaption class="caption___fMPAB f3 lh-copy grey-100 publico-txt caption___uXf1A mt4"><span class="mr3">A man makes a purchase as the iPhone X, Xs Max and Apple Watch Series 4 went on sale at the Apple Store in Manhattan, New York, Sept.21, 2018.</span><span class="f2 ls-tight gray-80 ws-tight founders-mono dib">Shannon Stapleton / Reuters</span></figcaption></div></section><article class="articleBody gridContainer___3alrm" data-taboola-target="read-more"><div class="pkg-other ad"><div data-enigma="true" data-slot="interstitial" data-sizes="[[[0,0],[[4,4]]]]" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div><div class="section___2arDM"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"></div></div><div class="section___2arDM lastSection___2KSdE"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100"><div class="tabletNewsletter___Av6eE"><div class="container___jsHMh news___34TC8"><div class="borderTop___3KbzM"></div><div></div><div class="signupBackground___27LhS"><h2 class="signupTitle___15fvr">Breaking News Emails</h2><div class="signupForeground___2FAE6"><div class="signupMessage___3ctJh">Get breaking news alerts and special reports. The news and stories that matter, delivered weekday mornings.</div><button class="animateSubscribeButton___EAiad signupButton___Vnoko founders-cond lh-none f4 fs-normal ls-normal pv6">SUBSCRIBE</button></div></div></div></div><section class="mb7"><div class="mb1 founders-mono f2 lh-copy gray-80 ls-tight"><time class="pubDate___3OViw" datetime="Thu Nov 01 2018 22:15:00 GMT+0000 (UTC)">Nov. 1, 2018 / 11:15 PM GMT+1</time></div><div class="founders-cond f6 lh-none">By Jason Abbruzzese and Reuters</div></section><p class="">Apple shares dropped more than 6 percent in after-hours trading on Thursday after projecting holiday-season sales that were weaker than analysts expected and issuing a surprise announcement — that the company would no longer break out how many iPhones it sold each quarter.</p><p class="">Meanwhile, the company reported fiscal fourth-quarter sales of $62.9 billion, a new record for the company.</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><div id="taboolaReadMoreBelow"></div><p class="">"We’re thrilled to report another record-breaking quarter that caps a tremendous fiscal 2018, the year in which we shipped our 2 billionth iOS device, celebrated the 10th anniversary of the App Store and achieved the strongest revenue and earnings in Apple’s history," Tim Cook, Apple’s chief executive officer, said in a press release accompanying the earnings report.</p><p class="">The company surprised analysts and journalists by announcing that it would not detail unit sales of particular products such as iPhones in future reports.</p><section class="embedWidget twitter___ilAzt small___1S8zc"><div class="usePresentation___EGHVR"><twitterwidget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1058110316578570240"></twitterwidget> </div></section><p class="">"Apple analyst job just got a whole lot harder with these disclosure changes," <a href="https://twitter.com/neilcybart/status/1058109086301147138">tweeted</a> Neil Cybart, a veteran Apple watcher. "But that's OK. I'm ready. Good earnings models (and perspective) will be able to handle the changes."</p><p class="">Gene Munster, managing partner of Loup Ventures and a longtime Apple analyst, <a href="https://twitter.com/CNBCFastMoney/status/1058111709301428229">told CNBC</a> he hoped the opposite would happen and that Apple would start issuing reports that detailed sales of the Apple Watch.</p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">"This is going to be a process for investors to get more confidence that this in fact is a stable business," Munster said about the change while noting that Apple was still doing "exceptionally well."</p><p class="">Heightened expectations for Apple sales center on new iPhones that the company announced in September, which include a variety of pricer options including <a href="https://www.nbcnews.com/tech/tech-news/apple-s-big-2018-fall-event-latest-new-iphones-product-n908841" class=" vilynx_listened">an iPhone that retails for $1,449</a>.</p><section class="related related--recommendedContent related___2RfEH"><div class="inner___He6NE"><div class="related__boxes related__boxes--recommendedContent todayboxes___jjC-0"><div class="todayboxesinner___3pDup"></div><div class="todayboxesbottom___2F78Y"></div></div><div class="background___3J1WX"></div><div class="related__title related__title--recommendedContent titleWrapper___1JWkE"><h4 class="title___15PLX">Recommended</h4></div><div id="recommended" class="related__items related__items--recommendedContent items___3G8l3"><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a href="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659?icid=recommended" class="link___3qfFk pictureLink___3TXZA vilynx_listened" vilynx-id="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659"><picture class="thumbnail___H4rRy"><source srcset="https://media1.s-nbcnews.com/j/MSNBC/Components/Video/201811/lon_chinabus2_181102.focal-80x80.jpg" media="(min-width: 758px)"><img src="./M-050_files/lon_chinabus2_181102.focal-60x60.jpg" alt=""></picture><span class="eyebrow___1iBD9"><span class="icon icon-video icon___tCEvo"></span></span></a></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a href="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659?icid=recommended" class="link___3qfFk vilynx_listened" vilynx-id="https://www.nbcnews.com/video/video-shows-passenger-hitting-bus-driver-moments-before-deadly-crash-in-china-1359948355659">Video shows woman fight with bus driver, causing deadly crash into river</a></h3></div></div><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a href="https://www.nbcnews.com/video/woman-in-plattsburgh-ny-chokes-nightclub-bouncer-after-getting-slapped-1359974467846?icid=recommended" class="link___3qfFk pictureLink___3TXZA vilynx_listened" vilynx-id="https://www.nbcnews.com/video/woman-in-plattsburgh-ny-chokes-nightclub-bouncer-after-getting-slapped-1359974467846"><picture class="thumbnail___H4rRy"><source srcset="https://media4.s-nbcnews.com/j/MSNBC/Components/Video/201811/lon_bouncer_181102.focal-80x80.jpg" media="(min-width: 758px)"><img src="./M-050_files/lon_bouncer_181102.focal-60x60.jpg" alt=""></picture><span class="eyebrow___1iBD9"><span class="icon icon-video icon___tCEvo"></span></span></a></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a href="https://www.nbcnews.com/video/woman-in-plattsburgh-ny-chokes-nightclub-bouncer-after-getting-slapped-1359974467846?icid=recommended" class="link___3qfFk vilynx_listened" vilynx-id="https://www.nbcnews.com/video/woman-in-plattsburgh-ny-chokes-nightclub-bouncer-after-getting-slapped-1359974467846">5-foot-1 woman floors nightclub bouncer after slap on backside</a></h3></div></div></div></div></section><p class="">Apple said it expected sales in the final three months of the year to be between $89 billion and $93 billion, which is on the low end of what analysts had expected, <a href="https://www.bloomberg.com/news/articles/2018-11-01/apple-holiday-forecast-misses-analysts-estimates-shares-fall?utm_campaign=socialflow-organic&amp;cmpid%3D=socialflow-twitter-markets&amp;utm_content=markets&amp;utm_medium=social&amp;utm_source=twitter">according to Bloomberg</a>.</p><p class="">Apple has enjoyed a strong 2018. In August, it became the first public U.S. company to <a href="https://www.nbcnews.com/tech/tech-news/apple-becomes-first-public-u-s-company-reach-1-trillion-n896956" class=" vilynx_listened">reach a valuation of $1 trillion</a>.   </p><div class="pkg-other ad tc tl-m ad-container"><div data-enigma="true" data-slot="boxinline" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-render-on-view="true" data-targeting="{}" data-active-tab="true" data-offset-viewport="100"></div></div><p class="">In an interview with Reuters, Cook said some of the forecast was explained by Apple releasing its top-end iPhone models, the XS and XS Max, in the fiscal fourth quarter. Cook also said foreign exchange rates would have a $2 billion negative impact on Apple's sales forecast.</p><p class="">Apple was unsure whether it could make enough new iPhones, Apple Watches, iPads and Mac models it released in recent weeks, Cook told Reuters. The company is widely expanding the use of its facial recognition unlocking system in iPhones and iPads, which uses special lasers that are still produced by only a handful of suppliers.</p><p class="">Cook said that Apple is "seeing some macroeconomic weakness in some of the emerging markets," without specifying which ones.</p><p class="lastMarkupItem">But Cook stressed that Apple was happy with its performance in China, where revenue grew 16 percent to $11.4 billion, the fifth quarter in a row the company has had double-digit growth in the region.</p><div class="mv8"><div class="articleByline byline___2NGv_ noImage___3G0GY pt3 pb2"><div class="inner___y8Zvr mt2 mt0-m"><span class="image___c6bcD mt3 mv6-m mr4"></span><span class="articleByline__name name___32ZJk founders-mono f3 lh-title ls-tight pt1 pt4-m ml9 ml0-m">Jason Abbruzzese</span><span class="articleByline__social social___kAOJV f2 mt2 mt4-m ml9 ml0-m"><a href="https://twitter.com/JasonAbbruzzese" target="_blank" rel="noopener noreferrer" class="socialLink___1pzK3"><span class="icon icon-twitter"></span></a><a href="mailto:jason.abbruzzese@nbcuni.com" target="_blank" rel="noopener noreferrer" class="socialLink___1pzK3"><span class="icon icon-email"></span></a></span></div><p class="articleByline__bio bio___3q2CD publico-txt f2 lh-copy mt3 mt0-m ml9-m">Jason Abbruzzese is the senior editor for technology news at NBC News Digital.</p></div><div class="articleByline byline___2NGv_ noImage___3G0GY pt3 pb2"><div class="inner___y8Zvr mt2 mt0-m"><span class="image___c6bcD mt3 mv6-m mr4"></span><span class="articleByline__name name___32ZJk founders-mono f3 lh-title ls-tight pt1 pt4-m ml9 ml0-m">Reuters</span></div></div></div></div><div class="rightRail___IGUOf"><div data-packageid="ncna930076" class="pkg-other taboola taboola___4Gull"><div id="taboola-right-rail-thumbnails-ncna930076"></div></div><div class="pkg-other ad rightRailAd___35GWq tc tl-m ad-container"><div data-enigma="true" data-slot="boxflex" data-sizes="[[[1000,1],[[300,250],[300,600],[360,360],[360,720]]],[[758,1],[]],[[0,0],[]]]" data-offset="10" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></div></div><div class="pkg-other ad midresponsiveAd___3hmNF ad-container"><div data-enigma="true" data-slot="midresponsive" data-sizes="[[[1000,1],[[700,1],[5,5]]],[[758,1],[]],[[0,0],[]]]" data-offset="300" data-refresh-interval="0" data-render-on-view="true" data-targeting="{}" data-active-tab="true"></div></div></article><div data-packageid="ncna930076" class="pkg-other taboola taboola___4Gull"><div id="taboola-below-article-thumbnails---bento-ncna930076"></div></div></div></div></div><nav class="container___3XG4H founders-mono f2 lh-none ls-tight"><a href="https://www.nbcnews.com/" title="return to Home page"><span class="icon icon-peacock backdropLogo___1fLpK"></span></a><div class="row___2hzaG"><ul class="links___1wEPz"><li><a href="https://www.nbcnews.com/pages/about-nbc-news-digital" class=" vilynx_listened">About</a></li><li><a href="https://www.nbcnews.com/pages/contact-us" class=" vilynx_listened">Contact</a></li><li><a href="http://www.nbcunicareers.com/">Careers</a></li><li><a href="https://www.nbcuniversal.com/privacy">Privacy policy</a></li><li><a href="https://www.nbcnews.com/pages/terms-of-service" class=" vilynx_listened">Terms of Service</a></li><li><a href="https://www.nbcnews.com/pages/sitemap" class=" vilynx_listened">SiteMap</a></li><li><a href="https://together.nbcuni.com/">Advertise</a></li><li><a href="https://info.evidon.com/pub_info/267?v=1"><img src="./M-050_files/icon1.png" alt="" class="bapwIcon___zk0Iq" hidden="" style="display: none !important;">AdChoices</a></li></ul></div><div class="row___2hzaG"><p class="copyright___3CuB7 founders-mono f2 lh-none ls-tight">© <!-- -->2018<!-- --> NBC UNIVERSAL</p><ul class="brands___3I_td"><li><a href="http://nbcnews.com/" class=" vilynx_listened"><span class="icon icon-nbcnews-white nbcNews___1C-dc"></span></a></li><li><a href="http://msnbc.com/" class=" vilynx_listened"><span class="icon icon-msnbc msnbc___2LgO3"></span></a></li><li><a href="http://www.today.com/" class=" vilynx_listened"><span class="icon icon-today today___1FkVe"></span></a></li></ul></div></nav></div></div><script src="./M-050_files/satelliteLib-f61f7bcb705dcb4f28f05fc143faaa9d8c7d1990.js.Download"></script><script type="text/javascript">
/*!******************
Tracking Service $t
Version: 2.4.1
Built: 2017-08-24T19:35:07.994Z
*********************/
!function(e,t){var n=function(){var n=function(e){return"function"==typeof n[e]?n[e].apply(n,Array.prototype.slice.call(arguments,1)):arguments.length>0?n.get.apply(n,arguments):n.list.apply(n,arguments)},r=function(e,t){n.errorLog.push(e),(!t||n.debug>=1)&&i("$t error - "+e)},i=e.console?function(){e.console.log.apply(e.console,arguments)}:function(){},o=function(e,t){e=e||{};for(var n in t)"object"==typeof t[n]?e[n]=o(e[n],t[n]):e[n]=t[n];return e},s=function(e,t){var i=!1;return/^[^a-zA-Z_$]|[^0-9a-zA-Z_$]/.test(e)&&(i="validation: "+e+" is not a valid variable name"),t||void 0===n.eventLog[e]||(i="validation: "+e+" is already registered"),!i||(r(i),!1)},a={exp:36e5,key:"ts_data.",save:function(t,n,r){var i=(new Date).getTime(),o={eventData:n,timestamp:i};i=r?i+r:i+this.exp;var s=/\w+\.\w+$/.exec(e.location.hostname);return this.cookie.set({name:this.key+t,value:JSON.stringify(o),path:"/",expires:new Date(i),domain:s}),n},load:function(e){var t=null;return!!(t=this.cookie.get(this.key+e))&&(t=JSON.parse(t),(new Date).getTime()<t.timestamp?t.eventData:void 0)},listEvents:function(){var e,t=[];e=this.cookie.keys();for(var n in e)isNaN(n)||(n=e[n]),-1!=n.indexOf(this.key)&&t.push(n.split(this.key)[1]);return t},cookie:{get:function(e){var n=t.cookie.split(e+"=");return 2===n.length&&decodeURI(n.pop().split(";").shift())},set:function(e){var n=e.name+"="+encodeURI(e.value)+";";e.expires&&(n+="expires="+e.expires.toUTCString()+";"),n+=e.path?"path="+e.path+";":"",n+=e.domain?"domain="+e.domain+";":"",n+=e.secure?"secure;":"",n+=e.httpOnly?"httpOnly;":"",t.cookie=n},keys:function(){var e=[],n=t.cookie;if(""===n)return e;for(var r=n.split("; "),i=r.length;i--;){var o=r[i].split("=");e[i]=o[0]}return e}}},c={listeners:{},trigger:function(e,t,i){if(this.listeners[t]&&this.listeners[t].length>0)for(var o=0;this.listeners[t][o];o++){var s=this.listeners[t][o];try{s.apply(n,[{type:t},i])}catch(e){r("Cant execute callback for: "+t+". "+e.stack)}}},bind:function(e,t,n){void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(n)}},f=function(t){if(t=t.split("."),void 0!==e[t[0]]){for(var n=e[t[0]],i=1;t.length>i;i++){if(null===n||void 0===n[t[i]])return r("TRAM convert - undefined - "+t.join().replace(/,/g,"."),!0),!1;n=n[t[i]]}return!function(e){if("object"==typeof e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1}(n)&&n||!1}return r("TRAM convert - missing root obj - "+t[0],!0),!1},l={},v={uniqueKey:"$t_nbc_crossEvent",srcUrl:[e.location.protocol,"//",e.location.host,e.location.pathname].join(""),listen:function(){var t=this.uniqueKey,r=this.srcUrl,i=e.addEventListener?"addEventListener":"attachEvent",o=function(e){try{return JSON.parse(e)}catch(e){return null}};(0,e[i])("attachEvent"==i?"onmessage":"message",function(i){if("string"==typeof i.data&&i.data.substring(0,t.length)===t){var s=o(i.data.replace(t,""));s&&s.action&&s.srcUrl!==r&&("track"!==s.action[0]&&"register"!==s.action[0]||(n.apply(n,s.action),parent!==e&&parent.postMessage(i.data,"*")))}},!1)},send:function(e){var t=this.uniqueKey,n={action:e,srcUrl:this.srcUrl};parent.postMessage(t+JSON.stringify(n),"*")}},u={};return n.version="2.4.1",n.debug=0,n.errorLog=[],n.eventLog={},n.track=function(t,n,s){if(void 0!==this.eventLog[t]){if("object"!=typeof s&&(s={}),n=n||!0,this.eventLog[t]=n,s.persistent){var f=!1;s.expires&&(f=1e3*s.expires),a.save(t,n,f)}if(0!==t.indexOf("_")&&c.trigger(this,"eventTracked",{eventType:t,eventData:n}),u[t]&&u[t].remote){if("object"==typeof n&&!n.$t_remote){var l=[e.location.protocol,"//",e.location.host,e.location.pathname].join("");o(n,{$t_remote:l})}v.send(["track",t,n])}return c.trigger(this,t,n),(1==this.debug&&0!==t.indexOf("_")||2==this.debug)&&i("*Tracking service: "+t+" triggered"),!0}return r("unable to track: "+t),!1},n.register=function(e,t){"object"!=typeof t&&(t={}),t=u[e[f]]=o(u[e[f]]||{},t);for(var n="",i=a.listEvents(),c={},f=0;i[f];f++)c[i[f]]=!0;for("string"==typeof e&&(e=[e]),f=0;e[f];f++){if(!0===c[e[f]])return!0;s(e[f],t.allowDuplicate)?(this.eventLog[e[f]]=null,t.remote&&v.send(["register",e[f],t])):n+=e[f]+","}return!n||(r("could not register: "+n),!1)},n.registeredEvents=function(e){var t=!1,r=[];0===(e=e||"").indexOf("_")&&(t=!0,e=e.substr(1));for(var i in n.eventLog)-1==i.indexOf(e)||0===i.indexOf("_")&&!t||r.push(i);return r},n.bindTrack=function(e){c.bind(this,"eventTracked",e)},n.on=function(e,t){"string"==typeof e&&(e=[e]);for(var n=0;e[n];n++)c.bind(this,e[n],t)},n.load=function(e,t,n){void 0===l[e]?"string"==typeof t?(l[e]={},l[e].info={ref:t,options:n}):r("TRAM load - object reference must be string"):r("TRAM load - object name taken")},n.get=function(e,t){var r=e.split(".")[0];if(t=void 0!==t?t:"",n.eventLog[r]||l[r]){n.eventLog[r]&&(e="$t."+e,r="$t"),e=e.replace(r,l[r].info.ref);var i=f(e);return i||t}return t},n.list=function(e){if(e)n.eventLog[e]?(i(e+" : event info"),i(n.eventLog[e])):l[e]?void 0!==window[l[e].info.ref.split(".")[0]]?(i(e+" : "+l[e].info.ref),i(f(l[e].info.ref))):i(e+" : "+l[e].info.ref+" : Not present"):i(e+" :  Empty or not defined");else{i("%cversion: %s","font-weight:bold;",n.version),i("%cevents:","font-weight:bold;");for(var t in n.eventLog)if(0!==t.indexOf("_")||2==n.debug){var r=u[t]&&u[t].remote?"(remote)":"";n.eventLog[t]?i("%c* %s %s fired %O","color:#B80;",t,r,n.eventLog[t]):(r=u[t]&&u[t].remote?"(remote)":"",i("%s %s",t,r))}i("%cTRAM objects:","font-weight:bold;");for(var o in l)i("%s : %s : %O",o,l[o].info.ref,f(l[o].info.ref));n.errorLog.length>0&&i("%clog: %O","font-weight:bold;",n.errorLog)}},function(){var e=a.listEvents();if(!e)return!1;for(var t=0;e[t];t++){var r=a.load(e[t]);r&&(n.eventLog[e[t]]=r)}}(),n.load("$t","$t.eventLog"),v.listen(),n};if(void 0!==e.$t){if(!parseFloat(e.$t.version)>0){var r=e.$t("getSaves");e.$t=n();for(var i=0;r[i];i++)e.$t.apply(e.$t,r[i])}}else e.$t=n()}(window,document);
  
//load data layers
$t('load','jsonLd','jsonLd');
</script><script>
window.parseJsonLd = function() {
    var safeParse = function(JSONstring) {
        try {
            return JSON.parse(JSONstring);
        } catch (e) {
            return { '@type':'error','errorObj': e };
        }
    };
    var rawJsonLd = document.querySelectorAll('script[type="application/ld+json"]');
    window.jsonLd = {};
    for (var i = 0; rawJsonLd[i]; i++) {
        var entryParsed = safeParse(rawJsonLd[i].innerHTML);
        var type = entryParsed['@type'] || 'unknown';
        window.jsonLd[type] = window.jsonLd[type] || [];
        window.jsonLd[type].push(entryParsed);
    }
};
window.parseJsonLd();
</script><!-- condition: top of page -->
<script>
/* globals $t */
(function() {
    var ranSimplereach = false;
    $t('on', 'dtm_pageView', function(e, data) {
        var pageIndex = $t(e.type + '.index', '0');
        var articleIndex = $t('jsonLd.Dataset', []).reduce(function(acum, curE, curI) {
            var pageType = curE.pageType && curE.pageType.toLowerCase();
            if (curI <= pageIndex && pageType === 'article') {
                return acum + 1;
            } else {
                return acum;
            }
        }, -1);
        var trackView = data.trackView !== false; //this will default all to true if not false
        var nativeSponsor = $t('jsonLd.Dataset.' + pageIndex + '.sponsor', false);
        var isWWW = document.location.hostname.match(/([a-z0-9])+[^.]/)[0] === 'www';
        var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
        var brand = topLevelDomain.split('.')[0];

        if (nativeSponsor && trackView && !ranSimplereach) {
            window.__reach_config = {
                pid: (isWWW ? '58642e4d736b79ecca00151c' : '000000000000000000000000'),
                title: $t('jsonLd.NewsArticle.' + articleIndex + '.headline'),
                url: $t('jsonLd.NewsArticle.' + articleIndex + '.url'),
                date: $t('jsonLd.NewsArticle.' + articleIndex + '.datePublished'), //UTC or any ISO8601 date
                authors: [nativeSponsor, brand],
                channels: [$t('jsonLd.Dataset.' + pageIndex + '.vertical'), $t('jsonLd.Dataset' + pageIndex + '.section'), $t('jsonLd.Dataset.' + pageIndex + '.subSection')],
                tags: [$t('jsonLd.NewsArticle.' + articleIndex + '.articleId'), 'article'],
                article_id: [$t('jsonLd.NewsArticle.' + articleIndex + '.articleId')],
                ignore_errors: false
            };
            if (window.SPR && window.SPR.Reach) {
                window.SPR.Reach.collect(window.__reach_config);
            } else {
                (function() {
                    var s = document.createElement('script');
                    s.async = true;
                    s.type = 'text/javascript';
                    s.src = document.location.protocol + '//d8rk54i4mohrb.cloudfront.net/js/reach.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
                })();
            }
            ranSimplereach = true;
        } else if (ranSimplereach && window.SPR) {
            window.SPR.stop();
            ranSimplereach = false;
        }
    });
})();
</script><!-- condition: top of page -->
<script>
// AppM - subscribe event
/* globals s, $t */
(function() {
    var showList = {
        'msnbc':{ //show should be signaled by the site, but for now we just have a list
            'firstlook': true,//msnbc shows(scraped from nav)
            'morning-joe': true,
            'msnbc-live-hallie-jackson': true,
            'velshi-ruhle': true,
            'andrea-mitchell': true,
            'craig-melvin': true,
            'msnbc-live-katy-tur': true,
            'msnbc-live-with-ali-velshi': true,
            'deadline-white-house': true,
            'mtp-daily': true,
            'msnbc-live-ari-melber': true,
            'hardball': true,
            'all': true,
            'rachel-maddow-show': true,
            'the-last-word': true,
            '11th-hour-with-brian-williams': true,
            'originals': true,
            'your-business': true,
            'hugh-hewitt': true,
            'politicsnation': true,
            'am-joy': true,
            'weekends-with-alex': true,
            'kasiedc': true
        },
        'nbcnews':{
            'nightly-news': true,//nbcnews shows
            'meet-the-press': true,
            'dateline': true
        },
        'today':{
            'on-the-show': true, //today shows
            'megyn-kelly-today': true,
            'klgandhoda': true,
            'weekend-today': true,
            'sunday-today': true,
            'originals': true
        }
    };
    var brand = function() {
        //would be better is this wasnt based on domain
        if (s.topLevelDomain === 'today.com') {
            return 'today';
        } else if (s.topLevelDomain === 'msnbc.com') {
            return 'msnbc';
        } else {
            return 'nbcnews';
        }
    };
    var convertDate = function(dateString) {
        //input: 2015-06-04T14:40:45.000+0000, output: 2015-06-04 14:40:45 Z
        var dateObj = new Date(dateString);
        if (dateObj.toString() !== 'Invalid Date') {
            return dateObj.toISOString().replace('T', ' ').replace('.000Z', ' Z');
        } else {
            return dateString;
        }
    };

    $t('on', 'dtm_pageView', function(e,data) {

        var slug = function() {
            var slug = $t(e.type + '.url').match(/[^/]+(?=\/$|$)/g)||'';
            return slug.toString();
        };
        var pageIndex = $t(e.type + '.index', '0');
        var trackView = data.trackView !== false; //this will default all to true if not false
        var contentType = (function() {
            //if its native content, its just native
            if(pageIndex === -1){
                //if there is an arror loading metadata, page index is -1
                return 'error';
            }
            if ($t('jsonLd.Dataset.' + pageIndex + '.sponsor', false)) {
                return 'native';
            }
            var pageType = $t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase(); //only considers the most recent page for now
            switch (pageType) {
                case 'article':
                    return 'post';
                case 'gallery':
                    return 'gallery';
                case 'front':
                    if ($t(e.type + '.url') === '/') {
                        return 'cover';
                    } else if ($t(e.type + '.initiator') === 'transporter') {
                        return 'inline vertical';
                    } else {
                        return 'vertical';
                    }
                case 'subfront': //i think 'SubFront' is gone?
                case 'sectionfront':
                    if(showList[brand()][slug()]){
                        return 'show';
                    }else{
                        return 'subvertical';
                    }
                case 'video':
                    return 'canonical video';
                case 'notfound':
                case 'internalservererror':
                    return 'error';
                default:
                    return s.noValue;
            }
        })();

        //adobe values - clear before each pageview
        s.clearVars();

        s.pageName = (function() {
            var pn = brand() + ':';
            if (contentType === 'subvertical') {
                //subvertical is weird
                pn += $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue) + ':' + contentType + ':' + slug();
            } else if (contentType === 'inline vertical') {
                //urls dont change, so slug is not right
                pn += contentType + ':' + $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue);
            } else if (contentType === 'cover' && $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue) === 'news') {
                //Temporary change to identify bento cover in Omniture
                pn += contentType + ':new';
            } else {
                pn += contentType + (slug() ? (':' + slug()) : '');
            }
            return pn;
        })();
        s.contextData = {
            'news.contenttype': contentType,
            'news.contentcategory': (function() { // section
                if ($t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase() === 'front') {
                    return contentType;
                } else {
                    return $t('jsonLd.Dataset.' + pageIndex + '.section', s.noValue);
                }
            })(),
            'news.subcat1': $t('jsonLd.Dataset.' + pageIndex + '.subSection', s.noValue),
            //'news.breakingnews':s.noValue, // 'True' on TODAY, URL on NBCNews
            //'news.contentsource':s.noValue,
            'news.nativesponsor': $t('jsonLd.Dataset.' + pageIndex + '.sponsor', s.noValue),
            'news.subverticalname': $t('jsonLd.Dataset.' + pageIndex + '.subVertical', s.noValue),
            'news.templatename': $t('jsonLd.Dataset.' + pageIndex + '.packageId', s.noValue),
            'news.verticalname': $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue),
            'news.ecommerceenabled': $t('jsonLd.Dataset.' + pageIndex + '.ecommerceEnabled'),
            //test for ldjson loading multiple times from react-helmet
            'news.jsonld': $t('jsonLd.Dataset', []).length
        };

        // switch on contentType 
        switch (contentType) {
            case 'post':
                //article index for multi-type content
                var articleIndex = $t('jsonLd.Dataset', []).reduce(function(acum, curE, curI) {
                    var pageType = curE.pageType && curE.pageType.toLowerCase();
                    if (curI <= pageIndex && pageType === 'article') {
                        return acum + 1;
                    } else {
                        return acum;
                    }

                }, -1);
                articleIndex = articleIndex === -1 ? 0 : articleIndex;
                s.contextData = s.extendArray(s.contextData, {
                    'news.docid': $t('jsonLd.NewsArticle.' + articleIndex + '.identifier.value', s.noValue),
                    'news.videoplayercount': $t('jsonLd.NewsArticle.' + articleIndex + '.video', []).length || s.noValue, //[TODO] need this from video objects
                    'news.origpagepublishdate': convertDate($t('jsonLd.NewsArticle.' + articleIndex + '.datePublished', s.noValue)),
                    'news.shortsummary': $t('jsonLd.NewsArticle.' + articleIndex + '.description', s.noValue),
                    'news.show': s.noValue, //[TODO] need this from video objects
                    'news.storylines': s.noValue, //[TODO] need this from video objects
                    'news.modpagepublishdate': convertDate($t('jsonLd.NewsArticle.' + articleIndex + '.dateModified', s.noValue)), // 2017-08-17T16:40:53.000Z
                    'news.author': $t('jsonLd.NewsArticle.' + articleIndex + '.author.0.name', s.noValue),
                    'news.headline': $t('jsonLd.NewsArticle.' + articleIndex + '.headline', s.noValue),
                    'news.label': $t('jsonLd.Dataset.' + articleIndex + '.label', s.noValue)
                });
                break;
            case 'inline vertical':
            case 'vertical':
                break;
            case 'subvertical':
                break;
            case 'show':
                s.contextData = s.extendArray(s.contextData, {
                    'news.subverticalname': s.noValue, //subvertical is wrong in the template 
                    'news.contentcategory': $t('jsonLd.Dataset.' + pageIndex + '.section', slug()) //using slug as show name
                });
                break;
            case 'gallery':
                // indexing set to 0, non dynamic
                s.contextData = s.extendArray(s.contextData, {
                    'news.docid': $t('jsonLd.imageGallery.0.identifier.value', s.noValue),
                    'news.origpagepublishdate': convertDate($t('jsonLd.imageGallery.0.dateModified', s.noValue)),
                    'news.shortsummary': $t('jsonLd.imageGallery.0.description', s.noValue), // [TODO] not sure if this is headline?
                    'news.modpagepublishdate': convertDate($t('jsonLd.imageGallery.0.dateModified', s.noValue)), // 2017-08-17T16:40:53.000Z
                    'news.author': $t('jsonLd.imageGallery.0.author.0.name', s.noValue),
                    'news.slideshowname': $t('jsonLd.imageGallery.0.headline', s.noValue),
                    'news.headline': $t('jsonLd.imageGallery.0.headline', s.noValue)
                });
                break;
            case 'canonical video':
                // indexing set to 0, non dynamic
                s.contextData = s.extendArray(s.contextData, {
                    'news.contentcategory': 'video', //section is hard coded
                    'news.modpagepublishdate': convertDate($t('jsonLd.NewsArticle.0.dateModified', s.noValue)), // 2017-08-17T16:40:53.000Z
                    'news.origpagepublishdate': convertDate($t('jsonLd.NewsArticle.0.datePublished', s.noValue))
                });
                break;
        }
        //track paegview, or only set pageview values
        if (trackView) {
            s.t();
        }
    });
})();
</script><script>if (typeof window._satellite !== "undefined") {window._satellite.pageBottom();}</script><script>
/************************** App measurment code and suppliments v2.0*************************/

/************************** PLUGINS SECTION *************************/

/*
Copyright (c) Copyright (c) 2007, Carl S. Yestrau All rights reserved.
Code licensed under the BSD License: http://www.featureblend.com/license.txt
Version: 1.0.4
*/
window.FlashDetect = new function(){var r=this;r.installed=!1,r.raw="",r.major=-1,r.minor=-1,r.revision=-1,r.revisionStr="";var n=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(r){return e(r)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(r){var n="6,0,21";try{r.AllowScriptAccess="always",n=e(r)}catch(i){}return n}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(r){return e(r)}}],e=function(r){var n=-1;try{n=r.GetVariable("$version")}catch(i){}return n},a=function(r){var n=-1;try{n=new ActiveXObject(r)}catch(i){n={activeXError:!0}}return n},t=function(r){var n=r.split(",");return{raw:r,major:parseInt(n[0].split(" ")[1],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),revisionStr:n[2]}},o=function(r){var n=r.split(/ +/),i=n[2].split(/\./),e=n[3];return{raw:r,major:parseInt(i[0],10),minor:parseInt(i[1],10),revisionStr:e,revision:s(e)}},s=function(n){return parseInt(n.replace(/[a-zA-Z]/g,""),10)||r.revision};r.majorAtLeast=function(n){return r.major>=n},r.minorAtLeast=function(n){return r.minor>=n},r.revisionAtLeast=function(n){return r.revision>=n},r.versionAtLeast=function(){var n=[r.major,r.minor,r.revision],e=Math.min(n.length,arguments.length);for(i=0;e>i;i++){if(n[i]>=arguments[i]){if(e>i+1&&n[i]==arguments[i])continue;return!0}return!1}},r.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var i="application/x-shockwave-flash",e=navigator.mimeTypes;if(e&&e[i]&&e[i].enabledPlugin&&e[i].enabledPlugin.description){var s=e[i].enabledPlugin.description,v=o(s);r.raw=v.raw,r.major=v.major,r.minor=v.minor,r.revisionStr=v.revisionStr,r.revision=v.revision,r.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var s=-1,c=0;c<n.length&&-1==s;c++){var l=a(n[c].name);if(!l.activeXError&&(r.installed=!0,s=n[c].version(l),-1!=s)){var v=t(s);r.raw=v.raw,r.major=v.major,r.minor=v.minor,r.revision=v.revision,r.revisionStr=v.revisionStr}}}()};FlashDetect.JS_RELEASE="1.0.4";

/*
 Start ActivityMap Module
*/
function AppMeasurement_Module_ActivityMap(f){function g(a,d){var b,c,n;if(a&&d&&(b=e.c[d]||(e.c[d]=d.split(","))))for(n=0;n<b.length&&(c=b[n++]);)if(-1<a.indexOf(c))return null;p=1;return a}function q(a,d,b,c,e){var g,h;if(a.dataset&&(h=a.dataset[d]))g=h;else if(a.getAttribute)if(h=a.getAttribute("data-"+b))g=h;else if(h=a.getAttribute(b))g=h;if(!g&&f.useForcedLinkTracking&&e&&(g="",d=a.onclick?""+a.onclick:"")){b=d.indexOf(c);var l,k;if(0<=b){for(b+=10;b<d.length&&0<="= \t\r\n".indexOf(d.charAt(b));)b++;
if(b<d.length){h=b;for(l=k=0;h<d.length&&(";"!=d.charAt(h)||l);)l?d.charAt(h)!=l||k?k="\\"==d.charAt(h)?!k:0:l=0:(l=d.charAt(h),'"'!=l&&"'"!=l&&(l=0)),h++;if(d=d.substring(b,h))a.e=new Function("s","var e;try{s.w."+c+"="+d+"}catch(e){}"),a.e(f)}}}return g||e&&f.w[c]}function r(a,d,b){var c;return(c=e[d](a,b))&&(p?(p=0,c):g(k(c),e[d+"Exclusions"]))}function s(a,d,b){var c;if(a&&!(1===(c=a.nodeType)&&(c=a.nodeName)&&(c=c.toUpperCase())&&t[c])&&(1===a.nodeType&&(c=a.nodeValue)&&(d[d.length]=c),b.a||
b.t||b.s||!a.getAttribute||((c=a.getAttribute("alt"))?b.a=c:(c=a.getAttribute("title"))?b.t=c:"IMG"==(""+a.nodeName).toUpperCase()&&(c=a.getAttribute("src")||a.src)&&(b.s=c)),(c=a.childNodes)&&c.length))for(a=0;a<c.length;a++)s(c[a],d,b)}function k(a){if(null==a||void 0==a)return a;try{return a.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+$",
"mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]{1,}","mg")," ").substring(0,254)}catch(d){}}var e=this;e.s=f;var m=window;m.s_c_in||(m.s_c_il=[],m.s_c_in=0);e._il=m.s_c_il;e._in=m.s_c_in;e._il[e._in]=e;m.s_c_in++;e._c="s_m";e.c={};var p=0,t={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,b,c=f.contextData,e=f.linkObject;(a=f.pageName||f.pageURL)&&(d=r(e,"link",f.linkName))&&(b=r(e,"region"))&&(c["a.activitymap.page"]=a.substring(0,
255),c["a.activitymap.link"]=128<d.length?d.substring(0,128):d,c["a.activitymap.region"]=127<b.length?b.substring(0,127):b,c["a.activitymap.pageIDType"]=f.pageName?1:0)};e.link=function(a,d){var b;if(d)b=g(k(d),e.linkExclusions);else if((b=a)&&!(b=q(a,"sObjectId","s-object-id","s_objectID",1))){var c,f;(f=g(k(a.innerText||a.textContent),e.linkExclusions))||(s(a,c=[],b={a:void 0,t:void 0,s:void 0}),(f=g(k(c.join(""))))||(f=g(k(b.a?b.a:b.t?b.t:b.s?b.s:void 0)))||!(c=(c=a.tagName)&&c.toUpperCase?c.toUpperCase():
"")||("INPUT"==c||"SUBMIT"==c&&a.value?f=g(k(a.value)):"IMAGE"==c&&a.src&&(f=g(k(a.src)))));b=f}return b};e.region=function(a){for(var d,b=e.regionIDAttribute||"id";a&&(a=a.parentNode);){if(d=q(a,b,b,b))return d;if("BODY"==a.nodeName)return"BODY"}}}
/* End ActivityMap Module */
/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ===============

AppMeasurement for JavaScript version: 1.7.0
Copyright 1996-2016 Adobe, Inc. All Rights Reserved
More info available at http://www.adobe.com/marketing-cloud.html
*/
function AppMeasurement(){var a=this;a.version="1.7.0";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0);a._il=k.s_c_il;a._in=k.s_c_in;a._il[a._in]=a;k.s_c_in++;a._c="s_c";var q=k.AppMeasurement.Jb;q||(q=null);var r=k,n,t;try{for(n=r.parent,t=r.location;n&&n.location&&t&&""+n.location!=""+t&&r.location&&""+n.location!=""+r.location&&n.location.host==t.host;)r=n,n=r.parent}catch(u){}a.yb=function(a){try{console.log(a)}catch(b){}};a.Ha=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||
0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.pb=function(){var c=k.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.cookieDomain&&
!/^[0-9.]+$/.test(c)&&(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.cookieDomain=0<d?c.substring(d):c}return a.cookieDomain};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.pb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=
e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=a.escape(c)+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0};a.K=[];a.ha=function(c,b,d){if(a.Aa)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,m=["webkitvisibilitychange",
"visibilitychange"];g||(g=a.d.webkitVisibilityState);if(g&&"prerender"==g){if(!a.ia)for(a.ia=1,d=0;d<m.length;d++)a.d.addEventListener(m[d],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&(a.ia=0,a.delayReady())});f=1;e=0}else d||a.p("_d")&&(f=1);f&&(a.K.push({m:c,a:b,t:e}),a.ia||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.p("_d")?b=1:a.va();0<a.K.length;){d=a.K.shift();if(b&&!d.t&&d.t>c){a.K.unshift(d);
setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Aa=1;a[d.m].apply(a,d.a);a.Aa=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ha("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,m="";e=f="";if(a.lightProfileID)d=a.O,(m=a.lightTrackVars)&&(m=","+m+","+a.ma.join(",")+",");else{d=a.g;if(a.pe||
a.linkType)m=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(m=a[e].Hb,f=a[e].Gb));m&&(m=","+m+","+a.G.join(",")+",");f&&m&&(m+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!m||0<=m.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)};a.r=function(c,b,d,f,e){var g="",m,p,k,w,n=0;"contextData"==c&&(c="c");if(b){for(m in b)if(!(Object.prototype[m]||e&&m.substring(0,e.length)!=e)&&b[m]&&(!d||0<=d.indexOf(","+(f?f+
".":"")+m+","))){k=!1;if(n)for(p=0;p<n.length;p++)m.substring(0,n[p].length)==n[p]&&(k=!0);if(!k&&(""==g&&(g+="&"+c+"."),p=b[m],e&&(m=m.substring(e.length)),0<m.length))if(k=m.indexOf("."),0<k)p=m.substring(0,k),k=(e?e:"")+p+".",n||(n=[]),n.push(k),g+=a.r(p,b,d,f,k);else if("boolean"==typeof p&&(p=p?"true":"false"),p){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(k=m.substring(0,4),w=m.substring(4),m){case "transactionID":m="xact";break;case "channel":m="ch";break;case "campaign":m=
"v0";break;default:a.Ha(w)&&("prop"==k?m="c"+w:"eVar"==k?m="v"+w:"list"==k?m="l"+w:"hier"==k&&(m="h"+w,p=p.substring(0,255)))}g+="&"+a.escape(m)+"="+a.escape(p)}}""!=g&&(g+="&."+c)}return g};a.usePostbacks=0;a.sb=function(){var c="",b,d,f,e,g,m,p,k,n="",r="",s=e="";if(a.lightProfileID)b=a.O,(n=a.lightTrackVars)&&(n=","+n+","+a.ma.join(",")+",");else{b=a.g;if(a.pe||a.linkType)n=a.linkTrackVars,r=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(n=a[e].Hb,r=a[e].Gb));
n&&(n=","+n+","+a.G.join(",")+",");r&&(r=","+r+",",n&&(n+=",events,"));a.events2&&(s+=(""!=s?",":"")+a.events2)}if(a.visitor&&1.5<=parseFloat(a.visitor.version)&&a.visitor.getCustomerIDs){e=q;if(g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState));e&&(c+=a.r("cid",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];
g=a[e];f=e.substring(0,4);m=e.substring(4);!g&&"events"==e&&s&&(g=s,s="");if(g&&(!n||0<=n.indexOf(","+e+","))){switch(e){case "supplementalDataID":e="sdid";break;case "timestamp":e="ts";break;case "dynamicVariablePrefix":e="D";break;case "visitorID":e="vid";break;case "marketingCloudVisitorID":e="mid";break;case "analyticsVisitorID":e="aid";break;case "audienceManagerLocationHint":e="aamlh";break;case "audienceManagerBlob":e="aamb";break;case "authState":e="as";break;case "pageURL":e="g";255<g.length&&
(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case "pageURLRest":e="-g";break;case "referrer":e="r";break;case "vmk":case "visitorMigrationKey":e="vmt";break;case "visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case "visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&(g="");break;case "charSet":e="ce";break;case "visitorNamespace":e="ns";break;case "cookieDomainPeriods":e="cdp";break;case "cookieLifetime":e="cl";break;case "variableProvider":e=
"vvp";break;case "currencyCode":e="cc";break;case "channel":e="ch";break;case "transactionID":e="xact";break;case "campaign":e="v0";break;case "latitude":e="lat";break;case "longitude":e="lon";break;case "resolution":e="s";break;case "colorDepth":e="c";break;case "javascriptVersion":e="j";break;case "javaEnabled":e="v";break;case "cookiesEnabled":e="k";break;case "browserWidth":e="bw";break;case "browserHeight":e="bh";break;case "connectionType":e="ct";break;case "homepage":e="hp";break;case "events":s&&
(g+=(""!=g?",":"")+s);if(r)for(m=g.split(","),g="",f=0;f<m.length;f++)p=m[f],k=p.indexOf("="),0<=k&&(p=p.substring(0,k)),k=p.indexOf(":"),0<=k&&(p=p.substring(0,k)),0<=r.indexOf(","+p+",")&&(g+=(g?",":"")+m[f]);break;case "events2":g="";break;case "contextData":c+=a.r("c",a[e],n,e);g="";break;case "lightProfileID":e="mtp";break;case "lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case "lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case "retrieveLightProfiles":e="mtsr";break;
case "deleteLightProfiles":e="mtsd";break;case "retrieveLightData":a.retrieveLightProfiles&&(c+=a.r("mts",a[e],n,e));g="";break;default:a.Ha(m)&&("prop"==f?e="c"+m:"eVar"==f?e="v"+m:"list"==f?e="l"+m:"hier"==f&&(e="h"+m,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if("undefined"!=""+a.Mb||"undefined"!=""+a.Cb&&"HTML"!=(""+a.Cb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==
b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Da=function(a){var b=a.href?a.href:"",d,f,e;d=b.indexOf(":");f=b.indexOf("?");e=b.indexOf("/");b&&(0>d||0<=f&&d>f||0<=e&&d>e)&&(f=a.protocol&&1<a.protocol.length?a.protocol:l.protocol?l.protocol:"",d=l.pathname.lastIndexOf("/"),b=(f?f+"//":"")+(a.host?a.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>d?0:d)+"/":"")+b);return b};a.L=function(c){var b=a.D(c),
d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Da(c),e)?{id:e.substring(0,100),type:g}:0};a.Kb=function(c){for(var b=a.D(c),d=a.L(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=
a.D(c),d=a.L(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Bb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,m;a.na=1;d||(a.na=0,d=a.clickObject);if(d){c=a.D(d);for(b=a.L(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.D(d),b=a.L(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var p=d.onclick?""+d.onclick:"";if(0<=p.indexOf(".tl(")||0<=p.indexOf(".trackLink("))d=0}}else a.na=1;!e&&d&&
(e=a.Da(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var n=0,r=0,q;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(p=e.toLowerCase(),g=p.indexOf("?"),m=p.indexOf("#"),0<=g?0<=m&&m<g&&(g=m):g=m,0<=g&&(p=p.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),m=0;m<g.length;m++)(q=g[m])&&p.substring(p.length-(q.length+1))=="."+q&&(f="d");if(a.trackExternalLinks&&!f&&(p=e.toLowerCase(),a.Ga(p)&&(a.linkInternalFilters||(a.linkInternalFilters=
k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),n=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(m=0;m<g.length;m++)q=g[m],0<=p.indexOf(q)&&(r=1);r?n&&(f="e"):n||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=k.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+
(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:"")))};a.tb=function(){var c=a.na,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var b={},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):0,m,p,k,e=0;if(g)for(m=0;m<g.length;m++)p=g[m].split("="),f=a.unescape(p[0]).split(","),
p=a.unescape(p[1]),b[p]=f;f=a.account.split(",");m={};for(k in a.contextData)k&&!Object.prototype[k]&&"a.activitymap."==k.substring(0,14)&&(m[k]=a.contextData[k],a.contextData[k]="");a.e=a.r("c",m)+(a.e?a.e:"");if(c||a.e){c&&!a.e&&(e=1);for(p in b)if(!Object.prototype[p])for(k=0;k<f.length;k++)for(e&&(g=b[p].join(","),g==a.account&&(a.e+=("&"!=p.charAt(0)?"&":"")+p,b[p]=[],d=1)),m=0;m<b[p].length;m++)g=b[p][m],g==f[k]&&(e&&(a.e+="&u="+a.escape(g)+("&"!=p.charAt(0)?"&":"")+p+"&u=0"),b[p].splice(m,
1),d=1);c||(d=1);if(d){e="";m=2;!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),m=1);for(p in b)!Object.prototype[p]&&0<m&&0<b[p].length&&(e+=(e?"&":"")+a.escape(b[p].join(","))+"="+a.escape(p),m--);a.cookieWrite("s_sq",e)}}}return c};a.ub=function(){if(!a.Fb){var c=new Date,b=r.location,d,f,e=f=d="",g="",m="",k="1.2",n=a.cookieWrite("s_cc","true",0)?"Y":"N",q="",s="";if(c.setUTCDate&&(k="1.3",(0).toPrecision&&(k="1.5",c=[],c.forEach))){k="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(k="1.7",
c.reduce&&(k="1.8",k.trim&&(k="1.8.1",Date.parse&&(k="1.8.2",Object.create&&(k="1.8.5")))))}catch(t){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;m=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),q=a.b.Lb(b)?"Y":"N"}catch(u){}try{a.b.addBehavior("#default#clientCaps"),s=a.b.connectionType}catch(x){}a.resolution=
d;a.colorDepth=f;a.javascriptVersion=k;a.javaEnabled=e;a.cookiesEnabled=n;a.browserWidth=g;a.browserHeight=m;a.connectionType=s;a.homepage=q;a.Fb=1}};a.P={};a.loadModule=function(c,b){var d=a.P[c];if(!d){d=k["AppMeasurement_Module_"+c]?new k["AppMeasurement_Module_"+c](a):{};a.P[c]=a[c]=d;d.Xa=function(){return d.ab};d.bb=function(b){if(d.ab=b)a[c+"_onLoad"]=b,a.ha(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.Xa,set:d.bb}):d._olc=1}catch(f){d._olc=
1}}b&&(a[c+"_onLoad"]=b,a.ha(c+"_onLoad",[a,d],1)||b(a,d))};a.p=function(c){var b,d;for(b in a.P)if(!Object.prototype[b]&&(d=a.P[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.wb=function(){var c=Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1E4>v)return 0}return 1};a.Q=
function(c,b){var d,f,e,g,m,k;for(d=0;2>d;d++)for(f=0<d?a.wa:a.g,e=0;e<f.length;e++)if(g=f[e],(m=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(k in a[g])m[k]||(m[k]=a[g][k]);a[g]=m}};a.Qa=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.wa:a.g,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)};a.ob=function(a){var b,d,f,e,g,k=0,p,n="",q="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(p=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==
e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?k=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(k=",p,ei,"),k&&p)))){if((a=p.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),0<d&&0<=k.indexOf(","+e.substring(0,d)+",")?n+=(n?"&":"")+e:q+=(q?"&":"")+e;n&&q?p=n+"&"+q:q=""}d=253-(p.length-q.length)-b.length;a=b+(0<d?g.substring(0,d):"")+"?"+p}return a};
a.Wa=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.da=!1;a.I=!1;a.eb=function(){a.I=!0;a.j()};a.ba=!1;a.U=!1;a.$a=function(c){a.marketingCloudVisitorID=c;a.U=!0;a.j()};a.ea=!1;a.V=!1;a.fb=function(c){a.visitorOptedOut=c;a.V=!0;a.j()};a.Y=!1;
a.R=!1;a.Sa=function(c){a.analyticsVisitorID=c;a.R=!0;a.j()};a.aa=!1;a.T=!1;a.Ua=function(c){a.audienceManagerLocationHint=c;a.T=!0;a.j()};a.Z=!1;a.S=!1;a.Ta=function(c){a.audienceManagerBlob=c;a.S=!0;a.j()};a.Va=function(c){a.maxDelay||(a.maxDelay=250);return a.p("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.ca=!1;a.H=!1;a.va=function(){a.H=!0;a.j()};a.isReadyToTrack=function(){var c=!0,b=a.visitor,d,f,e;a.da||a.I||(a.Wa(a.eb)?a.I=!0:a.da=!0);if(a.da&&!a.I)return!1;b&&b.isAllowed()&&
(a.ba||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.ba=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.$a]),a.marketingCloudVisitorID&&(a.U=!0)),a.ea||a.visitorOptedOut||!b.isOptedOut||(a.ea=!0,a.visitorOptedOut=b.isOptedOut([a,a.fb]),a.visitorOptedOut!=q&&(a.V=!0)),a.Y||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.Y=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Sa]),a.analyticsVisitorID&&(a.R=!0)),a.aa||a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||
(a.aa=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Ua]),a.audienceManagerLocationHint&&(a.T=!0)),a.Z||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.Z=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ta]),a.audienceManagerBlob&&(a.S=!0)),c=a.ba&&!a.U&&!a.marketingCloudVisitorID,b=a.Y&&!a.R&&!a.analyticsVisitorID,d=a.aa&&!a.T&&!a.audienceManagerLocationHint,f=a.Z&&!a.S&&!a.audienceManagerBlob,e=a.ea&&!a.V,c=c||b||d||f||e?!1:!0);a.ca||a.H||(a.Va(a.va)?a.H=!0:a.ca=
!0);a.ca&&!a.H&&(c=!1);return c};a.o=q;a.u=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.jb=c;f.ib=b;f.gb=d;a.o==q&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.cb(),a.o!=q))for(;0<a.o.length;)c=a.o.shift(),c.ib.apply(c.jb,c.gb)};a.cb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.Ya=function(c){var b,d,f=q,e=q;if(!a.isReadyToTrack()){b=[];if(c!=q)for(d in f={},c)f[d]=c[d];e={};a.Qa(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,
a.track,b);return!0}return!1};a.qb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/108E5)%10+Math.floor(1E13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+
"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&(a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState()),!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0)));a.p("_s");a.Ya(c)||(b&&a.Q(b),c&&(d={},a.Qa(d,0),a.Q(c)),a.wb()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=
a.qb()),a.Bb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1E3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Ra||(a.referrer=r.document.referrer),a.Ra=1,a.referrer=a.ob(a.referrer),a.p("_g")),a.tb()&&!a.abort&&(a.ub(),g+=a.sb(),a.Ab(e,g),a.p("_t"),a.referrer=""))),c&&a.Q(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=
a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=c;a.linkType=b;a.linkName=d;e&&(a.l=c,a.A=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],"prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==
b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)a[b]=void 0};a.tagContainerMarker="";a.Ab=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",k=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(k||(k=a.account,f=k.indexOf(","),0<=f&&(k=k.substring(0,f)),k=k.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=k+"."+e+"."+g+d);d=a.ssl?
"https://":"http://";e=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.Eb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+b+"&AQE=1";a.mb(d);a.ja()};a.Pa=/{(%?)(.*?)(%?)}/;a.Ib=RegExp(a.Pa.source,"g");a.nb=function(c){if("object"==typeof c.dests)for(var b=0;b<c.dests.length;++b)if(o=c.dests[b],"string"==
typeof o.c&&"aa."==o.id.substr(0,3))for(var d=o.c.match(a.Ib),b=0;b<d.length;++b){match=d[b];var f=match.match(a.Pa),e="";"%"==f[1]&&"timezone_offset"==f[2]?e=(new Date).getTimezoneOffset():"%"==f[1]&&"timestampz"==f[2]&&(e=a.rb());o.c=o.c.replace(match,a.escape(e))}};a.rb=function(){var c=new Date,b=new Date(6E4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+"-"+a.k(2,c.getMonth()+1)+"-"+a.k(2,c.getDate())+"T"+a.k(2,c.getHours())+":"+a.k(2,c.getMinutes())+":"+a.k(2,c.getSeconds())+
(0<c.getTimezoneOffset()?"-":"+")+a.k(2,b.getUTCHours())+":"+a.k(2,b.getUTCMinutes())};a.k=function(a,b){return(Array(a+1).join(0)+b).slice(-a)};a.ra={};a.doPostbacks=function(c){if("object"==typeof c)if(a.nb(c),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if("object"==typeof c&&"object"==typeof c.dests)for(var b=0;b<c.dests.length;++b)dest=
c.dests[b],"object"==typeof dest&&"string"==typeof dest.c&&"string"==typeof dest.id&&"aa."==dest.id.substr(0,3)&&(a.ra[dest.id]=new Image,a.ra[dest.id].alt="",a.ra[dest.id].src=dest.c)};a.mb=function(c){a.i||a.vb();a.i.push(c);a.la=a.C();a.Na()};a.vb=function(){a.i=a.xb();a.i||(a.i=[])};a.xb=function(){var c,b;if(a.qa()){try{(b=k.localStorage.getItem(a.oa()))&&(c=k.JSON.parse(b))}catch(d){}return c}};a.qa=function(){var c=!0;a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1);return c};
a.Ea=function(){var c=0;a.i&&(c=a.i.length);a.q&&c++;return c};a.ja=function(){if(a.q&&(a.B&&a.B.complete&&a.B.F&&a.B.ua(),a.q))return;a.Fa=q;if(a.pa)a.la>a.N&&a.La(a.i),a.ta(500);else{var c=a.hb();if(0<c)a.ta(c);else if(c=a.Ba())a.q=1,a.zb(c),a.Db(c)}};a.ta=function(c){a.Fa||(c||(c=0),a.Fa=setTimeout(a.ja,c))};a.hb=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.C()-a.Ka;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.Ba=function(){if(0<a.i.length)return a.i.shift()};
a.zb=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+="\n\t"+a.unescape(c[d]);a.yb(b)}};a.Za=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.X=!1;var s;try{s=JSON.parse('{"x":"y"}')}catch(x){s=null}s&&"y"==s.x?(a.X=!0,a.W=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.W=function(a){return k.$.parseJSON(a)},a.X=!0):a.W=function(){return null};a.Db=function(c){var b,d,f;a.Za()&&2047<c.length&&("undefined"!=
typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest,d=2),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.X?b.xa=!0:b=0));!b&&a.Oa&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",
b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="",b.abort||"undefined"===typeof k.InstallTrigger||(b.abort=function(){b.src=q}));b.za=function(){try{b.F&&(clearTimeout(b.F),b.F=0)}catch(a){}};b.onload=b.ua=function(){b.za();a.lb();a.fa();a.q=0;a.ja();if(b.xa){b.xa=!1;try{a.doPostbacks(a.W(b.responseText))}catch(c){}}};b.onabort=b.onerror=b.Ca=function(){b.za();(a.trackOffline||a.pa)&&a.q&&a.i.unshift(a.kb);a.q=0;a.la>a.N&&a.La(a.i);a.fa();a.ta(500)};b.onreadystatechange=function(){4==
b.readyState&&(200==b.status?b.ua():b.Ca())};a.Ka=a.C();if(1==d||2==d){var e=c.indexOf("?");f=c.substring(0,e);e=c.substring(e+1);e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Ia)try{f.removeChild(a.Ia)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Ia=a.B}b.F=setTimeout(function(){b.F&&(b.complete?b.ua():(a.trackOffline&&b.abort&&b.abort(),b.Ca()))},5E3);a.kb=c;a.B=k["s_i_"+
a.replace(a.account,",","_")]=b;if(a.useForcedLinkTracking&&a.J||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.ga=setTimeout(a.fa,a.forcedLinkTrackingTimeout)};a.lb=function(){if(a.qa()&&!(a.Ja>a.N))try{k.localStorage.removeItem(a.oa()),a.Ja=a.C()}catch(c){}};a.La=function(c){if(a.qa()){a.Na();try{k.localStorage.setItem(a.oa(),k.JSON.stringify(c)),a.N=a.C()}catch(b){}}};a.Na=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>
a.offlineLimit;)a.Ba()}};a.forceOffline=function(){a.pa=!0};a.forceOnline=function(){a.pa=!1};a.oa=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.Ga=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.Eb=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.Q(d);if(d.lmq)for(b=
0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,
getQueryParam:function(c,b,d){var f;b||(b=a.pageURL?a.pageURL:k.location);d||(d="&");return c&&b&&(b=""+b,f=b.indexOf("?"),0<=f&&(b=d+b.substring(f+1)+d,f=b.indexOf(d+c+"="),0<=f&&(b=b.substring(f+d.length+c.length+1),f=b.indexOf(d),0<=f&&(b=b.substring(0,f)),0<b.length)))?a.unescape(b):""}};a.G="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");
a.g=a.G.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.ma="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.O=a.ma.slice(0);a.wa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks AudienceManagement".split(" ");
for(n=0;250>=n;n++)76>n&&(a.g.push("prop"+n),a.O.push("prop"+n)),a.g.push("eVar"+n),a.O.push("eVar"+n),6>n&&a.g.push("hier"+n),4>n&&a.g.push("list"+n);n="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest".split(" ");a.g=a.g.concat(n);a.G=a.G.concat(n);a.ssl=0<=k.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=0;a.offlineFilename=
"AppMeasurement.offline";a.Ka=0;a.la=0;a.N=0;a.Ja=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=k;a.d=k.document;try{if(a.Oa=!1,navigator){var y=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName||0<=y.indexOf("MSIE ")||0<=y.indexOf("Trident/")&&0<=y.indexOf("Windows NT 6"))a.Oa=!0}}catch(z){}a.fa=function(){a.ga&&(k.clearTimeout(a.ga),a.ga=q);a.l&&a.J&&a.l.dispatchEvent(a.J);a.A&&("function"==typeof a.A?a.A():a.l&&a.l.href&&(a.d.location=
a.l.href));a.l=a.J=a.A=0};a.Ma=function(){a.b=a.d.body;a.b?(a.v=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.ya)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.v,!1);else{a.b.removeEventListener("click",a.v,!0);a.ya=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.M&&a.M==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=
0;else{var m=a.M=a.clickObject;a.ka&&(clearTimeout(a.ka),a.ka=0);a.ka=setTimeout(function(){a.M==m&&(a.M=0)},1E4);f=a.Ea();a.track();if(f<a.Ea()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.Ga(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||k.name&&d==k.name))){try{b=a.d.createEvent("MouseEvents")}catch(n){b=new k.MouseEvent}if(b){try{b.initMouseEvent("click",
c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(q){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.l=c.target,a.J=b)}}}}}catch(r){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&
k.MouseEvent)&&(a.ya=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.v,!0)),a.b.addEventListener("click",a.v,!1))):setTimeout(a.Ma,30)};a.Ma();a.loadModule("ActivityMap")}
function s_gi(a){var k,q=window.s_c_il,r,n,t=a.split(","),u,s,x=0;if(q)for(r=0;!x&&r<q.length;){k=q[r];if("s_c"==k._c&&(k.account||k.oun))if(k.account&&k.account==a)x=1;else for(n=k.account?k.account:k.oun,n=k.allAccounts?k.allAccounts:n.split(","),u=0;u<t.length;u++)for(s=0;s<n.length;s++)t[u]==n[s]&&(x=1);r++}x||(k=new AppMeasurement);k.setAccount?k.setAccount(a):k.sa&&k.sa(a);return k}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);
function s_pgicq(){var a=window,k=a.s_giq,q,r,n;if(k)for(q=0;q<k.length;q++)r=k[q],n=s_gi(r.oun),n.setAccount(r.un),n.setTagContainer(r.tagContainerName);a.s_giq=0}s_pgicq();
/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============

 Adobe Visitor API for JavaScript version: 1.5.4
 Copyright 1996-2015 Adobe, Inc. All Rights Reserved
 More info available at http://www.omniture.com
*/
function Visitor(m,t){if(!m)throw"Visitor requires Adobe Marketing Cloud Org ID";var a=this;a.version="1.5.4";var l=window,i=l.Visitor;i.version=a.version;l.s_c_in||(l.s_c_il=[],l.s_c_in=0);a._c="Visitor";a._il=l.s_c_il;a._in=l.s_c_in;a._il[a._in]=a;l.s_c_in++;a.pa={Ka:[]};var o=l.document,h=i.Ma;h||(h=null);var z=i.Na;z||(z=void 0);var j=i.ja;j||(j=!0);var k=i.La;k||(k=!1);a.S=function(a){var c=0,b,e;if(a)for(b=0;b<a.length;b++)e=a.charCodeAt(b),c=(c<<5)-c+e,c&=c;return c};a.r=function(a){var c=
"0123456789",b="",e="",f,g=8,n=10,h=10;if(1==a){c+="ABCDEF";for(a=0;16>a;a++)f=Math.floor(Math.random()*g),b+=c.substring(f,f+1),f=Math.floor(Math.random()*g),e+=c.substring(f,f+1),g=16;return b+"-"+e}for(a=0;19>a;a++)f=Math.floor(Math.random()*n),b+=c.substring(f,f+1),0==a&&9==f?n=3:(1==a||2==a)&&10!=n&&2>f?n=10:2<a&&(n=10),f=Math.floor(Math.random()*h),e+=c.substring(f,f+1),0==a&&9==f?h=3:(1==a||2==a)&&10!=h&&2>f?h=10:2<a&&(h=10);return b+e};a.ma=function(){var a;!a&&l.location&&(a=l.location.hostname);
if(a)if(/^[0-9.]+$/.test(a))a="";else{var c=a.split("."),b=c.length-1,e=b-1;1<b&&2>=c[b].length&&(2==c[b-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,".indexOf(","+
c[b]+","))&&e--;if(0<e)for(a="";b>=e;)a=c[b]+(a?".":"")+a,b--}return a};a.cookieRead=function(a){var a=encodeURIComponent(a),c=(";"+o.cookie).split(" ").join(";"),b=c.indexOf(";"+a+"="),e=0>b?b:c.indexOf(";",b+1);return 0>b?"":decodeURIComponent(c.substring(b+2+a.length,0>e?c.length:e))};a.cookieWrite=function(d,c,b){var e=a.cookieLifetime,f,c=""+c,e=e?(""+e).toUpperCase():"";b&&"SESSION"!=e&&"NONE"!=e?(f=""!=c?parseInt(e?e:0,10):-60)?(b=new Date,b.setTime(b.getTime()+1E3*f)):1==b&&(b=new Date,f=
b.getYear(),b.setYear(f+2+(1900>f?1900:0))):b=0;return d&&"NONE"!=e?(o.cookie=encodeURIComponent(d)+"="+encodeURIComponent(c)+"; path=/;"+(b?" expires="+b.toGMTString()+";":"")+(a.cookieDomain?" domain="+a.cookieDomain+";":""),a.cookieRead(d)==c):0};a.g=h;a.A=function(a,c){try{"function"==typeof a?a.apply(l,c):a[1].apply(a[0],c)}catch(b){}};a.ra=function(d,c){c&&(a.g==h&&(a.g={}),a.g[d]==z&&(a.g[d]=[]),a.g[d].push(c))};a.m=function(d,c){if(a.g!=h){var b=a.g[d];if(b)for(;0<b.length;)a.A(b.shift(),
c)}};a.j=h;a.oa=function(d,c,b){var e=0,f=0,g;if(c&&o){for(g=0;!e&&2>g;){try{e=(e=o.getElementsByTagName(0<g?"HEAD":"head"))&&0<e.length?e[0]:0}catch(n){e=0}g++}if(!e)try{o.body&&(e=o.body)}catch(j){e=0}if(e)for(g=0;!f&&2>g;){try{f=o.createElement(0<g?"SCRIPT":"script")}catch(i){f=0}g++}}!c||!e||!f?b&&b():(f.type="text/javascript",f.setAttribute("async","async"),f.src=c,e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f),a.pa.Ka.push(c),b&&(a.j==h&&(a.j={}),a.j[d]=setTimeout(b,a.loadTimeout)))};
a.ka=function(d){a.j!=h&&a.j[d]&&(clearTimeout(a.j[d]),a.j[d]=0)};a.T=k;a.U=k;a.isAllowed=function(){if(!a.T&&(a.T=j,a.cookieRead(a.cookieName)||a.cookieWrite(a.cookieName,"T",1)))a.U=j;return a.U};a.a=h;a.d=h;var B=i.$a;B||(B="MC");var r=i.fb;r||(r="MCMID");var C=i.ab;C||(C="MCCIDH");var D=i.eb;D||(D="MCSYNCS");var F=i.bb;F||(F="MCIDTS");var x=i.cb;x||(x="MCOPTOUT");var A=i.Ya;A||(A="A");var p=i.Va;p||(p="MCAID");var y=i.Za;y||(y="AAM");var w=i.Xa;w||(w="MCAAMLH");var q=i.Wa;q||(q="MCAAMB");var s=
i.gb;s||(s="NONE");a.C=0;a.R=function(){if(!a.C){var d=a.version;a.audienceManagerServer&&(d+="|"+a.audienceManagerServer);a.audienceManagerServerSecure&&(d+="|"+a.audienceManagerServerSecure);a.C=a.S(d)}return a.C};a.V=k;a.f=function(){if(!a.V){a.V=j;var d=a.R(),c=k,b=a.cookieRead(a.cookieName),e,f,g,n,i=new Date;a.a==h&&(a.a={});if(b&&"T"!=b){b=b.split("|");b[0].match(/^[\-0-9]+$/)&&(parseInt(b[0],10)!=d&&(c=j),b.shift());1==b.length%2&&b.pop();for(d=0;d<b.length;d+=2)if(e=b[d].split("-"),f=e[0],
g=b[d+1],1<e.length?(n=parseInt(e[1],10),e=0<e[1].indexOf("s")):(n=0,e=k),c&&(f==C&&(g=""),0<n&&(n=i.getTime()/1E3-60)),f&&g&&(a.c(f,g,1),0<n&&(a.a["expire"+f]=n+(e?"s":""),i.getTime()>=1E3*n||e&&!a.cookieRead(a.sessionCookieName))))a.d||(a.d={}),a.d[f]=j}if(!a.b(p)&&(b=a.cookieRead("s_vi")))b=b.split("|"),1<b.length&&0<=b[0].indexOf("v1")&&(g=b[1],d=g.indexOf("["),0<=d&&(g=g.substring(0,d)),g&&g.match(/^[0-9a-fA-F\-]+$/)&&a.c(p,g))}};a.ta=function(){var d=a.R(),c,b;for(c in a.a)!Object.prototype[c]&&
a.a[c]&&"expire"!=c.substring(0,6)&&(b=a.a[c],d+=(d?"|":"")+c+(a.a["expire"+c]?"-"+a.a["expire"+c]:"")+"|"+b);a.cookieWrite(a.cookieName,d,1)};a.b=function(d,c){return a.a!=h&&(c||!a.d||!a.d[d])?a.a[d]:h};a.c=function(d,c,b){a.a==h&&(a.a={});a.a[d]=c;b||a.ta()};a.na=function(d,c){var b=a.b(d,c);return b?b.split("*"):h};a.sa=function(d,c,b){a.c(d,c?c.join("*"):"",b)};a.Sa=function(d,c){var b=a.na(d,c);if(b){var e={},f;for(f=0;f<b.length;f+=2)e[b[f]]=b[f+1];return e}return h};a.Ua=function(d,c,b){var e=
h,f;if(c)for(f in e=[],c)Object.prototype[f]||(e.push(f),e.push(c[f]));a.sa(d,e,b)};a.k=function(d,c,b){var e=new Date;e.setTime(e.getTime()+1E3*c);a.a==h&&(a.a={});a.a["expire"+d]=Math.floor(e.getTime()/1E3)+(b?"s":"");0>c?(a.d||(a.d={}),a.d[d]=j):a.d&&(a.d[d]=k);b&&(a.cookieRead(a.sessionCookieName)||a.cookieWrite(a.sessionCookieName,"1"))};a.Q=function(a){if(a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=
s)),!a||a!=s&&!a.match(/^[0-9a-fA-F\-]+$/)))a="";return a};a.i=function(d,c){a.ka(d);a.h!=h&&(a.h[d]=k);if(d==B){var b=a.b(r);if(!b){b="object"==typeof c&&c.mid?c.mid:a.Q(c);if(!b){if(a.v){a.getAnalyticsVisitorID(h,k,j);return}b=a.r()}a.c(r,b)}if(!b||b==s)b="";"object"==typeof c&&((c.d_region||c.dcs_region||c.d_blob||c.blob)&&a.i(y,c),a.v&&c.mid&&a.i(A,{id:c.id}));a.m(r,[b])}if(d==y&&"object"==typeof c){b=604800;c.id_sync_ttl!=z&&c.id_sync_ttl&&(b=parseInt(c.id_sync_ttl,10));var e=a.b(w);e||((e=c.d_region)||
(e=c.dcs_region),e&&(a.k(w,b),a.c(w,e)));e||(e="");a.m(w,[e]);e=a.b(q);if(c.d_blob||c.blob)(e=c.d_blob)||(e=c.blob),a.k(q,b),a.c(q,e);e||(e="");a.m(q,[e]);!c.error_msg&&a.t&&a.c(C,a.t)}if(d==A){b=a.b(p);b||((b=a.Q(c))?a.k(q,-1):b=s,a.c(p,b));if(!b||b==s)b="";a.m(p,[b])}a.idSyncDisableSyncs?u.ba=j:(u.ba=k,b={},b.ibs=c.ibs,b.subdomain=c.subdomain,u.Ia(b));c===Object(c)&&(b=s,c.d_optout&&c.d_optout instanceof Array&&(b=c.d_optout.join(",")),e=parseInt(c.d_ottl,10),isNaN(e)&&(e=7200),a.k(x,e,!0),a.c(x,
b),a.m(x,[b]))};a.h=h;a.n=function(d,c,b,e){var f="",g;if(a.isAllowed()&&(a.f(),f=a.b(d),!f&&(d==r||d==x?g=B:d==w||d==q?g=y:d==p&&(g=A),g))){if(c&&(a.h==h||!a.h[g]))a.h==h&&(a.h={}),a.h[g]=j,a.oa(g,c,function(){if(!a.b(d)){var b="";d==r?b=a.r():g==y&&(b={error_msg:"timeout"});a.i(g,b)}});a.ra(d,b);c||a.i(g,{id:s});return""}if((d==r||d==p)&&f==s)f="",e=j;b&&e&&a.A(b,[f]);return f};a._setMarketingCloudFields=function(d){a.f();a.i(B,d)};a.setMarketingCloudVisitorID=function(d){a._setMarketingCloudFields(d)};
a.v=k;a.getMarketingCloudVisitorID=function(d,c){if(a.isAllowed()){a.marketingCloudServer&&0>a.marketingCloudServer.indexOf(".demdex.net")&&(a.v=j);var b=a.s("_setMarketingCloudFields");return a.n(r,b,d,c)}return""};a.qa=function(){a.getAudienceManagerBlob()};i.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2};a.q={};a.P=k;a.t="";a.setCustomerIDs=function(d){if(a.isAllowed()&&d){a.f();var c,b;for(c in d)if(!Object.prototype[c]&&(b=d[c]))if("object"==typeof b){var e={};b.id&&(e.id=b.id);b.authState!=
z&&(e.authState=b.authState);a.q[c]=e}else a.q[c]={id:b};var d=a.getCustomerIDs(),e=a.b(C),f="";e||(e=0);for(c in d)Object.prototype[c]||(b=d[c],f+=(f?"|":"")+c+"|"+(b.id?b.id:"")+(b.authState?b.authState:""));a.t=a.S(f);a.t!=e&&(a.P=j,a.qa())}};a.getCustomerIDs=function(){a.f();var d={},c,b;for(c in a.q)Object.prototype[c]||(b=a.q[c],d[c]||(d[c]={}),b.id&&(d[c].id=b.id),d[c].authState=b.authState!=z?b.authState:i.AuthState.UNKNOWN);return d};a._setAnalyticsFields=function(d){a.f();a.i(A,d)};a.setAnalyticsVisitorID=
function(d){a._setAnalyticsFields(d)};a.getAnalyticsVisitorID=function(d,c,b){if(a.isAllowed()){var e="";b||(e=a.getMarketingCloudVisitorID(function(){a.getAnalyticsVisitorID(d,j)}));if(e||b){var f=b?a.marketingCloudServer:a.trackingServer,g="";a.loadSSL&&(b?a.marketingCloudServerSecure&&(f=a.marketingCloudServerSecure):a.trackingServerSecure&&(f=a.trackingServerSecure));f&&(g="http"+(a.loadSSL?"s":"")+"://"+f+"/id?d_visid_ver="+a.version+"&callback=s_c_il%5B"+a._in+"%5D._set"+(b?"MarketingCloud":
"Analytics")+"Fields&mcorgid="+encodeURIComponent(a.marketingCloudOrgID)+(e?"&mid="+e:"")+(a.idSyncDisable3rdPartySyncing?"&d_coppa=true":""));return a.n(b?r:p,g,d,c)}}return""};a._setAudienceManagerFields=function(d){a.f();a.i(y,d)};a.s=function(d){var c=a.audienceManagerServer,b="",e=a.b(r),f=a.b(q,j),g=a.b(p),g=g&&g!=s?"&d_cid_ic=AVID%01"+encodeURIComponent(g):"";a.loadSSL&&a.audienceManagerServerSecure&&(c=a.audienceManagerServerSecure);if(c){var b=a.getCustomerIDs(),h,i;if(b)for(h in b)Object.prototype[h]||
(i=b[h],g+="&d_cid_ic="+encodeURIComponent(h)+"%01"+encodeURIComponent(i.id?i.id:"")+(i.authState?"%01"+i.authState:""));d||(d="_setAudienceManagerFields");b="http"+(a.loadSSL?"s":"")+"://"+c+"/id?d_visid_ver="+a.version+"&d_rtbd=json&d_ver=2"+(!e&&a.v?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(a.marketingCloudOrgID)+"&d_nsid="+(a.idSyncContainerID||0)+(e?"&d_mid="+e:"")+(a.idSyncDisable3rdPartySyncing?"&d_coppa=true":"")+(f?"&d_blob="+encodeURIComponent(f):"")+g+"&d_cb=s_c_il%5B"+a._in+"%5D."+
d}return b};a.getAudienceManagerLocationHint=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerLocationHint(d,j)})){var b=a.b(p);b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerLocationHint(d,j)}));if(b)return b=a.s(),a.n(w,b,d,c)}return""};a.getAudienceManagerBlob=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerBlob(d,j)})){var b=a.b(p);b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerBlob(d,
j)}));if(b)return b=a.s(),a.P&&a.k(q,-1),a.n(q,b,d,c)}return""};a.o="";a.u={};a.D="";a.F={};a.getSupplementalDataID=function(d,c){!a.o&&!c&&(a.o=a.r(1));var b=a.o;a.D&&!a.F[d]?(b=a.D,a.F[d]=j):b&&(a.u[d]&&(a.D=a.o,a.F=a.u,a.o=b=!c?a.r(1):"",a.u={}),b&&(a.u[d]=j));return b};i.OptOut={GLOBAL:"global"};a.getOptOut=function(d,c){if(a.isAllowed()){var b=a.s("_setMarketingCloudFields");return a.n(x,b,d,c)}return""};a.isOptedOut=function(d,c,b){return a.isAllowed()?(c||(c=i.OptOut.GLOBAL),(b=a.getOptOut(function(b){a.A(d,
[b==i.OptOut.GLOBAL||0<=b.indexOf(c)])},b))?b==i.OptOut.GLOBAL||0<=b.indexOf(c):h):k};var v={l:!!l.postMessage,ha:1,O:864E5};a.Oa=v;a.X={postMessage:function(a,c,b){var e=1;c&&(v.l?b.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(b.location=c.replace(/#.*$/,"")+"#"+ +new Date+e++ +"&"+a))},K:function(a,c){var b;try{if(v.l)if(a&&(b=function(b){if("string"===typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin))return!1;a(b)}),window.addEventListener)window[a?
"addEventListener":"removeEventListener"]("message",b,!1);else window[a?"attachEvent":"detachEvent"]("onmessage",b)}catch(e){}}};var G={Y:function(){if(o.addEventListener)return function(a,c,b){a.addEventListener(c,function(a){"function"===typeof b&&b(a)},k)};if(o.attachEvent)return function(a,c,b){a.attachEvent("on"+c,function(a){"function"===typeof b&&b(a)})}}(),map:function(a,c){if(Array.prototype.map)return a.map(c);if(void 0===a||a===h)throw new TypeError;var b=Object(a),e=b.length>>>0;if("function"!==
typeof c)throw new TypeError;for(var f=Array(e),g=0;g<e;g++)g in b&&(f[g]=c.call(c,b[g],g,b));return f},za:function(a,c){return this.map(a,function(a){return encodeURIComponent(a)}).join(c)}};a.Ta=G;var u={ia:3E4,N:649,fa:k,id:h,I:h,aa:function(a){if("string"===typeof a)return a=a.split("/"),a[0]+"//"+a[2]},e:h,url:h,Aa:function(){var d="http://fast.",c="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(o.location.href);this.e||(this.e="nosubdomainreturned");a.loadSSL&&(d=a.idSyncSSLUseAkamai?
"https://fast.":"https://");d=d+this.e+".demdex.net/dest5.html"+c;this.I=this.aa(d);this.id="destination_publishing_iframe_"+this.e+"_"+a.idSyncContainerID;return d},va:function(){var d="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(o.location.href);"string"===typeof a.B&&a.B.length&&(this.id="destination_publishing_iframe_"+(new Date).getTime()+"_"+a.idSyncContainerID,this.I=this.aa(a.B),this.url=a.B+d)},ba:h,H:k,M:k,w:h,hb:h,Ga:h,ib:h,L:k,z:[],Ea:[],Fa:[],ca:v.l?15:100,J:[],Ca:[],$:j,da:k,
Z:function(){function a(){e=document.createElement("iframe");e.id=b.id;e.style.cssText="display: none; width: 0; height: 0;";e.src=b.url;b.Ga=j;c();document.body.appendChild(e)}function c(){G.Y(e,"load",function(){e.className="aamIframeLoaded";b.w=j;b.p()})}this.M=j;var b=this,e=document.getElementById(this.id);e?"IFRAME"!==e.nodeName?(this.id+="_2",a()):"aamIframeLoaded"!==e.className?c():(this.w=j,this.p()):a();this.Ba=e},p:function(d){var c=this;d===Object(d)&&this.J.push(d);if((this.da||!v.l||
this.w)&&this.J.length)this.Ha(this.J.shift()),this.p();!a.idSyncDisableSyncs&&this.w&&this.z.length&&!this.L&&(this.fa||(this.fa=j,setTimeout(function(){c.ca=v.l?15:150},this.ia)),this.L=j,this.ea())},Ha:function(a){var c=encodeURIComponent,b,e,f,g,h;if((b=a.ibs)&&b instanceof Array&&(e=b.length))for(f=0;f<e;f++)g=b[f],h=[c("ibs"),c(g.id||""),c(g.tag||""),G.za(g.url||[],","),c(g.ttl||""),"","",g.fireURLSync?"true":"false"],this.$?this.G(h.join("|")):g.fireURLSync&&this.wa(g,h.join("|"));this.Ca.push(a)},
wa:function(d,c){a.f();var b=a.b(D),e=k,f=k,g=Math.ceil((new Date).getTime()/v.O);if(b){if(b=b.split("*"),f=this.Ja(b,d.id,g),e=f.xa,f=f.ya,!e||!f)this.G(c),b.push(d.id+"-"+(g+Math.ceil(d.ttl/60/24))),this.Da(b),a.c(D,b.join("*"))}else this.G(c),a.c(D,d.id+"-"+(g+Math.ceil(d.ttl/60/24)))},Ja:function(a,c,b){var e=k,f=k,g,h,i;for(h=0;h<a.length;h++)g=a[h],i=parseInt(g.split("-")[1],10),g.match("^"+c+"-")?(e=j,b<i?f=j:(a.splice(h,1),h--)):b>=i&&(a.splice(h,1),h--);return{xa:e,ya:f}},Da:function(a){if(a.join("*").length>
this.N)for(a.sort(function(a,b){return parseInt(a.split("-")[1],10)-parseInt(b.split("-")[1],10)});a.join("*").length>this.N;)a.shift()},G:function(d){var c=encodeURIComponent;this.z.push((a.Qa?c("---destpub-debug---"):c("---destpub---"))+d)},ea:function(){var d=this,c;this.z.length?(c=this.z.shift(),a.X.postMessage(c,this.url,this.Ba.contentWindow),this.Ea.push(c),setTimeout(function(){d.ea()},this.ca)):this.L=k},K:function(a){var c=/^---destpub-to-parent---/;"string"===typeof a&&c.test(a)&&(c=a.replace(c,
"").split("|"),"canSetThirdPartyCookies"===c[0]&&(this.$="true"===c[1]?j:k,this.da=j,this.p()),this.Fa.push(a))},Ia:function(d){this.url===h&&(this.e="string"===typeof a.W&&a.W.length?a.W:d.subdomain||"",this.url=this.Aa());d.ibs instanceof Array&&d.ibs.length&&(this.H=j);if(!a.idSyncDisable3rdPartySyncing&&(this.H||a.la)&&this.e&&"nosubdomainreturned"!==this.e&&!this.M)(i.ga||"complete"===o.readyState||"loaded"===o.readyState)&&this.Z();"function"===typeof a.idSyncIDCallResult?a.idSyncIDCallResult(d):
this.p(d);"function"===typeof a.idSyncAfterIDCallResult&&a.idSyncAfterIDCallResult(d)},ua:function(d,c){return a.Ra||!d||c-d>v.ha}};a.Pa=u;0>m.indexOf("@")&&(m+="@AdobeOrg");a.marketingCloudOrgID=m;a.cookieName="AMCV_"+m;a.sessionCookieName="AMCVS_"+m;a.cookieDomain=a.ma();a.cookieDomain==l.location.hostname&&(a.cookieDomain="");a.loadSSL=0<=l.location.protocol.toLowerCase().indexOf("https");a.loadTimeout=500;a.marketingCloudServer=a.audienceManagerServer="dpm.demdex.net";if(t&&"object"==typeof t){for(var E in t)!Object.prototype[E]&&
(a[E]=t[E]);a.idSyncContainerID=a.idSyncContainerID||0;a.f();E=a.b(F);var H=Math.ceil((new Date).getTime()/v.O);!a.idSyncDisableSyncs&&u.ua(E,H)&&(a.k(q,-1),a.c(F,H));a.getMarketingCloudVisitorID();a.getAudienceManagerLocationHint();a.getAudienceManagerBlob()}if(!a.idSyncDisableSyncs){u.va();G.Y(window,"load",function(){var d=u;i.ga=j;!a.idSyncDisable3rdPartySyncing&&(d.H||a.la)&&d.e&&"nosubdomainreturned"!==d.e&&d.url&&!d.M&&d.Z()});try{a.X.K(function(a){u.K(a.data)},u.I)}catch(I){}}}
Visitor.getInstance=function(m,t){var a,l=window.s_c_il,i;0>m.indexOf("@")&&(m+="@AdobeOrg");if(l)for(i=0;i<l.length;i++)if((a=l[i])&&"Visitor"==a._c&&a.marketingCloudOrgID==m)return a;return new Visitor(m,t)};(function(){function m(){t.ga=a}var t=window.Visitor,a=t.ja;a||(a=!0);window.addEventListener?window.addEventListener("load",m):window.attachEvent&&window.attachEvent("onload",m)})();

</script><script>
/* mbt app measurement config */
/* globals Visitor, visitor, AppMeasurement, $t, s, _satellite, FlashDetect */

$t('register', 'dtm_adobeAppMeasurmentLoaded');

window.s = new AppMeasurement();
/* Link Tracking Config */
s.trackingServer = 'nbcume.sc.omtrdc.net';
s.trackingServerSecure = s.trackingServer;
s.trackDownloadLinks = true;
s.trackExternalLinks = true;
s.trackInlineStats = true;
s.linkDownloadFileTypes = 'exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx';
s.linkLeaveQueryString = true;
s.linkTrackVars = 'None';
s.linkTrackEvents = 'None';
s.linkInternalFilters = 'javascript:,mailto:,nbcnews.com,today.com,msnbc.com,facebook.com/sharrer,twitter.com/intent'; // jshint ignore:line

/* setup visitor API */
window.visitor = new Visitor('A8AB776A5245B4220A490D44@AdobeOrg', { trackingServer: s.trackingServer });
s.visitor = visitor;

//custom added variables
s.continuousView = 0;
s.noValue = 'not available';
s.topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];

//account settings per vertical/brand
s.verticalSettings = {
    today: {
        stageAccount: 'nbcutodaycomdev',
        prodAccount: 'nbcutodaycomprod',
        visitorNamespace: 'nbcuniversal'
    },
    news: {
        stageAccount: 'nbcunbcnewscomdev',
        prodAccount: 'msnbcnbcnewscomprod',
        visitorNamespace: 'msnbc'
    },
    msnbc: {
        stageAccount: 'nbcumsnbccomdev',
        prodAccount: 'msnbcdotcom',
        visitorNamespace: 'msnbc'
    }
};

(function applyVerticalSettings() {
    // default to news
    var brand = 'news';
    var isStaging = document.location.hostname.match(/([a-z0-9])+[^.]/)[0] === 'staging';

    if (s.topLevelDomain === 'today.com') {
        //getting brand from URL for now for today
        brand = 'today';
    } else if (s.topLevelDomain === 'msnbc.com') {
        brand = 'msnbc';
    }
    // set all values in vertical settings to s obj
    for (var setting in s.verticalSettings[brand]) {
        s[setting] = s.verticalSettings[brand][setting];
    }

    //switch account based on DTM stage
    s.account = (function() {
        if (_satellite && _satellite.configurationSettings.settings.isStaging === false && !isStaging) {
            return s.prodAccount;
        }
        return s.stageAccount;
    })();
})();

/* the plugin section is basicaly global values that are interprated right before the image request is sent */
function s_doPlugins(s) {

    //campaign tracking
    s.campaign = s.custGetQS("cid");

    //urls change, so this sets them on track.
    s.pageURL = document.location.href;

    //extend global values (values upstream take presidence)
    s.contextData = s.extendArray({
        //defaults
        'news.adblock': s.cookieRead('i_abd') || s.notValue,
        'news.date': s.customTimeParting('d'),
        'news.day': s.customTimeParting('dw'), // day of the week
        'news.flashversion': (function() {
            //report flash version using Flash Detect library
            if (typeof FlashDetect === "undefined") {
                return s.notValue;
            } else {
                return FlashDetect.raw || "no flash";
            }
        })(),
        'news.hour': s.customTimeParting('h'),
        'news.kruxid': localStorage.getItem('kxuser'),
        'news.minute': s.customTimeParting('m'),
        'news.omnitureid': s.marketingCloudVisitorID,
        'news.pagename': s.pageName,
        'news.pageurl': document.location.href,
        'news.previouspage': (function() {
            var prevPage = !s.abort && s.getPreviousValue(s.pageName, 'prevVal_pn');
            return prevPage ? prevPage : 'not available';
        })(),
        'news.referrer': document.referrer ? document.referrer : 'no referrer url',
        'news.scrollcount': (function() {
            // increment a pageCount for continuous consumption pageviews
            if (!s.linkType && !s.clickObject && !s.abort) {
                s.continuousView += 1;
            }
            return s.continuousView;
        })(),
        'news.server': s.topLevelDomain,
        'news.sessionnumber': s.getVisitNum(),
        'news.timezone': s.customTimeParting('tz'),
        'news.xfinityheader': s.cookieRead("P7"),
        'news.uiexperiment': s.custGetQS("icid"),
        'news.uxexperiment': (function() {
            //example 2147483647~rv=8~id=b7c90f942ae0282250a0418fbf11f00a~rn=MSNBC_Video_Player_vs._Bento%20B'
            var cookieName = (function() {
                if (s.topLevelDomain === 'nbcnews.com') {
                    return 'akaas_NBCNews';
                }
                if (s.topLevelDomain === 'msnbc.com') {
                    return 'akaas_MSNBC';
                }
                if (s.topLevelDomain === 'today.com') {
                    return 'akaas_TODAY';
                }
            })();
            var returnString = false;
            var value = s.cookieRead(cookieName).split('~');
            if (value.length >= 2) {
                returnString = value[1];
            }
            return returnString;
        })(),
        'news.homepagecurtain': (function() {
            var cookieName = 'curtainEnd';
            var validDate = function(d) { return d && d.getTime && !isNaN(d.getTime()); };
            var cookieVal = s.cookieRead(cookieName);
            var curDate = cookieVal && new Date(parseInt(cookieVal));
            var now = new Date();
            if (!cookieVal || !validDate(curDate)) {
                return s.noValue;
            } else if (now <= curDate) {
                return 'yes';
            } else {
                return 'no';
            }
        })()
    }, s.contextData);

    //set linkTrackVars to all contextData;
    s.linkTrackVars = false;
    for (var key in s.contextData) {
        key = 'contextData.' + key;
        s.linkTrackVars = s.linkTrackVars ? s.linkTrackVars + ',' + key : key;
    }
}

/* Plugin Config */
s.usePlugins = true;
s.doPlugins = s_doPlugins;

/* plugins and helpers (ignore lint for plugins)*/
/* jshint ignore:start */

/*
 * extend arrays recursively
 * by Jeremy F.
 */
s.extendArray = function(defaults, options) { defaults = defaults || {}; for (var prop in options) { if (typeof options[prop] === 'object') { defaults[prop] = s.extendArray(defaults[prop], options[prop]); } else { defaults[prop] = options[prop]; } } return defaults; };

/*
 * Custom getQuerySting to use window.location V1.0 from MDN
 * by Jeremy F.
 */

s.custGetQS = function(key) { return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1")); }

/* custom time parting function */
s.customTimeParting = function(value) {
    var d = new Date();
    var da = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    switch (value) {
        case 'm':
            return ("0" + d.getHours()).slice(-2) + ":" + ("0" + d.getMinutes()).slice(-2);
        case 'h':
            return d.getHours() + ":00";
        case 'dw':
            return da[d.getDay()];
        case 'd':
            return (d.getMonth() + 1) + "/" + d.getDate() + "/" + d.getFullYear();
        case 'tz':
            return d.getTimezoneOffset() / 60 * -1;
        default:
            return "";
    }
}

/*
 * Plugin: getPreviousValue_v1.0 - return previous value of designated
 *   variable (requires split utility)
 */
s.getPreviousValue = new Function("v", "c", "el", "" + "var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el" + "){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i" + "){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)" + ":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?" + "s.c_w(c,v,t):s.c_w(c,'no value',t);return r}");
/*
 * Utility Function: split v1.5 (JS 1.0 compatible)
 */
s.split = new Function("l", "d", "" + "var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x" + "++]=l.substring(0,i);l=l.substring(i+d.length);}return a");

s.getVisitNum = new Function("" + "var s\x3dthis,e\x3dnew Date(),cval,cvisit,ct\x3de.getTime(),c\x3d's_vnum',c2\x3d's" + "_invisit';e.setTime(ct+30*24*60*60*1000);cval\x3ds.c_r(c);if(cval){var" + " i\x3dcval.indexOf('\x26vn\x3d'),str\x3dcval.substring(i+4,cval.length),k;}cvis" + "it\x3ds.c_r(c2);if(cvisit){if(str){e.setTime(ct+30*60*1000);s.c_w(c2,'" +
    "true',e);return str;}else return 'unknown visit number';}else{if(st" + "r){str++;k\x3dcval.substring(0,i);e.setTime(k);s.c_w(c,k+'\x26vn\x3d'+str,e)" + ";e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return str;}else{s.c_w" + "(c,ct+30*24*60*60*1000+'\x26vn\x3d1',e);e.setTime(ct+30*60*1000);s.c_w(c2" + ",'true',e);return 1;}}");
/* jshint ignore:end */

//track that its all been loaded;
$t('track', 'dtm_adobeAppMeasurmentLoaded', { 'sc_obj': s });
</script><script>
/* version 1.3 */
/*global $t */
(function() {
    var subscribeTsEventsToNdpPlayer = function(ndpPlayer, playerBrand) {
        //set stub and make local instance of global
        var $ndp = window.$ndp || {
            events: {}
        };

        //register $t event
        $t('register', 'ndp_videoEvent', {
            'remote': false
        }); //not remote for now

        //handle ndp events
        var tsVideoEventBind = function(e) {
            //accounts for multi-video player where all events are on all players
            var activePlayerId = e.payload && e.payload.playerId;
            if ((ndpPlayer.id() === e.playerId) || !e.playerId) { //no event playerID if its old version

                var eventName = e.type && e.type[0] || '';
                //could explicitly map data here, but sending it all is more versatile
                var videoData = e.payload && e.payload.asset || {};
                //add lengths for ads to videoData to standardize
                videoData.totalLength = e.payload && Math.round(e.payload.totalLength) || 0;
                videoData.playheadPosition = e.payload && Math.round(e.payload.playheadPosition) || 0;

                $t('track', 'ndp_videoEvent', {
                    'eventIds': {
                        'playerId': ndpPlayer.id(),
                        'activePlayerId': activePlayerId,
                        'eventPlayerId': e.playerId
                    },
                    'eventType': eventName,
                    'videoData': videoData,
                    'playerBrand': playerBrand
                });
            }

        };
        // subscribe to all ndp events, based on $ndp.events "sections"
        var eventSections = ['AdEvent', 'PlaybackEvent'];
        for (var i = 0; eventSections[i]; i++) {
            for (var eventValue in $ndp.events[eventSections[i]]) {
                if (typeof $ndp.events[eventSections[i]] !== 'undefined' && typeof $ndp.events[eventSections[i]][eventValue] === 'object' && typeof $ndp.events[eventSections[i]][eventValue][0] === 'string') {
                    ndpPlayer.on($ndp.events[eventSections[i]][eventValue], tsVideoEventBind);
                }
            }
        }
    };
    if ($t('ndp_playerInit.playerObj')) {
        subscribeTsEventsToNdpPlayer($t('ndp_playerInit.playerObj'), $t('ndp_playerInit.brand'));
    } else {
        $t('on', 'ndp_playerInit', function(e, data) {
            subscribeTsEventsToNdpPlayer(data.playerObj, data.brand);
        });
    }
})();
</script><!-- Dynamic Yield Code -->
<script type="text/javascript">
    window.DY = window.DY || {scsec : 8765428 ,API: function(){(DY.API.actions = DY.API.actions || []).push(arguments)}};
</script>
<script async="" type="text/javascript" src="./M-050_files/api_dynamic.js.Download"></script>
<script async="" type="text/javascript" src="./M-050_files/api_static.js.Download"></script><script>
/* global $t, parseJsonLd */
(function () {
    window.dtm_pageview = window.dtm_pageview || {};
    window.dtm_pageview.viewedPages = window.dtm_pageview.viewedPages || {}; //list of URLS already tracked (make it exposed, so )
    var viewedPages = window.dtm_pageview.viewedPages; //keep it simple, so its shorter

    var trackView = true;
    var i, excludedPaths = [
        /\/embedded-video\//
    ];

    $t('register', 'dtm_pageView');
    //reparse ldjson before pageview
    if (typeof parseJsonLd === 'function') {
        parseJsonLd();
    }

    //dont track pages from exlude list
    for (i = 0; (excludedPaths[i] && trackView); i++) {
        if (document.location.pathname.search(excludedPaths[i]) != -1) {
            trackView = false;
        }
    }
    //delay pageview event so all things get tracked 
    setTimeout(function(){
        //check to see if thise page has been tracked already (only one pageview per URL)
        if (viewedPages[document.location.pathname]) {
            trackView = false;
        }
        $t('track', 'dtm_pageView', { initiator: 'pageViewPassThrough', trackView: trackView, url: document.location.pathname });
        viewedPages[document.location.pathname] = true;
    },500);
})();
</script><script>
// Comscore
var _comscore;
window._comscore = _comscore || [];
window._comscore.push({
        c1: "2",
        c2: "6035083",
        c3: "",
        c4: "nbcnews"
    });
(function () {
    var s = document.createElement("script"),
        el = document.getElementsByTagName("script")[0];
    s.async = true;
    s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
    el.parentNode.insertBefore(s, el);
})();
</script><script>
/* Copyright (c) 2016 comScore, Inc.
 * All rights reserved.
 * By using this software, you are agreeing to be bound by the
 * terms of these policies: http://www.comscore.com/About_comScore/Privacy_Policy
 */
!function(a,b){false&&"function"==typeof define&&define.a?define([],function(){return a.ns_=b(a.ns_)}):"object"==typeof module&&module.exports?module.exports=b():a.ns_=b(a.ns_)}(this,function(a){a=a||{},a.ns_=a;var b={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(parseInt(a));return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},parseBoolean:function(a,b){return b=b||!1,a?"0"==a?!1:void 0:b},isNotEmpty:function(a){return!this.isEmpty(a)},isEmpty:function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},indexOf:function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f)}catch(h){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b&&"undefined"!=typeof console&&console){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"==typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a},toString:function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(",");if(this.size(a)>0){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}return a.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document?!0:"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)},safeGet:function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},getBrowserName:function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},getBrowserFullVersion:function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(b=e.indexOf("Opera"))?(g=e.substring(b+6),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("OPR/"))?g=e.substring(b+4):-1!=(b=e.indexOf("Android"))?g=e.substring(b+11):-1!=(b=e.indexOf("Chrome"))?g=e.substring(b+7):-1!=(b=e.indexOf("Safari"))?(g=e.substring(b+7),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("Firefox"))?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),-1!=(c=g.indexOf(";"))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(" "))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(")"))&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window?(null!==window.ActiveXObject,!0):!0},getNamespace:function(){return a.ns_||a}};return a.StreamSense=a.StreamSense||function(){var c=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"!=typeof Image){var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a}},e=function(a,b,c){c&&"undefined"!=typeof setTimeout&&setTimeout(c,0)},f=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:c,IO:f,getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getResolution:function(){return h.UNKNOWN_VALUE},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];null===d||void 0===d?b[c]=d:b[c]=a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=String(b),b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,START:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMSENSE_VERSION:"5.1.1.160316",MODEL_VERSION:"5.1",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},m=function(){function a(){function a(){I={},I.ns_st_pt="0",I.ns_st_bt="0",I.ns_st_bc="0",I.ns_st_pc="0",I.ns_st_sq="0",I.ns_st_cl="0",I.ns_st_pn="1",I.ns_st_tp="1",I.ns_st_skc="0",I.ns_st_et="0",I.ns_st_cn="1",I.ns_st_sc="0",I.ns_st_ska="0",I.ns_st_skd="0",I.ns_st_skt="0",I.ns_st_upc="0",I.ns_st_lpc="0",I.ns_st_upa="0",I.ns_st_lpa="0",I.ns_st_ub="0",I.ns_st_br="0",f=!1,e=!1,d=h.UNKNOWN_VALUE,g=NaN,m=0,j=0,i=NaN,n=NaN,p=0,o=0,k=0,s=NaN,q=[],r=[],t=0,u=0,v=0,w=0,x=0,y=0,z=NaN,A=0,B=!1,C=NaN,F=!1,E=0,H=0,D=0,G=0,J=0,K=0,L=0,M=0,N=0}function c(){var a,b,c=0;for(a=0;a<q.length;a++)c+=Math.abs(q[a].end-q[a].start);O.setUniquePlaybackInterval(c);var d=0;for(a=0;a<q.length;a++)b=Math.abs(q[a].end-q[a].start),b>d&&(d=b);O.setLongestPlaybackInterval(d);var e=0;for(a=0;a<r.length;a++)e+=Math.abs(r[a].end-r[a].start);O.setAssetUniquePlaybackInterval(e);var f=0;for(a=0;a<r.length;a++)b=Math.abs(r[a].end-r[a].start),b>f&&(f=b);O.setAssetLongestPlaybackInterval(f)}var d,e,f,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=this,P=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return d},setHash:function(a){d=a},setPlaybackIntervalMergeTolerance:function(a){P=a},getPlaybackIntervalMergeTolerance:function(){return P},setLabels:function(a){null!=a&&b.extend(I,a)},getLabels:function(){return I},setLabel:function(a,b){var c={};c[a]=b,O.setLabels(c)},getLabel:function(a){return I[a]},getClipNumber:function(){return parseInt(O.getLabel("ns_st_cn"))},setClipNumber:function(a){O.setLabel("ns_st_cn",String(a))},getPartNumber:function(){return parseInt(O.getLabel("ns_st_pn"))},createLabels:function(a){var c=a||{};c.ns_st_dbt=String(O.getBufferingTime()-A),A=O.getBufferingTime(),c.ns_st_det=String(O.getElapsedTime()-o),o=O.getElapsedTime(),c.ns_st_dupc=String(O.getUniquePlaybackInterval()-t),t=O.getUniquePlaybackInterval(),parseInt(c.ns_st_dupc)<0&&(c.ns_st_dupc="0");var d;d=b.exists(c.ns_st_upc)?parseInt(c.ns_st_upc):O.getUniquePlaybackInterval(),c.ns_st_iupc=String(d-u),u=d,parseInt(c.ns_st_iupc)<0&&(c.ns_st_iupc="0"),c.ns_st_dupa=String(O.getAssetUniquePlaybackInterval()-v),v=O.getAssetUniquePlaybackInterval(),parseInt(c.ns_st_dupa)<0&&(c.ns_st_dupa="0");var e;e=b.exists(c.ns_st_upa)?parseInt(c.ns_st_upa):O.getAssetUniquePlaybackInterval(),c.ns_st_iupa=String(e-w),w=e,parseInt(c.ns_st_iupa)<0&&(c.ns_st_iupa="0"),c.ns_st_dlpc=String(O.getLongestPlaybackInterval()-x),x=O.getLongestPlaybackInterval(),parseInt(c.ns_st_dlpc)<0&&(c.ns_st_dlpc="0"),c.ns_st_dlpa=String(O.getAssetLongestPlaybackInterval()-y),y=O.getAssetLongestPlaybackInterval(),parseInt(c.ns_st_dlpa)<0&&(c.ns_st_dlpa="0");var g;return g=b.exists(c.ns_st_pt)?parseInt(c.ns_st_pt):O.getPlaybackTime(),c.ns_st_ipt=String(g-k),k=g,c.ns_st_dpt=String(O.getPlaybackTime()-j),j=O.getPlaybackTime(),c.ns_st_dpc=String(O.getPauses()-J),J=O.getPauses(),c.ns_st_dskc=String(O.getSeeks()-K),K=O.getSeeks(),c.ns_st_dbc=String(O.getBuffers()-L),L=O.getBuffers(),c.ns_st_dskt=String(O.getSeekingTime()-D),D=O.getSeekingTime(),c.ns_st_dska=String(O.getSeekingAmount()-G),G=O.getSeekingAmount(),b.extend(c,O.getLabels()),O.setSeekingDirection(0),f&&(c.ns_st_spc=String(M),c.ns_st_apc=String(N)),f||b.parseBoolean(c.ns_st_sc)||(c.ns_st_sc="1"),c},getVideoTrack:function(){return O.getLabel("ns_st_vt")},setVideoTrack:function(a){O.setLabel("ns_st_vt",String(a))},getAudioTrack:function(){return O.getLabel("ns_st_at")},setAudioTrack:function(a){O.setLabel("ns_st_at",String(a))},getSubtitleTrack:function(){return O.getLabel("ns_st_tt")},setSubtitleTrack:function(a){O.setLabel("ns_st_tt",String(a))},getCDN:function(){return O.getLabel("ns_st_cdn")},setCDN:function(a){O.setLabel("ns_st_cdn",String(a))},getClipPlaybackIntervals:function(){return q},setClipPlaybackIntervals:function(a){q=a},getAssetPlaybackIntervals:function(){return r},getUniquePlaybackInterval:function(){return parseInt(O.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(O.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(a){O.setLabel("ns_st_upa",String(a))},setUniquePlaybackInterval:function(a){O.setLabel("ns_st_upc",String(a))},getLongestPlaybackInterval:function(){return parseInt(O.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(a){O.setLabel("ns_st_lpc",String(a))},getAssetLongestPlaybackInterval:function(){return parseInt(O.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(a){O.setLabel("ns_st_lpa",String(a))},incrementPauses:function(){O.setLabel("ns_st_pc",String(O.getPauses()+1))},incrementSeeks:function(){O.setLabel("ns_st_skc",String(O.getSeeks()+1))},incrementPlayCounter:function(){O.setLabel("ns_st_sq",String(O.getPlayCounter()+1))},getPlayCounter:function(){return parseInt(O.getLabel("ns_st_sq"))},getBufferingTime:function(){return parseInt(O.getLabel("ns_st_bt"))},setBufferingTime:function(a){O.setLabel("ns_st_bt",String(a))},addBufferingTime:function(a){if(!isNaN(z)){var b=O.getBufferingTime();b+=a-z,O.setBufferingTime(b),z=NaN}},setPlaybackStartPosition:function(a){s=parseInt(a)},getPlaybackStartPosition:function(){return s},addInterval:function(a){isNaN(s)||isNaN(a)||(q=b.addNewPlaybackInterval(q,s,a,P),r=b.addNewPlaybackInterval(r,s,a,P),c(),s=NaN)},getElapsedTime:function(){return parseInt(O.getLabel("ns_st_et"))},setElapsedTime:function(a){O.setLabel("ns_st_et",String(a))},addElapsedTime:function(a){if(!isNaN(n)){var b=O.getElapsedTime();b+=a-n,O.setElapsedTime(b),n=NaN}},getElapsedTimestamp:function(){return n},setElapsedTimestamp:function(a){n=a},addPlaybackTime:function(a){if(!isNaN(g)){var b=O.getPlaybackTime();b+=a-g,O.setPlaybackTime(b),g=NaN}},getPlaybackTime:function(){return parseInt(O.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(a){return isNaN(g)||(m+=a-g),m},setPlaybackTimeOffset:function(a){m=a},getPlaybackTimeOffset:function(){return m},setPlaybackTime:function(a){O.setLabel("ns_st_pt",String(a))},getPlaybackTimestamp:function(){return g},setPlaybackTimestamp:function(a){g=a},setPreviousPlaybackTime:function(a){j=a},setPreviousPlaybackTimestamp:function(a){i=a},getBufferingTimestamp:function(){return z},setBufferingTimestamp:function(a){z=a},getPauses:function(){return parseInt(O.getLabel("ns_st_pc"))},setPauses:function(a){O.setLabel("ns_st_pc",String(a))},getSeeks:function(){return parseInt(O.getLabel("ns_st_skc"))},setSeeks:function(a){O.setLabel("ns_st_skc",String(a))},setSeeking:function(a){B=a},isSeeking:function(){return B},setCollectingSeekingTime:function(a){F=a},isCollectingSeekingTime:function(){return F},setClipStarted:function(a){e=a},isClipStarted:function(){return e},setPlaybackStarted:function(a){f=a},isPlaybackStarted:function(){return f},setSeekingTimestamp:function(a){C=a},getSeekingTimestamp:function(){return C},addSeekingTime:function(a){if(!isNaN(C)){var b=O.getSeekingTime();b+=a-C,O.setSeekingTime(b),C=NaN}},getSeekingTime:function(){return parseInt(O.getLabel("ns_st_skt"))},setSeekingTime:function(a){O.setLabel("ns_st_skt",String(a))},setSeekingTimeBeforeEnd:function(a){H=a},getSeekingTimeBeforeEnd:function(){return H},setSeekStartPosition:function(a){E=a},getSeekStartPosition:function(){return E},setSeekingAmount:function(a){O.setLabel("ns_st_ska",String(a))},getSeekingAmount:function(){return parseInt(O.getLabel("ns_st_ska"))},addSeekingAmount:function(a){var b=O.getSeekingAmount();b+=Math.abs(a-E),O.setSeekingAmount(b);var c;E==a?c=0:E>a?c=-1:a>E&&(c=1),O.setSeekingDirection(c),E=0},getSeekingDirection:function(){return parseInt(O.getLabel("ns_st_skd"))},setSeekingDirection:function(a){O.setLabel("ns_st_skd",String(a))},resetClipLifecycleLabels:function(){I.ns_st_pt="0",j=0,k=0,I.ns_st_bt="0",A=0,I.ns_st_bc="0",L=0,I.ns_st_pc="0",J=0,I.ns_st_sq="0",I.ns_st_upa="0",v=0,w=0,I.ns_st_et="0",o=0,I.ns_st_lpa="0",y=0,I.ns_st_skt="0",D=0,I.ns_st_ska="0",G=0,I.ns_st_skc="0",K=0},incrementSegmentPlaybackCounter:function(){M++},incrementClipLoadCounter:function(){O.setLabel("ns_st_sc",String(O.getClipLoadCounter()+1))},incrementAssetPlaybackCounter:function(){N++},setPreviousUniquePlaybackInterval:function(a){t=a},setPreviousEventIndependentUniquePlaybackInterval:function(a){u=a},setPreviousLongestPlaybackInterval:function(a){x=a},resetAssetPlaybackCounters:function(){r=[],O.setAssetUniquePlaybackInterval(0),v=0,w=0,O.setAssetLongestPlaybackInterval(0),y=0},setSegmentPlaybackCounter:function(a){M=a},setClipLoadCounter:function(a){O.setLabel("ns_st_sc",String(a))},setAssetPlaybackCounter:function(a){N=a},setLowestPartNumberPlayed:function(a){p=a},getSegmentPlaybackCounter:function(){return M},getClipLoadCounter:function(){return parseInt(O.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return N},getLowestPartNumberPlayed:function(){return p},getBuffers:function(){return parseInt(O.getLabel("ns_st_bc"))},incrementBufferCount:function(){O.setLabel("ns_st_bc",String(O.getBuffers()+1))},getPreviousBufferingTime:function(){return A}}),a()}return a.resetClip=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),n=function(){function a(){function a(){c=new m,f={},f.ns_st_bp="0",f.ns_st_pa="0",f.ns_st_pp="0",f.ns_st_sp="1",f.ns_st_id=String(+new Date),d=NaN,e=NaN,h={},i=0,g=!1,j=!1,k=0}var c,d,e,f,g,h,i,j,k,l=this;b.extend(this,{resetClip:function(){var a=c;c=new m,m.resetClip(a,c)},hashExists:function(a){return null!=h[a]},storeHash:function(a){h[a]={}},removeHash:function(a){delete h[a]},storeClipPlaybackCounters:function(){for(var a in h)if(h.hasOwnProperty(a)&&h[a].clipNumber===c.getClipNumber()){b.extend(h[a],{segmentPlaybackCounter:c.getSegmentPlaybackCounter(),clipLoadCounter:c.getClipLoadCounter(),assetPlaybackCounter:c.getAssetPlaybackCounter(),lowestPartNumberPlayed:c.getLowestPartNumberPlayed(),seeking:c.isSeeking(),seekingTimeBeforeEnd:c.getSeekingTimeBeforeEnd(),seekingStartPosition:c.getSeekStartPosition(),clipPlaybackIntervals:c.getClipPlaybackIntervals(),uniquePlaybackInterval:c.getUniquePlaybackInterval(),longestPlaybackInterval:c.getLongestPlaybackInterval(),videoTrack:c.getVideoTrack(),audioTrack:c.getAudioTrack(),subtitleTrack:c.getSubtitleTrack(),cdn:c.getCDN()});break}},getStoredClipRegisters:function(a){return h[a]},getClipNumber:function(a){return h[a].clipNumber},getMaxClipNumber:function(){return i},storeClipNumber:function(a,b){h[a].clipNumber=b,b>i&&(i=b)},setLabels:function(a){null!=a&&b.extend(f,a)},getLabels:function(){return f},setLabel:function(a,b){var c={};c[a]=b,l.setLabels(c)},getLabel:function(a){return f[a]},getClip:function(){return c},createLabels:function(a){var d=a||{};return j||(d.ns_st_pb=null!=d.ns_st_pb?d.ns_st_pb:"1"),b.extend(d,l.getLabels()),c.isPlaybackStarted()&&(d.ns_st_ppc=String(k)),d},incrementPlayCounter:function(){l.setLabel("ns_st_sp",String(parseInt(l.getLabel("ns_st_sp"))+1))},incrementPauses:function(){l.setLabel("ns_st_pp",String(l.getPauses()+1))},addPlaybackTime:function(a){if(!isNaN(e)){var b=l.getPlaybackTime();b+=a-e,l.setPlaybackTime(b),e=NaN}},addBufferingTime:function(a){if(!isNaN(d)){var b=l.getBufferingTime();b+=a-d,l.setBufferingTime(b),d=NaN}},getBufferingTime:function(){return parseInt(l.getLabel("ns_st_bp"))},setBufferingTime:function(a){l.setLabel("ns_st_bp",String(a))},getPlaybackTime:function(){return parseInt(l.getLabel("ns_st_pa"))},setBufferingTimestamp:function(a){d=a},getBufferingTimestamp:function(){return d},setPlaybackTime:function(a){l.setLabel("ns_st_pa",String(a))},setPlaybackTimestamp:function(a){e=a},getPlaybackTimestamp:function(){return e},getPauses:function(){return parseInt(l.getLabel("ns_st_pp"))},setPauses:function(a){l.setLabel("ns_st_pp",String(a))},isPlaylistStarted:function(){return g},setPlaylistStarted:function(a){g=a},getPlaybackCounter:function(){return k},incrementPlaybackCounter:function(){k++},setFirstEventSent:function(a){j=a}}),a()}return a.resetPlaylist=function(b,c,d){for(var e=b.getClip(),f=b.getLabels(),g={},h=0;d&&h<d.length;h++)f.hasOwnProperty(d[h])&&(g[d[h]]=f[d[h]]);c=new a,c.setLabels(g),m.resetClip(e,c.getClip(),d)},a}(),o=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getSSECore().getPixelURL();if(a.getAppCore()){if(a.getSSECore().isProperlyInitialized()){var e=a.getSSECore().getExports().am,g=a.getSSECore().getExports().et,h=e.newApplicationMeasurement(a.getAppCore(),g.HIDDEN,c,d);a.getAppCore().getQueue().offer(h)}}else d&&a.getSSECore().getPlatformAPI().httpGet(a.getSSECore().prepareUrl(d,c))}var e,f,g=this;b.extend(this,{newEvent:function(a){d(a.eventLabels),a.eventType!=i.HEARTBEAT&&g.incrementEventCounter()},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),p=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getPlaybackTimeOffset()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_pa=String(a.getPlaylist().getPlaybackTime()+(d-a.getPlaylist().getPlaybackTimestamp())),c.ns_st_pt=String(a.getPlaylist().getClip().getPlaybackTime()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_dpt=String(d-a.getPlaylist().getClip().getPlaybackTimestamp()),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK?(c.ns_st_bp=String(a.getPlaylist().getBufferingTime()+(d-a.getPlaylist().getBufferingTimestamp())),c.ns_st_bt=String(a.getPlaylist().getClip().getBufferingTime()+(d-a.getPlaylist().getClip().getBufferingTimestamp())),c.ns_st_dbt=String(d-a.getPlaylist().getClip().getBufferingTimestamp())):c.ns_st_dbt=String(a.getPlaylist().getClip().getBufferingTime()-a.getPlaylist().getClip().getPreviousBufferingTime()),c.ns_st_et=String(a.getPlaylist().getClip().getElapsedTime()+(d-a.getPlaylist().getClip().getElapsedTimestamp())),c.ns_st_det=String(d-a.getPlaylist().getClip().getElapsedTimestamp());var e=b.cloneObject(a.getPlaylist().getClip().getClipPlaybackIntervals()),f=b.cloneObject(a.getPlaylist().getClip().getAssetPlaybackIntervals());e=b.addNewPlaybackInterval(e,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),f=b.addNewPlaybackInterval(f,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var l,m,n=0;for(l=0;l<e.length;l++)n+=Math.abs(e[l].end-e[l].start);c.ns_st_upc=String(n),c.ns_st_dupc=String(n-a.getPlaylist().getClip().getUniquePlaybackInterval());var o=0;for(l=0;l<e.length;l++)m=Math.abs(e[l].end-e[l].start),m>o&&(o=m);c.ns_st_lpc=String(o),c.ns_st_dlpc=String(o-a.getPlaylist().getClip().getLongestPlaybackInterval());var p=0;for(l=0;l<f.length;l++)p+=Math.abs(f[l].end-f[l].start);c.ns_st_upa=String(p),c.ns_st_dupa=String(p-a.getPlaylist().getClip().getAssetUniquePlaybackInterval());var q=0;for(l=0;l<f.length;l++)m=Math.abs(f[l].end-f[l].start),m>q&&(q=m);c.ns_st_lpa=String(q),c.ns_st_dlpa=String(q-a.getPlaylist().getClip().getAssetLongestPlaybackInterval()),c.ns_st_hc=String(a.getHeartbeat().getCount());var r=a.getSSECore().createLabels(i.HEARTBEAT,c,d);a.getEventManager().newEvent(r),g=0,k.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,k=this,m=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){m=a},getInterval:function(a){var b=0;if(null!=m)for(var c=0;c<m.length;c++){var d=m[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b},resume:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getSSECore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));g=b-(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()))%b}}),c()}}(),q=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getExpectedPlaybackPosition(d)),a.getPlaylist().addPlaybackTime(d),a.getPlaylist().setPlaybackTimestamp(d),a.getPlaylist().getClip().addPlaybackTime(d),a.getPlaylist().getClip().setPlaybackTimestamp(d),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&(a.getPlaylist().addBufferingTime(d),a.getPlaylist().setBufferingTimestamp(d),a.getPlaylist().getClip().addBufferingTime(d),a.getPlaylist().getClip().setBufferingTimestamp(d)),a.getPlaylist().getClip().addElapsedTime(d),a.getPlaylist().getClip().setElapsedTimestamp(d),a.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),a.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po));
var e=a.getSSECore().createLabels(i.KEEPALIVE,c,d);a.getEventManager().newEvent(e),g.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{resume:function(){e(),f=a.getSSECore().getPlatformAPI().setTimeout(d,h)},pause:function(){e()},setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),r=function(){return function(a){function c(){f=j.IDLE,e=null,d=NaN}var d,e,f,g=this;b.extend(g,{eventTypeToState:function(a){if(f==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(f==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(f==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(f==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(f==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED}else if(f==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(f==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED}else if(f==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(f==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},getCurrentState:function(){return f},newEvent:function(a,b){var c=g.eventTypeToState(a);f!=c&&(e=f,f=c,d=b)},getPreviousState:function(){return e},getLastStateChangeTimestamp:function(){return d}}),c()}}(),s=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(b,c){a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),t=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b),a.getPlaylist().getClip().setPlaybackTimeOffset(d)},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPlay:function(b,c){a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b,c){a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().setSeekingTimestamp(b):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBuffer:function(b,c){a.getSSECore().isPauseOnBufferingEnabled()&&a.getSSECore().startPausedOnBufferingTimer(b,c),a.getPlaylist().getClip().incrementBufferCount(),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onPause:function(b,c){a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),F=function(){return function(){function a(){f=new G(aa),b.getNamespace().comScore?(ba=b.getNamespace().comScore.exports,f.setAppCore(ba.c())):f.setAppCore(null),f.setKeepAlive(new q(f)),
f.setHeartbeat(new p(f)),f.setEventManager(new o(f)),f.setStateMachine(new r),f.setPlaylist(new n),$={},m=new x(f),F=new y(f),H=new A(f),I=new B(f),J=new t(f),K=new v(f),L=new w(f),M=new u(f),N=new z(f),O=new C(f),P=new D(f),Q=new E(f),R=new s(f),S=!1,T=0,U=+new Date,V=!0,X=!1,Z=[]}function c(a){var b=f.getStateMachine().getCurrentState();if(b==j.IDLE||b==j.PLAYBACK_NOT_STARTED||b==j.BUFFERING_BEFORE_PLAYBACK||b==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(b==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(b==j.PAUSED||b==j.BUFFERING_DURING_PAUSE||b==j.SEEKING_DURING_PLAYBACK||b==j.SEEKING_DURING_BUFFERING||b==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_PLAYBACK){if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function d(a,b,d){var e=f.getStateMachine().getCurrentState();a==i.AD_SKIP&&!d.hasOwnProperty("ns_st_ui")&&c(a)?d.ns_st_ui="skip":a==i.SEEK_START&&!d.hasOwnProperty("ns_st_ui")&&c(a)&&(d.ns_st_ui="seek"),e==j.IDLE?a==i.BUFFER?m.onBuffer(b,d):a==i.SEEK_START?m.onSeekStart(b,d):a==i.PLAY&&m.onPlay(b,d):e==j.PLAYBACK_NOT_STARTED?a==i.END||a==i.AD_SKIP?H.onEndOrAdSkip(b,d):a==i.SEEK_START?H.onSeekStart(b,d):a==i.PLAY?H.onPlay(b,d):a==i.BUFFER&&R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.PLAYING?a==i.END||a==i.AD_SKIP?I.onEndOrAdSkip(b,d):a==i.BUFFER?I.onBuffer(b,d):a==i.SEEK_START?I.onSeekStart(b,d):a==i.PAUSE&&I.onPause(b,d):e==j.PAUSED?a==i.END||a==i.AD_SKIP?F.onEndOrAdSkip(b,d):a==i.PLAY?F.onPlay(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.SEEK_START&&R.onSeekStartWhenPausedOrBufferingDuringPause(b,d):e==j.BUFFERING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?J.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?J.onBufferStop(b,d):a==i.SEEK_START?J.onSeekStart(b,d):a==i.PAUSE?J.onPause(b,d):a==i.PLAY&&J.onPlay(b,d):e==j.BUFFERING_DURING_PLAYBACK?a==i.PAUSE_ON_BUFFERING?K.onPauseOnBuffering(b,d):a==i.BUFFER_STOP?K.onBufferStop(b,d):a==i.END||a==i.AD_SKIP?K.onEndOrAdSkip(b,d):a==i.SEEK_START?K.onSeekStart(b,d):a==i.PAUSE?K.onPause(b,d):a==i.PLAY&&K.onPlay(b,d):e==j.BUFFERING_DURING_SEEKING?a==i.END||a==i.AD_SKIP?L.onEndOrAdSkip(b,d):a==i.PAUSE?L.onPause(b,d):a==i.PLAY?L.onPlay(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.BUFFERING_DURING_PAUSE?a==i.END||a==i.AD_SKIP?M.onEndAndSkip(b,d):a==i.PAUSE?M.onPause(b,d):a==i.PLAY?M.onPlay(b,d):a==i.SEEK_START?R.onSeekStartWhenPausedOrBufferingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.SEEKING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?O.onEndOrAdSkip(b,d):a==i.PAUSE?O.onPause(b,d):a==i.PLAY?O.onPlay(b,d):a==i.BUFFER&&R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.SEEKING_DURING_PLAYBACK?a==i.END||a==i.AD_SKIP?Q.onEndOrAdSkip(b,d):a==i.PLAY?Q.onPlay(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PAUSE&&R.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):e==j.SEEKING_DURING_BUFFERING?a==i.PAUSE?P.onPause(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?R.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?R.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):e==j.PAUSED_DURING_BUFFERING?a==i.END||a==i.AD_SKIP?N.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?N.onBufferStop(b,d):a==i.SEEK_START?N.onSeekStart(b,d):a==i.PAUSE?N.onPause(b,d):a==i.PLAY&&N.onPlay(b,d):e==j.SEEKING_DURING_PAUSE&&(a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?R.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.PAUSE?R.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?R.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d)),c(a)&&f.getPlaylist().setFirstEventSent(!0)}function e(a,c){for(var d,e=ea.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;n>m;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;t>s;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(fa.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(fa.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(fa.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var f,m,F,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=this,ba={},ca=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,da=l.THROTTLING_DELAY;b.extend(aa,{createLabels:function(a,c,d){var e={};if("undefined"!=typeof document){var g=document;e.c7=g.URL,e.c8=g.title,e.c9=g.referrer}return null!=c&&b.extend(e,c),e.ns_ts=null!=e.ns_ts?e.ns_ts:String(+new Date),e.ns_st_ev=null!=e.ns_st_ev?e.ns_st_ev:i.toString(a),e.ns_st_mp=null!=e.ns_st_mp?e.ns_st_mp:l.DEFAULT_PLAYERNAME,e.ns_st_mv=null!=e.ns_st_mv?e.ns_st_mv:l.STREAMSENSE_VERSION,e.ns_st_ub=null!=e.ns_st_ub?e.ns_st_ub:"0",e.ns_st_br=null!=e.ns_st_br?e.ns_st_br:"0",e.ns_st_pn=null!=e.ns_st_pn?e.ns_st_pn:"1",e.ns_st_tp=null!=e.ns_st_tp?e.ns_st_tp:"1",e.ns_st_it=null!=e.ns_st_it?e.ns_st_it:k.toString(k.SINGLE_CLIP),e.ns_st_sv=null!=e.ns_st_sv?e.ns_st_sv:l.STREAMSENSE_VERSION,e.ns_st_smv=null!=e.ns_st_smv?e.ns_st_smv:l.MODEL_VERSION,e.ns_type=null!=e.ns_type?e.ns_type:"hidden",e.ns_st_ec=null!=e.ns_st_ec?e.ns_st_ec:String(f.getEventManager().getEventCounter()),e.ns_st_po=null!=e.ns_st_po?e.ns_st_po:String(f.getPlaylist().getPlaylist().getClip().getExpectedPlaybackPosition(d)),e.ns_st_ki=null!=e.ns_st_ki?e.ns_st_ki:String(f.getKeepAlive().getInterval()),f.getPlaylist().createLabels(e),f.getPlaylist().getClip().createLabels(e),b.extend(e,aa.getLabels()),b.extend(e,c),{eventType:a,eventLabels:e}},newEvent:function(a,b,c,e){aa.stopDelayedTransitionTimer();var g=f.getStateMachine().getCurrentState(),h=f.getStateMachine().eventTypeToState(a);if(null!=h&&h!=g)if(!aa.isThrottlingEnabled()||g!=j.PLAYING&&g!=j.PAUSED||h!=j.PLAYING&&h!=j.PAUSED||e){c.ns_st_po||(f.getStateMachine().getCurrentState()==j.PLAYING&&a==i.BUFFER||f.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&a==i.BUFFER_STOP?c.ns_st_po=String(f.getPlaylist().getClip().getPlaybackTimeOffset()+(b-f.getPlaylist().getClip().getPlaybackTimestamp())):c.ns_st_po=String(f.getPlaylist().getClip().getExpectedPlaybackPosition(b))),d(a,b,c);var k=0;isNaN(f.getStateMachine().getLastStateChangeTimestamp())||(k=b-f.getStateMachine().getLastStateChangeTimestamp()),f.getStateMachine().newEvent(a,b);for(var l=0,m=Z.length;m>l;l++)Z[l](g,h,c,k)}else Y=f.getPlatformAPI().setTimeout(function(a,c,d){return function(){aa.newEvent(a,b,d,!0)}}(a,h,c),da)},newPseudoEvent:function(a,b,c){if(a!=i.LOAD&&a!=i.START||f.getStateMachine().getCurrentState()==j.IDLE){a!=i.ERROR||c.ns_st_er||(c.ns_st_er=h.UNKNOWN_VALUE),f.getStateMachine().getCurrentState()!=j.IDLE&&f.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&f.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(f.getPlaylist().getClip().addElapsedTime(b),f.getPlaylist().getClip().setElapsedTimestamp(b));var d,e,g,k=!0,l=!1;switch(a){case i.BIT_RATE:d="ns_st_br",e="ns_st_pbr",l=!0;break;case i.PLAYBACK_RATE:d="ns_st_rt",e="ns_st_prt",l=!0;break;case i.VOLUME:d="ns_st_vo",e="ns_st_pvo",l=!0;break;case i.WINDOW_STATE:d="ns_st_ws",e="ns_st_pws",l=!0;break;case i.AUDIO:d="ns_st_at",e="ns_st_pat",l=!1;break;case i.VIDEO:d="ns_st_vt",e="ns_st_pvt",l=!1;break;case i.SUBS:d="ns_st_tt",e="ns_st_ptt",l=!1;break;case i.CDN:d="ns_st_cdn",e="ns_st_pcdn",l=!1;break;default:k=!1}if(k&&c.hasOwnProperty(d)&&(l?(aa.getLabels().hasOwnProperty(d)&&(g=aa.getLabels()[d],c[e]=g),aa.setLabel(d,c[d])):(f.getPlaylist().getClip().getLabels().hasOwnProperty(d)&&(g=f.getPlaylist().getClip().getLabels()[d],c[e]=g),f.getPlaylist().getClip().setLabel(d,c[d]))),!k||f.getStateMachine().getCurrentState()==j.PLAYING||f.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK){c.ns_st_po||(c.ns_st_po=String(f.getPlaylist().getClip().getExpectedPlaybackPosition(b))),f.getStateMachine().getCurrentState()!=j.PLAYING&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(f.getPlaylist().addPlaybackTime(b),f.getPlaylist().setPlaybackTimestamp(b),f.getPlaylist().getClip().addPlaybackTime(b),f.getPlaylist().getClip().setPlaybackTimestamp(b),f.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),f.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po))),f.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||(f.getPlaylist().addBufferingTime(b),f.getPlaylist().setBufferingTimestamp(b),f.getPlaylist().getClip().addBufferingTime(b),f.getPlaylist().getClip().setBufferingTimestamp(b));var m=aa.createLabels(a,c,b);f.getEventManager().newEvent(m)}}},getState:function(){return f.getStateMachine().getCurrentState()},addListener:function(a){Z.push(a)},removeListener:function(a){Z.splice(b.indexOf(a,Z),1)},getLabel:function(a){return $[a]},getLabels:function(){return $},setLabel:function(a,b){null==b?delete $[a]:$[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&aa.setLabel(b,a[b])},getPlatformAPI:function(){return f.getAppCore()?f.getAppCore().getPlatformAPI():g},getExports:function(){return ba},isProperlyInitialized:function(){var a=f.getAppCore().getAppContext(),b=f.getAppCore().getSalt(),c=f.getAppCore().getPixelURL();return a&&c&&b},setImplementationType:function(a){f.getStateMachine().getCurrentState()!=j.IDLE||a!=k.SINGLE_CLIP&&a!=k.SEGMENTED&&a!=k.REDUCED||f.getPlaylist().setLabel("ns_st_it",k.toString(a))},setThrottlingDelay:function(a){da=a},getThrottlingDelay:function(){return da},isThrottlingEnabled:function(){return X},setThrottlingEnabled:function(a){X=a},isLoadingTimeSent:function(){return S},setLoadingTimeSent:function(a){S=a},getLoadTimeOffset:function(){return T},setLoadTimeOffset:function(a){T=a},getInitTimestamp:function(){return U},setPauseOnBufferingInterval:function(a){ca=a},getPauseOnBufferingInterval:function(){return ca},isPauseOnBufferingEnabled:function(){return V},setPauseOnBufferingEnabled:function(a){V=a},startPausedOnBufferingTimer:function(a,c){aa.stopPausedOnBufferingTimer(),W=aa.getPlatformAPI().setTimeout(function(){var d={},e=b.fixEventTime(d),f=parseInt(c.ns_st_po);d.ns_st_po=String(f+e-a),aa.newEvent(i.PAUSE_ON_BUFFERING,e,d)},ca)},stopPausedOnBufferingTimer:function(){null!=W&&(aa.getPlatformAPI().clearTimeout(W),W=null)},stopDelayedTransitionTimer:function(){Y&&(aa.getPlatformAPI().clearTimeout(Y),Y=null)},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?aa.setLabel(h[0],b(h[1])):1==h.length&&aa.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return _=a},getPixelURL:function(){return _?_:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?_=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?_=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getSseSM:function(){return f},resetPlaylist:function(a){var b=f.getPlaylist();f.setPlaylist(new n),n.resetPlaylist(b,f.getPlaylist(),a)},resetHeartbeat:function(){f.getHeartbeat().pause(),f.setHeartbeat(new p(f))},resetKeepAlive:function(){f.getKeepAlive().pause(),f.setKeepAlive(new q(f))}});var ea,fa;b.isBrowser()?(ea=window,fa=document):(ea={},fa={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(this,{prepareUrl:e}),a()}}(),G=function(){return function(a){var c,d,e,f,g,h,i=this;b.extend(i,{getAppCore:function(){return c},getSSECore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaylist:function(){return h},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaylist:function(a){h=a}})}}(),H=function(){return function(a,c){function d(){h=new F,g=!0,a&&k.setLabels(a),c&&k.setPixelURL(c)}function e(a,b){k.notify(i.CUSTOM,a,b)}function f(){g&&h.getSseSM().getStateMachine().getCurrentState()!=j.IDLE&&k.end()}var g,h,k=this,m=l.STANDARD_METADATA_LABELS;b.extend(this,{isProperlyInitialized:function(){return h.isProperlyInitialized()},reset:function(a){var b=h;b.getSseSM().getKeepAlive().pause(),b.getSseSM().getHeartbeat().pause(),h=new F,n.resetPlaylist(b.getSseSM().getPlaylist(),h.getSseSM().getPlaylist(),a)},setPauseOnBufferingInterval:function(a){h.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return h.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){h.getSseSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return h.getSseSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){h.getSseSM().getHeartbeat().setIntervals(a)},play:function(a,b){k.notify(i.PLAY,a,b)},pause:function(a,b){k.notify(i.PAUSE,a,b)},end:function(a,b){k.notify(i.END,a,b)},bufferStart:function(a,b){k.notify(i.BUFFER,a,b)},bufferStop:function(a,b){k.notify(i.BUFFER_STOP,a,b)},load:function(a,b){k.notify(i.LOAD,a,b)},start:function(a,b){k.notify(i.START,a,b)},seekStart:function(a,b){k.notify(i.SEEK_START,a,b)},skipAd:function(a,b){k.notify(i.AD_SKIP,a,b)},callToAction:function(a,b){k.notify(i.CTA,a,b)},error:function(a,b){k.notify(i.ERROR,a,b)},transferPlayback:function(a,b){k.notify(i.TRANSFER,a,b)},drmFail:function(a,b){k.notify(i.DRM_FAILED,a,b)},drmApprove:function(a,b){k.notify(i.DRM_APPROVED,a,b)},drmDeny:function(a,b){k.notify(i.DRM_DENIED,a,b)},changeBitrate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_br=String(a),k.notify(i.BIT_RATE,d,b)}},changePlaybackRate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_rt=String(a),k.notify(i.PLAYBACK_RATE,d,b)}},changeVolume:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vo=String(a),k.notify(i.VOLUME,d,b)}},changeWindowState:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_ws=String(a),k.notify(i.WINDOW_STATE,d,b)}},changeAudio:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_at=String(a),k.notify(i.AUDIO,d,b)}},changeVideo:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vt=String(a),k.notify(i.VIDEO,d,b)}},changeSubtitle:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_tt=String(a),k.notify(i.SUBS,d,b)}},changeCDN:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_cdn=String(a),k.notify(i.CDN,d,b)}},notify:function(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,i.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.getInteger(d,0).toString()),c.ns_st_po&&h.getSseSM().getPlaylist().getClip().setPlaybackTimeOffset(parseInt(c.ns_st_po)),a==i.PLAY||a==i.PAUSE||a==i.BUFFER||a==i.END||a==i.SEEK_START||a==i.AD_SKIP||a==i.BUFFER_STOP?h.newEvent(a,e,c):h.newPseudoEvent(a,e,c)}},getLabels:function(){return h.getLabels()},getState:function(){return h.getSseSM().getStateMachine().getCurrentState()},setLabels:function(a){h.setLabels(a)},getLabel:function(a){return h.getLabel(a)},setLabel:function(a,b){h.setLabel(a,b)},getLoadTimeOffset:function(){return h.getLoadTimeOffset()},setLoadTimeOffset:function(a){h.setLoadTimeOffset(a)},setPixelURL:function(a){return h.setPixelURL(a)},getPixelURL:function(){return h.getSseSM().getSSECore().getPixelURL()},setImplementationType:function(a){h.setImplementationType(a)},isPauseOnBufferingEnabled:function(){return h.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){h.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return h.isThrottlingEnabled()},setThrottlingEnabled:function(a){h.setThrottlingEnabled(a)},setThrottlingDelay:function(a){h.setThrottlingDelay(a)},getThrottlingDelay:function(){return h.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){h.getSseSM().getPlaylist().getClip().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return h.getSseSM().getPlaylist().getClip().getPlaybackIntervalMergeTolerance()},setClip:function(a,c,d){if(void 0===d&&(d=!0),a=b.jsonObjectToStringDictionary(a),d&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE){var e="",f=0;if(null!=a.ns_st_cn)e=String(a.ns_st_cn);else for(var g=0;g<m.length;g++)a[m[g]]&&(e+=m[g]+":"+a[m[g]]+";");var i=h.getSseSM().getPlaylist(),l=i.getClip();l.isClipStarted()?(i.hashExists(l.getHash())||(i.storeHash(l.getHash()),i.storeClipNumber(l.getHash(),l.getClipNumber())),i.storeClipPlaybackCounters(),f=i.hashExists(e)?i.getClipNumber(e):b.exists(a.ns_st_cn)?parseInt(a.ns_st_cn):i.getMaxClipNumber()+1):f=i.hashExists(e)?i.getClipNumber(e):l.getClipNumber(),i.resetClip(),l=i.getClip(),l.setHash(e),l.setClipNumber(f),l.setLabels(a);var n=i.getStoredClipRegisters(e);return n&&(l.setClipStarted(!0),l.setSegmentPlaybackCounter(n.segmentPlaybackCounter),l.setClipLoadCounter(n.clipLoadCounter),l.setAssetPlaybackCounter(n.assetPlaybackCounter),l.setLowestPartNumberPlayed(n.lowestPartNumberPlayed),l.setSeeking(n.seeking),l.setSeekingTimeBeforeEnd(n.seekingTimeBeforeEnd),l.setSeekStartPosition(n.seekingStartPosition),l.setClipPlaybackIntervals(n.clipPlaybackIntervals),l.setUniquePlaybackInterval(n.uniquePlaybackInterval),l.setLongestPlaybackInterval(n.longestPlaybackInterval),l.setVideoTrack(n.videoTrack),l.setAudioTrack(n.audioTrack),l.setSubtitleTrack(n.subtitleTrack),l.setCDN(n.cdn),l.setPreviousUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousEventIndependentUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousLongestPlaybackInterval(n.longestPlaybackInterval)),l.incrementClipLoadCounter(),l.isClipStarted()&&c&&(i.incrementPlayCounter(),i.incrementPlaybackCounter()),!0}return!1},setPlaylist:function(a,c){return void 0===c&&(c=!0),a=b.jsonObjectToStringDictionary(a),c&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE?(h.getSseSM().getPlaylist().isPlaylistStarted()&&h.resetPlaylist(),h.getSseSM().getPlaylist().setLabels(a),!0):!1},importState:function(){},exportState:function(){return{}},getVersion:function(){return l.STREAMSENSE_VERSION},addListener:function(a){h.addListener(a)},removeListener:function(a){h.removeListener(a)},getClip:function(){return console&&console.warn&&console.warn("getClip() is deprecated. Use getPlaylist().getClip() instead."),h.getSseSM().getPlaylist().getClip()},getPlaylist:function(){return h.getSseSM().getPlaylist()},setHttpGet:function(a){"function"==typeof a&&(h.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(h.getPlatformAPI().httpPost=a)},setExitEndEventEnabled:function(a){g=a},isExitEndEventEnabled:function(){return g},getPlatformAPI:function(){return h.getPlatformAPI()}}),b.extend(this,{customNotify:e,viewNotify:function(a,b){a=a||k.getPixelURL(),a&&viewNotify(a,b)}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",f),window.addEventListener("unload",f)):window.attachEvent&&(window.attachEvent("onbeforeunload",f),window.attachEvent("onunload",f))),d()}}();return function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;y>=b;b++)if(x.hasOwnProperty(String(b))){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(String(c))&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().setPlaylist(a),d().getPlaylist()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=String(b)),d().setClip(a,c),d().getClip()}function j(a,b,c){return"undefined"==typeof a?!1:(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaylist().setLabels(a)}function n(){return d().getPlaylist().getLabels()}function o(a){"undefined"!=typeof a&&d().getClip().setLabels(a)}function p(){return d().getClip().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaylist().reset(a||{})}function s(a){return d().getClip().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=String(b)),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(H),H.PlayerEvents=i,H.InternalStates=j,H.ImplementationType=k,H}(),a.StreamingTag=a.StreamingTag||function(){var c=a.StreamSense,d=(a.StreamSense.PlayerEvents,a.StreamSense.InternalStates||null),e=a.StreamSense.ImplementationType||null,f=null!=a.StreamSense.InternalStates&&null!=a.StreamSense.ImplementationType;return function(){var a={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},g={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",Other:"00"},h=function(a){function g(){if(f)if(b.getNamespace().comScore)q=new c,q.setImplementationType(e.REDUCED);else if(b.exists(a))if(r=b.isTrue(a.debug),b.exists(a.customerC2)&&a.customerC2.length>0){var d=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");q=new c,q.setPixelURL(d+".scorecardresearch.com/p?c1=2"),q.setLabel("c2",a.customerC2),q.setImplementationType(e.REDUCED)}else r&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function h(a){b.exists(a)||(a={});for(var c in t)t.hasOwnProperty(c)&&!b.exists(a[t[c]])&&("ns_st_ci"==t[c]?a.ns_st_ci="0":a[t[c]]="*null");return a}function i(a){for(var b in t)if(t.hasOwnProperty(b)&&!j(t[b],o,a))return!1;return!0}function j(a,c,d){if(b.exists(a)&&b.exists(c)&&b.exists(d)){var e=c[a],f=d[a];return b.exists(e)&&b.exists(f)&&e===f}return!1}function k(a){n++;var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"0"};b.extend(c,a),q.setClip(c),o=a,q.play()}function l(a){n++,a=h(a);var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};b.extend(c,a),q.setClip(c),q.play(),p=!1}function m(a,b){a=h(a),u==s.None&&(u=b),p&&u==b&&i(a)?(q.getClip().setLabels(a),q.getState()!=d.PLAYING&&q.play()):k(a),p=!0,u=b}var n=0,o=null,p=!1,q=null,r=!1,s={None:0,AudioContent:1,VideoContent:2},t=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],u=s.None;b.extend(this,{playAdvertisement:function(){if(q){r&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};l(a)}},playVideoAdvertisement:function(a,c){if(q){var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:r&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playAudioAdvertisement:function(a,c){if(q){var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:r&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playContentPart:function(a){if(q){r&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var c={ns_st_ct:"vc"};a&&b.extend(c,a),m(c,s.VideoContent)}},playVideoContentPart:function(a,c){if(q){var d={ns_st_ct:"vc"};c?d.ns_st_ct="vc"+c:r&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.VideoContent)}},playAudioContentPart:function(a,c){if(q){var d={ns_st_ct:"ac"};c?d.ns_st_ct="ac"+c:r&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.AudioContent)}},stop:function(){q&&q.pause()}}),g()};return function(a){}(h),h.ContentType=a,h.AdType=g,h}()}(),a});

(function() {
    var streamingTag = null;
    var previousVideoStopped = true;
    var trackedAd = false;
    $t('on', 'ndp_videoEvent', function(e, data) {
        var eventData = data && data.videoData || {};
        var eventDataRaw = eventData.raw || {};
        var siteBrand = (function() {
            //brand is only today, and everything else is nbcnews, (this doenst work for continous consumption)
            if ($t('jsonLd.Dataset.0.vertical') === 'today') {
                return {
                    st: 'Today',
                    c6Default: '*null',
                    c4: 'today'
                };
            } else {
                return {
                    st: 'NBC News',
                    c6Default: 'nbcnews',
                    c4: 'nbcnews'
                };
            }
        })();
        switch (data.eventType) {
            case 'NDP_PlaybackEvent_LOADED':
                //set new streaming tag for each instance, stop previous if needed
                if (!previousVideoStopped) {
                    streamingTag.stop();
                }
                streamingTag = new ns_.StreamingTag({ customerC2: '6035083' });

                previousVideoStopped = false;
                trackedAd = false;
                break;

            case 'NDP_PlaybackEvent_START':
            case 'NDP_PlaybackEvent_PLAY':
                var showNamesC6 = {
                    'Dateline': 'dateline',
                    'Dateline Digital': 'dateline',
                    'Meet the Press': 'meetthepress',
                    'MTP Daily': 'meetthepress',
                    'Nightly News': 'nightlynews'
                };
                var videoLength = eventDataRaw.duration * 1000;
                var metadata = {
                    ns_st_ci: eventDataRaw.guid || '0', // Content Asset ID
                    ns_st_cl: data.videoData.totalLength ? data.videoData.totalLength : "0", // Clip Length
                    ns_st_st: siteBrand.st,
                    ns_st_pu: eventDataRaw.source === 'TODAY' ? 'TODAY' : 'NBC News', // Publisher Brand Name (needs fixing for today)
                    ns_st_pr: eventDataRaw.source || '*null', // Program Title
                    ns_st_ep: eventDataRaw.headline && eventDataRaw.headline.primary || '*null', // Episode Title
                    ns_st_sn: "*null", // Episode Season Number
                    ns_st_en: "*null", // Episode Number
                    ns_st_ge: "News", // Content Genre
                    ns_st_ti: "*null", // TMS ID (unavailable)
                    ns_st_ia: "0", // Identical Ad Assignment Flag
                    ns_st_ce: "0", // Complete Episode Flag
                    ns_st_ddt: "*null", // Digital Air Date (not setup) "2014-10-03"
                    ns_st_tdt: "*null", // TV Air Date (not setup) "2014-10-03"
                    c3: "*null", // Dictionary Classification Value
                    c4: siteBrand.c4, // Unused Dictionary Classification Value
                    c6: showNamesC6[eventDataRaw.source] ? showNamesC6[eventDataRaw.source] : siteBrand.c6Default // Unused Dictionary Classification Value
                }
                streamingTag && streamingTag.playVideoContentPart(metadata, ns_.StreamingTag.ContentType.ShortFormOnDemand);
                break;
            case 'NDP_AdEvent_PROGRESS':
                //adstart is not used anymore, has to be ad progress
                if (!trackedAd) {
                    streamingTag && streamingTag.playVideoAdvertisement({ ns_st_cl: eventData.totalLength || 0 }, ns_.StreamingTag.ContentType.ShortFormOnDemand);
                    trackedAd = true;
                }
                break;
            case 'NDP_AdEvent_COMPLETE':
                trackedAd = false;
                streamingTag && streamingTag.stop();
                break;
            case 'NDP_PlaybackEvent_COMPLETE':
            case 'NDP_PlaybackEvent_PAUSE':
                streamingTag && streamingTag.stop();
                previousVideoStopped = true;
                break;
        }
    });
})();

</script><script>
//mbt nbcnews.com
/* globals $t, PARSELY */
(function() {
    var currentVideo = {};
    var blurred = false;
    //blur focus events
    window.addEventListener('blur', function() {
        if (currentVideo.playState === 'play') {
            blurred = true;
            PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
        }
    });
    window.addEventListener('focus', function() {
        if (currentVideo.playState === 'play' && blurred) {
            blurred = false;
            PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
        }
    });
    //video events
    $t('on', 'ndp_videoEvent', function(e, data) {
        if (window.PARSELY && window.PARSELY.video) {
            var eventData = data && data.videoData || {};
            var eventDataRaw = eventData.raw || {};

            var getPubDate = function() { return eventDataRaw.datePublished && (new Date(eventDataRaw.datePublished).getTime()) || 0; };

            switch (data.eventType) {
                case 'NDP_PlaybackEvent_START':
                    if (currentVideo && currentVideo.guid != eventDataRaw.guid) {
                        //end previous if it hadn't
                        if (typeof currentVideo.guid !== 'undefined' && !blurred) {
                            PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                        }
                        currentVideo = {
                            'guid': eventDataRaw.guid,
                            'mediaInfo': {
                                'title': eventDataRaw.headline && eventDataRaw.headline.primary || '', // required
                                'pub_date_tmsp': getPubDate(), // timestamp
                            },
                            'url': $t('dataLayer.canonical_url', document.location.href),
                            'playState': 'play'
                        };
                    }
                    if (!blurred) {
                        PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    }
                    break;
                case 'NDP_PlaybackEvent_PLAY':
                    //resume from pause
                    if (!blurred) {
                        PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    }
                    currentVideo.playState = 'play';
                    break;
                case 'NDP_PlaybackEvent_COMPLETE',
                'NDP_PlaybackEvent_PAUSE':
                    if (!blurred) {
                        PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    }
                    currentVideo.playState = 'pause';
                    break;

                default:
                    break;
            }
        }
    });
})();
</script><script type="text/javascript">
(function(customDomain) {
    function loadHorizon() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = location.protocol + '//ak.sail-horizon.com/spm/spm.v1.min.js';
        var x = document.getElementsByTagName('script')[0];
        x.parentNode.insertBefore(s, x);
        }
    loadHorizon();
    var oldOnLoad = window.onload;
    window.onload = function() { 
        if (typeof oldOnLoad === 'function') {
            oldOnLoad();
        }
        let customerId = "a839e8824b3cdd864a9ba3052205d70b";
        if(location.hostname.indexOf('today') >= 0) {
            customerId = "f0090744c0d73fb6594d580fbac227a5";
        } else if(location.hostname.indexOf('today') >= 0) {
            customerId = "18ce7874047066963cf21c55d2137291";
        }
        Sailthru.init({ customerId });
    };
})();     
</script><!-- START Parse.ly Include: Custom -->
<div id="parsely-root" style="display: none">
    <span id="parsely-cfg" data-parsely-site="nbcnews.com"></span>
<script id="parsely-script" async="" src="./M-050_files/p.js.Download"></script></div>
<script>
(function() {
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var cfgObj = document.getElementById('parsely-cfg');
    if (cfgObj) {
        cfgObj.setAttribute('data-parsely-site', topLevelDomain);
    }
})();

(function(s, p, d) {
    var h = d.location.protocol,
        i = p + "-" + s,
        e = d.getElementById(i),
        r = d.getElementById(p + "-root"),
        u = h === "https:" ? "d1z2jf7jlzjs58.cloudfront.net" : "static." + p + ".com";
    if (e) return;
    if(d.location.pathname.indexOf("embedded-video") >= 0) {
        var notrackScr = d.createElement(s);
        notrackScr.innerText = "PARSELY = { autotrack: false };";
        r.appendChild(notrackScr);
    }
    e = d.createElement(s);
    e.id = i;
    e.async = true;
    e.src = h + "//" + u + "/p.js";
    r.appendChild(e);
})("script", "parsely", document);
</script>
<!-- END Parse.ly Include: Custom --><!-- dtm_pageView track parsely -->
<script>
/* globals $t, PARSELY, s */
(function() {
    $t('on', 'dtm_pageView', function(e, data) {
        var pageIndex = $t(e.type + '.index', '0');
        var trackPage = (function() {
            var trackView = data.trackView !== false; //this will default all to true if not false
            // it looks like metadata is replaced instead of added to the page now, so must use omniture count instead
            var notFirst = s && s.contextData && s.contextData['news.scrollcount'] > 1;
            var inlineFront = notFirst && ($t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase() === 'front');

            return trackView && notFirst && !inlineFront;
        })();

        if (trackPage && window.PARSELY && window.PARSELY.beacon) {
            PARSELY.beacon.trackPageView({
                url: [location.protocol, '//', location.host, location.pathname].join(''), // URL to be tracked
                urlref: document.referrer, // Referring URL
                js: 1 // flag indicating this is dynamic
            });
        }
    });
})();
</script><script>
(function() {
    // neilson
    var canonicalUrl = document.URL;
    var d = new Image(1, 1);
    d.onerror = d.onload = function() {
        d.onerror = d.onload = null;
    };
    d.src = ["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-505401h&cg=0&cc=1&si=", escape(canonicalUrl), "&rp=", escape(document.referrer), "&ts=compact&rnd=", (new Date()).getTime()].join('');
})();
</script><script id="nielsenCustomMBT">
/* global, $t */
(function() {
    'use strict';
    //calculated on load
    //statics
    var noValue = 'not available';
    var extend = function(defaults, options) {
        var extended = {};
        var prop;
        for (prop in defaults) {
            if (Object.prototype.hasOwnProperty.call(defaults, prop)) {
                extended[prop] = defaults[prop];
            }
        }
        for (prop in options) {
            if (Object.prototype.hasOwnProperty.call(options, prop)) {
                extended[prop] = options[prop];
            }
        }
        return extended;
    };

    //setup brand settings per top level domain
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var brandSettings = {
        'nbcnews.com': {
            playerID: 'P35C41790-24D9-4BCD-9873-48B547719D85',
            vcid: 'c04'
        },
        'today.com': {
            playerID: 'P629EFCBC-BB38-416B-981A-0F18B5DDA193',
            vcid: 'c30'
        },
        'msnbc.com': {
            playerID: 'P85E5B977-5FE2-4654-A4A4-3AF8BAAF454E',
            vcid: 'c29'
        }
    };
    var currentBrand = brandSettings[topLevelDomain] || brandSettings['nbcnews.com']; //default to nbcnews

    var formatDate = function(dateStr) {
        //convert: Thu Nov 09 2017 16:32:29 GMT+0000 (UTC) convert to YYYYMMDD HH:MI:SS (20170705 11:41:32)
        function pad(number) {
            if (number <= 9) {
                number = '0' + number;
            }
            return number + '';
        }
        if (typeof dateStr !== 'string') {
            return false;
        }
        var date = new Date(dateStr);
        //return if its not a valid date
        if (isNaN(date.getTime())) { return false; }
        var timeString = pad(date.getUTCHours()) + ':' + pad(date.getUTCMinutes()) + ':' + pad(date.getUTCSeconds());

        return '' + date.getUTCFullYear() + pad(date.getUTCMonth() + 1) + pad(date.getUTCDate()) + ' ' + timeString;
    };

    var convertDuration = function(duration) {
        //if this is an ISO 8601 duration
        var ISO8601 = /^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;
        if (ISO8601.test(duration)) {
            var h = 0,
                m = 0,
                s = 0;
            var matches = ISO8601.exec(duration);
            if (matches[1]) h = Number(matches[1]);
            if (matches[2]) m = Number(matches[2]);
            if (matches[3]) s = Number(matches[3]);
            return h * 3600 + m * 60 + s;
        }
        //else return number
        return duration;
    };

    //expose function for custom values
    window.nielsenCutomValues = (function() {
        var customBuilder = function(context) {
            var eventDataRaw = context.eventDataRaw;
            var contentMetadataObject = context.contentMetadataObject;
            //just add all of them for now
            contentMetadataObject = extend(contentMetadataObject, {
                type: 'content',
                assetid: eventDataRaw.guid,
                program: eventDataRaw.source && eventDataRaw.source.name || 'NBC News', //not sure,
                title: eventDataRaw.headline && eventDataRaw.headline.primary || noValue,
                length: convertDuration(eventDataRaw.duration),
                mediaURL: eventDataRaw.canonicalUrl,
                airdate: formatDate(eventDataRaw.datePublished) || noValue,
                isfullepisode: 'n',
                //crossId1: eventDataRaw.guid, //not sure
                adloadtype: '2',
                hasAds: '2',
                //from nielsen
                clientid: 'us-800148',
                vcid: currentBrand.vcid
            });
            return contentMetadataObject;
        };
        customBuilder.playerID = currentBrand.playerID;
        return customBuilder;
    })();
})();
</script><script id="nielsenGlobalVideo">
/* globals $t, NOLBUNDLE */
// this is basicaly a copy of the adobe heartbeat global script.
// v1.8
(function() {
    // Add Static Queue Snippet
    ! function(t, n) {
        t[n] = t[n] || {
            nlsQ: function(e, o, c, r, s, i) {
                return s = t.document, r = s.createElement("script"), r.async = 1, r.src = ("http:" === t.location.protocol ? "http:" : "https:") + "//cdn-gl.imrworldwide.com/conf/" + e + ".js#name=" + o + "&ns=" + n, i = s.getElementsByTagName("script")[0], i.parentNode.insertBefore(r, i), t[n][o] = t[n][o] || {
                    g: c || {},
                    ggPM: function(e, c, r, s, i) {
                        (t[n][o].q = t[n][o].q || []).push([e, c, r, s, i]);
                    }
                }, t[n][o];
            }
        };
    }(window, "NOLBUNDLE");

    var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;

    // Created SDK Instance
    var playerID = (function(){
        if(window.nielsenCutomValues){
            return window.nielsenCutomValues.playerID;
        }else{
            //default to the nbcnews playerID
            return 'P35C41790-24D9-4BCD-9873-48B547719D85';
        }
    })();
    var _nSdkInstance = NOLBUNDLE.nlsQ(playerID, "nlsnInstance", {
        nol_sdkDebug: debugState ? "debug" : "off"
    });
    var _videoData = null; //video data populated in scope by event
    var _adData = null; //video data populated  
    var _stateInfo = {
        playheadPosition: 0,
        playState: 'stop',
        inAd: false
    };

    var stopSession = function() {
        if (_stateInfo.inAd === true) {
            // Only inside a midroll indicate <stop> for the ad
            _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
        } else if (_stateInfo.playState !== 'stop') {
            // Indicate <end> and <stop> for the content
            _nSdkInstance.ggPM('end', _stateInfo.playheadPosition);
            _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
        }
    };
    //set for unload with stop session
    window.addEventListener('beforeunload', stopSession);

    $t('on', 'ndp_videoEvent', function(e, data) {
        //populate scope data
        var eventSection = data.eventType.split('_')[1] || '';
        if (eventSection === 'AdEvent') {
            _adData = data; //populate scope data with video data
        } else if (eventSection === 'PlaybackEvent') {
            _videoData = data; //populate scope data with video data
        }

        //if this is a progress event, populate playhead and exit
        if (data.eventType.indexOf('PROGRESS') >= 0) {
            if (data.videoData && data.videoData.playheadPosition !== 0) {
                (function() {
                    var prevPlayheadPosition = _stateInfo.playheadPosition;
                    _stateInfo.playheadPosition = Math.round(data.videoData.playheadPosition / 1000);
                    //populate playhead to nielsen every second
                    if (prevPlayheadPosition != _stateInfo.playheadPosition) {
                        _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                    }
                })();
            }

            //let the first AdEvent_PROGRESS event through
            if (!(data.eventType === 'NDP_AdEvent_PROGRESS' && _stateInfo.inAd === false)) {
                return;
            }
        }

        var eventData = _videoData && _videoData.videoData || {};
        var eventDataRaw = eventData.raw || {};

        //default values, overwritten with custom
        var contentMetadataObject = {
            type: 'content',
            assetid: eventDataRaw.guid,
            program: eventDataRaw.source,
            title: eventDataRaw.title,
            length: eventDataRaw.duration,
            mediaURL: eventDataRaw.canonicalUrl,
            airdate: '', // 'YYYYMMDD HH:MI:SS'
            isfullepisode: 'n',
            //crossId1: 'Standard Episode ID',
            crossId2: eventDataRaw.guid,
            adloadtype: '2',
            hasAds: '2',
            //from nielsen
            clientid: 'us-800148',
            vcid: 'c04' //this is set for each brand also
        };

        if (window.nielsenCutomValues) {
            contentMetadataObject = window.nielsenCutomValues({
                'contentMetadataObject': contentMetadataObject,
                'eventDataRaw': eventDataRaw,
                '_stateInfo': _stateInfo
            });

        }

        //specific events
        switch (data.eventType) {
            case 'NDP_PlaybackEvent_LOADED':
                if (_stateInfo.playState === 'play') {
                    //if other video is started while in pause, close out last session, and reset values
                    stopSession();

                    _stateInfo.playState = 'stop';
                    _stateInfo.playheadPosition = 0;
                    _stateInfo.inAd = false;
                }

                _nSdkInstance.ggPM('loadMetadata', contentMetadataObject);
                break;

            case 'NDP_PlaybackEvent_START':
                _nSdkInstance.ggPM('loadMetadata', contentMetadataObject);
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);

                _stateInfo.playState = 'play';
                break;

            case 'NDP_PlaybackEvent_PLAY':
            case 'NDP_AdEvent_PLAY':
                //play was resumed (filter multiple plays)
                if (_stateInfo.playState === 'pause') {
                    _stateInfo.playState = 'play';
                    _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                }
                break;
            case 'NDP_PlaybackEvent_PAUSE':
            case 'NDP_AdEvent_PAUSE':
                _stateInfo.playState = 'pause';
                _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
                break;

            case 'NDP_PlaybackEvent_SEEK':
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                break;

            case 'NDP_PlaybackEvent_COMPLETE':
                stopSession();
                _stateInfo.playState = 'stop';
                _stateInfo.playheadPosition = 0;
                break;

            case 'NDP_AdEvent_START':
                //move all ad logic to progress
                break;

            case 'NDP_AdEvent_PROGRESS':
                //need flag since complete is always fired
                _stateInfo.inAd = true;
                //hardcoded pre-roll only
                var adMetadataObject = {
                    assetid: ('rand_' + (Math.random() * 36 * 100000 | 0).toString(36)),
                    type: 'preroll'
                };

                _nSdkInstance.ggPM('loadMetadata', adMetadataObject);
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);

                _stateInfo.playState = 'play';
                break;

            case 'NDP_AdEvent_COMPLETE':
                if (_stateInfo.inAd) {
                    _stateInfo.inAd = false;
                    _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                    _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);

                    _stateInfo.playheadPosition = 0;
                }
                break;

            default:
                break;
        }
    });
})();
</script><script>
/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
var Conviva=Conviva||{};(Conviva.r=function(){"use strict";if("undefined"==typeof Conviva.PrivateLoader){var a=Conviva.PrivateLoader={};!function(){var b=a.Client=function(a,f){function h(a,b){if(!(a instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");
if(!(b instanceof e))throw new Error("systemFactory parameter should be an instance of SystemFactory.");this._settings=a.clone(),this._systemFactory=b,this._systemFactory.configure("SDK",this._settings),
this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){i._id=E.uinteger32(),i._logger=i._systemFactory.buildLogger(),i._logger.setModuleName("Client"),
i._logger.info("init(): url="+i._settings.gatewayUrl+" customerKey="+i._settings.customerKey),i._config=i._systemFactory.buildConfig(),i._config.load(),i._sessionFactory=i._systemFactory.buildSessionFactory(i,i._settings,i._config),
i._logger.info("init(): done.")},function(a){throw new Error("Client constructor failed: "+a.message)})}var i=this;this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,
this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,h.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){
i._logger.info("release()"),i._sessionFactory.cleanup(),i._sessionFactory=null,i._globalSessionKey=-1,i._logger=null,i._id=-1,i._exceptionCatcher=null,i._settings=null,i._systemSettings=null,i._systemFactory=null,
i._released=!0})},this.createSession=function(a){var c=b.NO_SESSION_KEY;return this._released?c:null==a||a instanceof d?(this._exceptionCatcher.runProtected("Client.createSession",function(){c=i._sessionFactory.makeVideoSession(a);
}),c):(i._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),c)},this.reportError=function(a,b,c){return this._released?void 0:B.isValidString(b)?c!==Conviva.Client.ErrorSeverity.FATAL&&c!==Conviva.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+c):void this._exceptionCatcher.runProtected("Client.reportError",function(){
var d=i._sessionFactory.getVideoSession(a);null!=d&&d.reportError(b,c)}):void this._logger.error("reportError(): invalid error message string: "+b)},this.updateContentMetadata=function(a,b){return this._released?void 0:b instanceof d?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){
var c=i._sessionFactory.getVideoSession(a);if(null!=c){var d=b.clone();c.updateContentMetadata(d)}}):void i._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter");
},this.detachPlayer=function(a){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.detachPlayer()})},this.attachPlayer=function(a,b){
return this._released?void 0:b instanceof g?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var c=i._sessionFactory.getVideoSession(a);null!=c&&c.attachPlayer(b)}):void i._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter");
},this.contentPreload=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.contentPreload()})},this.contentStart=function(a){
this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.contentStart()})},this.sendCustomEvent=function(a,c,e){return this._released?void 0:B.isValidString(c)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){
if(a==b.NO_SESSION_KEY){if(i._globalSessionKey<0){var f=new d;i._globalSessionKey=i._sessionFactory.makeGlobalSession(f,null)}a=i._globalSessionKey}var g=B.ObjectShallowCopy(e),h=i._sessionFactory.getSession(a);
null!=h&&h.sendCustomEvent(c,g)}):void i._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(a,c,d,e){return this._released?void 0:c!==b.AdStream.CONTENT&&c!==b.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+c):d!==b.AdPlayer.CONTENT&&d!==b.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+d):e!==b.AdPosition.PREROLL&&e!==b.AdPosition.MIDROLL&&e!==b.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+e):void this._exceptionCatcher.runProtected("Client.adStart",function(){
var b=i._sessionFactory.getVideoSession(a);null!=b&&b.adStart(c,d,e)})},this.adEnd=function(a){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var b=i._sessionFactory.getVideoSession(a);
null!=b&&b.adEnd()})},this.cleanupSession=function(a){return this._released?void 0:a===b.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){
var b=i._sessionFactory.getVideoSession(a);null!=b&&i._sessionFactory.cleanupSession(a)})},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");
return new g(this._systemFactory)},this.releasePlayerStateManager=function(a){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){
a instanceof g&&a.release()})},this.getSettings=function(){return this._settings},this.getId=function(){return this._id}};b.version="2.117.0.31658",b.NO_SESSION_KEY=-2,b.AdPosition={PREROLL:"PREROLL",MIDROLL:"MIDROLL",
POSTROLL:"POSTROLL"},b.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},b.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},b.ErrorSeverity={FATAL:0,WARNING:1},b.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",
SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",UNKNOWN:"Unknown"};var c=a.ClientSettings=function(a){function b(a){if(!B.isValidString(a))throw new Error("customerKey must be valid");
this.customerKey=a}this._customerKey=null,B.defGet(this,"customerKey",function(){return this._customerKey}),B.defSet(this,"customerKey",function(a){B.isValidString(a)&&(this._customerKey=a)}),this._heartbeatInterval=c.defaultProductionHeartbeatInterval,
B.defGet(this,"heartbeatInterval",function(){return this._heartbeatInterval}),B.defSet(this,"heartbeatInterval",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._heartbeatInterval=b);
}}),this._gatewayUrl=c.defaultProductionGatewayUrl,B.defGet(this,"gatewayUrl",function(){return this._gatewayUrl}),B.defSet(this,"gatewayUrl",function(a){B.isValidString(a)&&(this._gatewayUrl=a)}),b.apply(this,arguments),
this.equals=function(a){return this.customerKey===a.customerKey&&this.gatewayUrl===a.gatewayUrl&&this.heartbeatInterval===a.heartbeatInterval},this.clone=function(){var a=new c(this.customerKey);return a.gatewayUrl=this.gatewayUrl,
a.heartbeatInterval=this.heartbeatInterval,a}};c.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",c.defaultProductionGatewayUrl="https://cws.conviva.com",c.defaultDevelopmentHeartbeatInterval=5,
c.defaultProductionHeartbeatInterval=20;var d=a.ContentMetadata=function(){function a(){return this._custom}function b(a){return null!=a&&"undefined"!=a&&"null"!=a&&""!=a}function c(a){if("object"==typeof a){
var c={};for(var d in a)if(b(d)){var e=a[d];b(e)&&(c[d]=e)}this._custom=c}}function e(){return this._defaultBitrateKbps}function f(a){this._defaultBitrateKbps=F.sanitizeSpecialIntegerValue(a)}function g(){
return this._streamType}function h(a){(a===d.StreamType.UNKNOWN||a===d.StreamType.VOD||a===d.StreamType.LIVE)&&(this._streamType=a)}function i(){return this._duration}function j(a){this._duration=F.sanitizeSpecialIntegerValue(a);
}function k(){return this._encodedFrameRate}function l(a){this._encodedFrameRate=F.sanitizeSpecialIntegerValue(a)}function m(){}this.assetName=null,this._custom={},B.defGet(this,"custom",a),B.defSet(this,"custom",c),
this._defaultBitrateKbps=-2,B.defGet(this,"defaultBitrateKbps",e),B.defSet(this,"defaultBitrateKbps",f),this.defaultResource=null,this.viewerId=null,this.applicationName=null,this.streamUrl=null,this._streamType=d.StreamType.UNKNOWN,
B.defGet(this,"streamType",g),B.defSet(this,"streamType",h),this._duration=-1,B.defGet(this,"duration",i),B.defSet(this,"duration",j),this._encodedFrameRate=-1,B.defGet(this,"encodedFrameRate",k),B.defSet(this,"encodedFrameRate",l),
m.apply(this,arguments),this.clone=function(){var a=new d;a.assetName=this.assetName,a.applicationName=this.applicationName,a.streamUrl=this.streamUrl,a.viewerId=this.viewerId,a.defaultBitrateKbps=this.defaultBitrateKbps,
a.defaultResource=this.defaultResource,a.streamType=this.streamType,a.duration=this.duration,a.encodedFrameRate=this.encodedFrameRate;for(var b in this.custom)a.custom[b]=this.custom[b];return a}};d.StreamType={
UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var e=a.SystemFactory=function(a,b){function c(a,b){if(!(a instanceof l))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=a,
this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,
this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,b instanceof f?this._settings=b.clone():this._settings=new f}var d=this;c.apply(this,arguments),
this.configure=function(a,b){this._packageName=a,this._clientSettings=b},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null;
};var e={build:function(){return new H(d._loggingInterface,d._timeInterface,d.getSettings(),d._logBuffer,d._packageName)}};this.buildLogger=function(){return e.build()},this.buildSessionFactory=function(a,b,c){
return new v(a,b,c,this)},this.buildPing=function(){return new D(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new w(this.buildTimer());
},this.buildCallbackWithTimeoutNoPing=function(){var a=null,b=new z(this.buildLogger(),a,this.getSettings()),c=new L(this.buildLogger(),this._timerInterface,b);return new w(c)},this.buildHttpClient=function(){
return new G(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new z(this.buildLogger(),this.buildPing(),this.getSettings());
},this.buildTime=function(){return new K(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new L(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){
return new I(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new x(this.buildLogger(),this.buildStorage(),this.buildJsonInterface());
},this.buildSystemMetadata=function(){return new J(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new q},this.buildGatewayControl=function(a){
return new A(a,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(a,b,c){var d=this.buildGatewayControl(b);return new t(this.buildEventQueue(),a,b,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),d,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),c);
},this.buildSession=function(a,b,c,d,e,f){var g=this.buildExceptionCatcher(),h=this.buildLogger(),i=this.buildCwsSession(a,b,c);return new u(d,e,f,c,this.buildSystemMetadata(),i,g,h)},this.buildEventQueue=function(){
return new y},this.buildJsonInterface=function(){return new r},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new C},f=a.SystemSettings=function(){
function a(){}this._logLevel=f.defaultProductionLogLevel,B.defGet(this,"logLevel",function(){return this._logLevel}),B.defSet(this,"logLevel",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);
b===a&&b>=f.LogLevel.DEBUG&&b<=f.LogLevel.ERROR&&(this._logLevel=b)}}),this._allowUncaughtExceptions=f.defaultProductionAllowUncaughtExceptions,B.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions;
}),B.defSet(this,"allowUncaughtExceptions",function(a){B.isBoolean(a)&&(this._allowUncaughtExceptions=a)}),this._storageTimeout=f.defaultStorageTimeout,B.defGet(this,"storageTimeout",function(){return this._storageTimeout;
}),B.defSet(this,"storageTimeout",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._storageTimeout=b)}}),this._httpTimeout=f.defaultHttpTimeout,B.defGet(this,"httpTimeout",function(){
return this._httpTimeout}),B.defSet(this,"httpTimeout",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._httpTimeout=b)}}),a.apply(this,arguments),this.equals=function(a){
return this.logLevel===a.logLevel&&this.allowUncaughtExceptions===a.allowUncaughtExceptions&&this.storageTimeout===a.storageTimeout&&this.httpTimeout===a.httpTimeout},this.clone=function(){var a=new f;return a.logLevel=this.logLevel,
a.allowUncaughtExceptions=this.allowUncaughtExceptions,a.storageTimeout=this.storageTimeout,a.httpTimeout=this.httpTimeout,a}};f.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},f.defaultDevelopmentLogLevel=f.LogLevel.DEBUG,
f.defaultProductionLogLevel=f.LogLevel.ERROR,f.defaultDevelopmentAllowUncaughtExceptions=!0,f.defaultProductionAllowUncaughtExceptions=!1,f.defaultStorageTimeout=10,f.defaultHttpTimeout=10;var g=a.PlayerStateManager=function(a){
function b(a){c._systemFactory=a,c._logger=c._systemFactory.buildLogger(),c._logger.setModuleName("PlayerStateManager"),c._exceptionCatcher=c._systemFactory.buildExceptionCatcher()}var c=this;c._monitorNotifier=null,
c._bitrateKbps=-2,c._playerState=g.PlayerState.UNKNOWN,c._currentMetadata={},c._renderedFrameRate=-2,c._encodedFrameRate=-2,c._duration=-2,c._playheadTimeMs=-1,c._bufferLengthMs=-1,c._playerVersion=null,
c._playerType=null,c._streamUrl=null,c._lastError=null,c._pendingErrors=[],c._released=!1,this.release=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=c._monitorNotifier&&c._monitorNotifier.onRelease(),
c.removeMonitoringNotifier(),c._systemFactory=null,c._logger=null,c._exceptionCatcher=null,c._released=!0})},this.getPlayheadTime=function(){return c._playheadTimeMs},this.setPlayheadTime=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayheadTime",function(){
c._playheadTimeMs=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onPlayheadTimeChange(c._playheadTimeMs)})},this.getBufferLength=function(){return c._bufferLengthMs},this.setBufferLength=function(a){
c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBufferLength",function(){c._bufferLengthMs=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onBufferLengthChange(c._bufferLengthMs);
})},this.getRenderedFrameRate=function(){return c._renderedFrameRate},this.setRenderedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setRenderedFrameRate",function(){
c._renderedFrameRate=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onRenderedFrameRateChange(c._renderedFrameRate)})},this.getEncodedFrameRate=function(){return c._encodedFrameRate;
},this.setEncodedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._encodedFrameRate=b,
null!=c._monitorNotifier&&c._monitorNotifier.onEncodedFrameRateChange(c._encodedFrameRate))})},this.getDuration=function(){return c._duration},this.setDuration=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){
var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._duration=b,null!=c._monitorNotifier&&c._monitorNotifier.onContentLengthChange(c._duration))})},this.getStreamUrl=function(){return c._streamUrl},this.setStreamUrl=function(a){
c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){c._streamUrl=a,null!=c._monitorNotifier&&c._monitorNotifier.onStreamUrlChange(c._streamUrl)})},this.getPlayerType=function(){
return c._playerType},this.setPlayerType=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){c._playerType=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerTypeChange(c._playerType);
})},this.getPlayerVersion=function(){return c._playerVersion},this.setPlayerVersion=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){c._playerVersion=a,
null!=c._monitorNotifier&&c._monitorNotifier.onPlayerVersionChange(c._playerVersion)})},this.setMonitoringNotifier=function(a,b){return c._released?void 0:null!=c._monitorNotifier?!1:(c._monitorNotifier=a,
c._logger.setSessionId(b),!0)},this.removeMonitoringNotifier=function(){c._released||(c._monitorNotifier=null,c._logger.setSessionId(null))},this.pushCurrentState=function(){c.setPlayerState(c.getPlayerState()),
c.setBitrateKbps(c.getBitrateKbps()),c.setDuration(c.getDuration()),c.setEncodedFrameRate(c.getEncodedFrameRate()),c.setPlayheadTime(c.getPlayheadTime()),c.setBufferLength(c.getBufferLength()),c.setStreamUrl(c.getStreamUrl()),
c.setPlayerType(c.getPlayerType()),c.setPlayerVersion(c.getPlayerVersion());for(var a=0;a<c._pendingErrors.length;a++){var b=c._pendingErrors[a];c.setError(b)}c._pendingErrors=[]},this.getPlayerState=function(){
return c._playerState},this.setPlayerState=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){g.isValidPlayerState(a)?(c._playerState=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerStateChange(c._playerState)):c._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+a);
})},this.getBitrateKbps=function(){return c._bitrateKbps},this.setBitrateKbps=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var b=F.sanitizeSpecialIntegerValue(a);
b>=-1&&(c._bitrateKbps=b,null!=c._monitorNotifier&&c._monitorNotifier.onBitrateChange(c._bitrateKbps))})},this.setSeekStart=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setSeekStart()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_START,a)})},this.setSeekEnd=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setSeekEnd()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setError=function(a){if(c._lastError=a,null!=c._monitorNotifier){var b=a.errorCode,d=a.severity;c._monitorNotifier.onError(b,d);
}else c._pendingErrors.push(a)},this.sendError=function(a,b){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var d=new Conviva.PrivateLoader.StreamerError(a,b);c.setError(d);
})},this.reset=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){c._bitrateKbps=-2,c._playerState=g.PlayerState.UNKNOWN,c._currentMetadata={},c._renderedFrameRate=-1,
c._encodedFrameRate=-1,c._duration=-1,c._playheadTimeMs=-1,c._bufferLengthMs=-1,c._playerVersion=null,c._playerType=null,c._streamUrl=null,c._lastError=null,c._pendingErrors=[]})},this.getError=function(){
return c._lastError},b.apply(c,arguments)};g.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},g.isValidPlayerState=function(a){
return a===g.PlayerState.STOPPED||a===g.PlayerState.PLAYING||a===g.PlayerState.BUFFERING||a===g.PlayerState.PAUSED||a===g.PlayerState.UNKNOWN||a===g.PlayerState.NOT_MONITORED?!0:!1},g.SEEK_ACTIONS_TYPE={
SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var h=a.HttpInterface=function(){this.makeRequest=function(a,b,c,d,e,f){},this.release=function(){}},i=a.LoggingInterface=function(){this.consoleLog=function(a,b){},
this.release=function(){}},j=a.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},
this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},
this.getOperatingSystemVersion=function(){},this.release=function(){}},k=a.StorageInterface=function(){this.saveData=function(a,b,c,d){},this.loadData=function(a,b,c){},this.release=function(){}},l=a.SystemInterface=function(a,b,c,d,e,f){
function g(a,b,c,d,e,f){B.validateInterface(a,new m,"TimeInterface"),B.validateInterface(b,new n,"TimerInterface"),B.validateInterface(c,new h,"HttpInterface"),B.validateInterface(d,new k,"StorageInterface"),
B.validateInterface(e,new j,"MetadataInterface"),B.validateInterface(f,new i,"LoggingInterface"),this._timeInterface=a,this._timerInterface=b,this._httpInterface=c,this._storageInterface=d,this._metadataInterface=e,
this._loggingInterface=f}g.apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),
this._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null;
}},m=a.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},n=a.TimerInterface=function(){this.createTimer=function(a,b,c){},this.release=function(){}},o=a.JSON2={};!function(){
function a(a){return 10>a?"0"+a:a}function b(a){return d.lastIndex=0,d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"';
}function c(a,d){var g,i,j,k,l,m=e,n=d[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(d,a,n)),typeof n){case"string":return b(n);case"number":
return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],Object.prototype.toString.apply(n)===Object.prototype.toString.apply([])){for(k=n.length,
g=0;k>g;g+=1)l[g]=c(g,n)||"null";return j=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(h&&"object"==typeof h)for(k=h.length,g=0;k>g;g+=1)"string"==typeof h[g]&&(i=h[g],
j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));return j=0===l.length?"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+m+"}":"{"+l.join(",")+"}",
e=m,j}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null;
},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,f,g,h;"function"!=typeof o.stringify&&(d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o.stringify=function(a,b,d){var g;if(e="",f="","number"==typeof d)for(g=0;d>g;g+=1)f+=" ";else"string"==typeof d&&(f=d);if(h=b,
b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON2.stringify");return c("",{"":a})})}();var p=a.JsonParse=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",
b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),b=c.charAt(a),a+=1,b},h=function(){
var a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,
isNaN(a)?void f("Bad number"):a},i=function(){var a,c,d,h="";if('"'===b)for(;g();){if('"'===b)return g(),h;if("\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d);
}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),
g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),
a;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=d(),
j(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k();
}},function(e,g){var h;return c=e,a=0,b=" ",h=d(),j(),b&&f("Syntax error"),"function"==typeof g?function i(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=i(e,c),
void 0!==d?e[c]=d:delete e[c]);return g.call(a,b,e)}({"":h},""):h}}(),q=a.CwsProtocol=function(){this.generateEvent=function(a,b,c,d){return d.seq=a,d.st=b,d.t=c,d},this.generateSessionEndEvent=function(a,b){
var c=q.EVENT_TYPE_SESSION_END,d={};return this.generateEvent(a,b,c,d)}};q.version="2.2",q.gatewayPath="/0/wsg",q.DEFAULT_CLIENT_ID="0",q.DEFAULT_MAX_HEARTBEAT_INFOS=0,q.DEFAULT_PLAYHEAD_TIME=-1,q.DEFAULT_BUFFER_LENGTH=-1,
q.SDK_METADATA_SCHEMA="sdk.js.1",q.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",q.EVENT_TYPE_ERROR="CwsErrorEvent",q.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",q.EVENT_TYPE_CUSTOM="CwsCustomEvent",q.EVENT_TYPE_SEEK="CwsSeekEvent",
q.RESPONSE_STATUS_NO_ERRORS="ok",q.RESPONSE_KEY_STATUS="err",q.RESPONSE_KEY_CLIENT_ID="clid",q.RESPONSE_KEY_CONFIG="cfg",q.RESPONSE_KEY_EVENTS="evs",q.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",
q.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",q.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",q.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",q.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",q.REQUEST_KEY_MESSAGE_TYPE="t",
q.REQUEST_KEY_SESSION_TIME="st",q.REQUEST_KEY_SESSION_START_TIME="sst",q.REQUEST_KEY_IS_LIVE="lv",q.REQUEST_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_KEY_CUSTOMER_KEY="cid",q.REQUEST_KEY_CLIENT_ID="clid",q.REQUEST_KEY_CLIENT_VERSION="clv",
q.REQUEST_KEY_PROTOCOL_VERSION="pver",q.REQUEST_KEY_INSTANCE_ID="iid",q.REQUEST_KEY_SESSION_ID="sid",q.REQUEST_KEY_VIEWER_ID="vid",q.REQUEST_KEY_ASSET_NAME="an",q.REQUEST_KEY_PLAYER_NAME="pn",q.REQUEST_KEY_TAGS="tags",
q.REQUEST_KEY_SESSION_FLAGS="sf",q.REQUEST_KEY_EVENTS="evs",q.REQUEST_KEY_LOGS="lg",q.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",q.REQUEST_KEY_IS_SDK_CLIENT="sdk",q.REQUEST_KEY_PAUSE_JOIN="pj",q.REQUEST_KEY_PLAYER_STATE="ps",
q.REQUEST_KEY_BITRATE="br",q.REQUEST_KEY_CONTENT_LENGTH="cl",q.REQUEST_KEY_ENCODED_FRAME_RATE="efps",q.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",q.REQUEST_KEY_RESOURCE="rs",q.REQUEST_KEY_PLAYHEAD_TIME="pht",
q.REQUEST_KEY_BUFFER_LENGTH="bl",q.REQUEST_KEY_STREAM_URL="url",q.REQUEST_KEY_CAPABILITIES="caps",q.REQUEST_KEY_PLATFORM_METADATA="pm",q.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",
q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",
q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",
q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",q.REQUEST_KEY_PROTOCOL_CAPP="caps",q.REQUEST_EVENT_KEY_TYPE="t",q.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",
q.REQUEST_EVENT_KEY_SESSION_TIME="st",q.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",q.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",q.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",q.REQUEST_ERROR_EVENT_KEY_FATAL="ft",q.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",
q.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",q.REQUEST_CUSTOM_EVENT_KEY_NAME="name",q.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",q.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",
q.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",q.convertPlayerState=function(a){switch(a){case g.PlayerState.STOPPED:return q.eStopped;case g.PlayerState.PLAYING:return q.ePlaying;case g.PlayerState.BUFFERING:
return q.eBuffering;case g.PlayerState.PAUSED:return q.ePaused;case g.PlayerState.NOT_MONITORED:return q.eNotMonitored;default:return q.eUnknown}},q.eStopped=1,q.ePlaying=3,q.eBuffering=6,q.ePaused=12,
q.eNotMonitored=98,q.eUnknown=100,q.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},q.Capabilities={INSIGHTS:0};var r=(a.JSONInterface=function(){this.encode=function(a){},this.decode=function(a){};
},a.LibJSONInterface=function(){this.encode=function(a){var b=null;try{b=o.stringify(a)}catch(c){}return b},this.decode=function(a){var b=null;try{b=p(a)}catch(c){}return B.isObject(b)||(b=null),b}}),s=a.CwsHeartbeat=function(){
function a(){}this._data={},a.apply(this,arguments),this.get=function(){return this._data},this.setField=function(a,b){this._data[a]=b},this.setInnerField=function(a,b,c){this._data[a]||(this._data[a]={}),
this._data[a][b]=c},this.setMessageType=function(a){this.setField(q.REQUEST_KEY_MESSAGE_TYPE,a)},this.setSessionTime=function(a){this.setField(q.REQUEST_KEY_SESSION_TIME,a)},this.setSessionStartTime=function(a){
this.setField(q.REQUEST_KEY_SESSION_START_TIME,a)},this.setIsLive=function(a){this.setField(q.REQUEST_KEY_IS_LIVE,a)},this.setSequenceNumber=function(a){this.setField(q.REQUEST_KEY_SEQUENCE_NUMBER,a)},
this.setCustomerKey=function(a){this.setField(q.REQUEST_KEY_CUSTOMER_KEY,a)},this.setClientId=function(a){this.setField(q.REQUEST_KEY_CLIENT_ID,a)},this.setClientVersion=function(a){this.setField(q.REQUEST_KEY_CLIENT_VERSION,a);
},this.setProtocolVersion=function(a){this.setField(q.REQUEST_KEY_PROTOCOL_VERSION,a)},this.setCapfield=function(a){this.setField(q.REQUEST_KEY_PROTOCOL_CAPP,a)},this.setSessionId=function(a){this.setField(q.REQUEST_KEY_SESSION_ID,a);
},this.setInstanceId=function(a){this.setField(q.REQUEST_KEY_INSTANCE_ID,a)},this.setViewerId=function(a){this.setField(q.REQUEST_KEY_VIEWER_ID,a)},this.setAssetName=function(a){this.setField(q.REQUEST_KEY_ASSET_NAME,a);
},this.setPlayerName=function(a){this.setField(q.REQUEST_KEY_PLAYER_NAME,a)},this.setTags=function(a){this.setField(q.REQUEST_KEY_TAGS,a)},this.setSessionFlags=function(a){this.setField(q.REQUEST_KEY_SESSION_FLAGS,a);
},this.setCapabilities=function(a){this.setField(q.REQUEST_KEY_CAPABILITIES,a)},this.setEvents=function(a){this.setField(q.REQUEST_KEY_EVENTS,a)},this.setIsSdkClient=function(a){this.setField(q.REQUEST_KEY_IS_SDK_CLIENT,a);
},this.setLogs=function(a){this.setField(q.REQUEST_KEY_LOGS,a)},this.setHeartbeatInfos=function(a){this.setField(q.REQUEST_KEY_HEARTBEAT_INFOS,a)},this.setPlayerState=function(a){this.setField(q.REQUEST_KEY_PLAYER_STATE,a);
},this.setPauseJoin=function(a){this.setField(q.REQUEST_KEY_PAUSE_JOIN,a)},this.setContentLength=function(a){this.setField(q.REQUEST_KEY_CONTENT_LENGTH,a)},this.setBitrate=function(a){this.setField(q.REQUEST_KEY_BITRATE,a);
},this.setResource=function(a){this.setField(q.REQUEST_KEY_RESOURCE,a)},this.setEncodedFrameRate=function(a){this.setField(q.REQUEST_KEY_ENCODED_FRAME_RATE,a)},this.setAverageFrameRate=function(a){this.setField(q.REQUEST_KEY_AVERAGE_FRAME_RATE,a);
},this.setPlatformMetadataSchema=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,a)},this.setBrowserName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,a);
},this.setBrowserVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,a)},this.setDeviceBrand=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,a);
},this.setDeviceManufacturer=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,a)},this.setDeviceModel=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,a);
},this.setDeviceType=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,a)},this.setDeviceVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,a);
},this.setFrameworkName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a)},this.setFrameworkVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,a);
},this.setOperatingSystemName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,a)},this.setOperatingSystemVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,a);
},this.setPlayheadTime=function(a){this.setField(q.REQUEST_KEY_PLAYHEAD_TIME,a)},this.setBufferLength=function(a){this.setField(q.REQUEST_KEY_BUFFER_LENGTH,a)},this.setStreamUrl=function(a){this.setField(q.REQUEST_KEY_STREAM_URL,a);
}},t=a.CwsSession=function(a,c,d,e,f,h,i,j,k,l,m){function n(a,b,c,d,e,f,g,h,i,j,k){this._eventQueue=a,this._client=b,this._clientSettings=c,this._logger=d,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=e,
this._timer=f,this._gatewayControl=g,this._cwsProtocol=h,this._time=i,this._logBuffer=j,this._clientConfig=k}var o=this;o._heartbeatTimerCancel=null,o._startTimeMs=0,o._heartbeatSequenceNumber=0,o._sessionFlags=q.SessionFlags.GLOBAL,
o._capabilities=q.Capabilities.INSIGHTS,o._heartbeatInfos=[],o._lastRequestSentMs=-1,o._bitrateKbps=-2,o._resource=null,o._playerState=g.PlayerState.NOT_MONITORED,o._encodedFrameRate=-1,o._contentLengthSec=-1,
o._bufferLengthMs=q.DEFAULT_BUFFER_LENGTH,o._playheadTimeMs=q.DEFAULT_PLAYHEAD_TIME,o._streamUrl=null,o._averageFrameRate=-1,o._assetName=null,o._viewerId=null,o._playerName=null,o._isLive=null,o._tags={},
o._browserName=null,o._browserVersion=null,o._deviceBrand=null,o._deviceManufacturer=null,o._deviceModel=null,o._deviceType=null,o._deviceVersion=null,o._frameworkName=null,o._frameworkVersion=null,o._operatingSystemName=null,
o._operatingSystemVersion=null,o._pauseJoin=!1,o._hasJoined=!1,o._cleanedUp=!1,o._willEndSoon=!1,n.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,
this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,
this._cleanedUp=!0},this.start=function(a){this._session=a,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),this.isVideoSession()&&(this._sessionFlags+=t.DEFAULT_VIDEO_SESSION_FLAGS);
},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){this.isVideoSession()&&(this._logger.debug("end(): schedule the last hb before session cleanup"+o.sessionTypeTag()),
this.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(a){
o._logger.debug("setBrowserName(): "+a);var b=o._browserName;b!==a&&null!=a&&(o._logger.debug("Change browserName from "+b+" to "+a),o._browserName=a)},this.setBrowserVersion=function(a){o._logger.debug("setBrowserVersion(): "+a);
var b=o._browserVersion;b!==a&&null!=a&&(o._logger.debug("Change browserVersion from "+b+" to "+a),o._browserVersion=a)},this.setDeviceBrand=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceBrand;
b!==a&&null!=a&&(o._logger.debug("Change deviceBrand from "+b+" to "+a),o._deviceBrand=a)},this.setDeviceManufacturer=function(a){o._logger.debug("setDeviceManufacturer(): "+a);var b=o._deviceManufacturer;
b!==a&&null!=a&&(o._logger.debug("Change deviceManufacturer from "+b+" to "+a),o._deviceManufacturer=a)},this.setDeviceModel=function(a){o._logger.debug("setDeviceModel(): "+a);var b=o._deviceModel;b!==a&&null!=a&&(o._logger.debug("Change deviceModel from "+b+" to "+a),
o._deviceModel=a)},this.setDeviceType=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceType;b!==a&&null!=a&&(o._logger.debug("Change deviceType from "+b+" to "+a),o._deviceType=a)},this.setDeviceVersion=function(a){
o._logger.debug("setDeviceVersion(): "+a);var b=o._deviceVersion;b!==a&&null!=a&&(o._logger.debug("Change deviceVersion from "+b+" to "+a),o._deviceVersion=a)},this.setOperatingSystemName=function(a){o._logger.debug("setOperatingSystemName(): "+a);
var b=o._operatingSystemName;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemName from "+b+" to "+a),o._operatingSystemName=a)},this.setOperatingSystemVersion=function(a){o._logger.debug("setOperatingSystemVersion(): "+a);
var b=o._operatingSystemVersion;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemVersion from "+b+" to "+a),o._operatingSystemVersion=a)},this.setBufferLengthMs=function(a){var b=o._bufferLengthMs;
b!==a&&a>=-1&&(o._logger.debug("Change buffer length from "+b+" to "+a),o._bufferLengthMs=a)},this.getFrameworkName=function(){return o._frameworkName},this.setFrameworkName=function(a){o._logger.debug("setFrameworkName(): "+a);
var b=o._frameworkName;b!==a&&null!=a&&(o._logger.debug("Change frameworkName from "+b+" to "+a),o._frameworkName=a)},this.getFrameworkVersion=function(){return o._frameworkVersion},this.setFrameworkVersion=function(a){
o._logger.debug("setFrameworkVersion(): "+a);var b=o._frameworkVersion;b!==a&&null!=a&&(o._logger.debug("Change frameworkVersion from "+b+" to "+a),o._frameworkVersion=a)},this.setPlayheadTimeMs=function(a){
var b=o._playheadTimeMs;b!==a&&a>=-1&&(o._logger.debug("Change playhead time from "+b+" to "+a),o._playheadTimeMs=a)},this.setStreamUrl=function(a){o._logger.debug("setStreamUrl(): "+a);var b=o._streamUrl;
b!==a&&null!=a&&(o._logger.debug("Change stream url from "+b+" to "+a),o.enqueueStreamUrlChangeEvent(b,a),o._streamUrl=a)},this.setBitrateKbps=function(a){o._logger.debug("setBitrateKbps(): "+a);var b=o._bitrateKbps;
b!==a&&a>=-1&&(o._logger.info("Change bitrate from "+b+" to "+a),o.enqueueBitrateChangeEvent(b,a),o._bitrateKbps=a)},this.setResource=function(a){o._logger.debug("setResource(): "+a);var b=o._resource;b!==a&&null!=a&&(o._logger.info("Change resource from "+b+" to "+a),
o.enqueueResourceChangeEvent(b,a),o._resource=a)},this.setAssetName=function(a){o._logger.debug("setAssetName(): "+a);var b=o._assetName;b!==a&&null!=a&&(o._logger.info("Change assetName from "+b+" to "+a),
o.enqueueAssetNameChangeEvent(b,a),o._assetName=a)},this.setIsLive=function(a){o._logger.debug("setIsLive(): "+a);var b=o._isLive;b!==a&&null!=a&&(o._logger.info("Change isLive from "+b+" to "+a),o._isLive=a);
},this.setViewerId=function(a){o._logger.debug("setViewerId(): "+a);var b=o._viewerId;b!==a&&null!=a&&(o._logger.info("Change viewerId from "+b+" to "+a),o._viewerId=a)},this.setPlayerName=function(a){
o._logger.debug("setPlayerName(): "+a);var b=o._playerName;b!==a&&null!=a&&(o._logger.info("Change playerName from "+b+" to "+a),o._playerName=a)},this.setTags=function(a){o._logger.debug("setTags()");var b=o._tags;
B.ObjectShallowEquals(b,a)||null==a||(o._logger.info("Change tags from "+B.ObjectToString(b)+" to "+B.ObjectToString(a)),o.enqueueTagsChangeEvent(b,a),o._tags=a)},this.setEncodedFrameRate=function(a){o._logger.debug("setEncodedFrameRate(): "+a),
o._encodedFrameRate=a},this.setAverageFrameRate=function(a){o._logger.debug("setAverageFrameRate(): "+a),o._averageFrameRate=a},this.setContentLength=function(a){o._logger.debug("setContentLength(): "+a),
o._contentLengthSec=a},this.setPlayerState=function(a){o._logger.debug("setPlayerState(): "+a),o._hasJoined||a!=g.PlayerState.PLAYING||(o.togglePauseJoin(!1),o._hasJoined=!0);var b=o._playerState;o._logger.info("setPlayerState(): changing player state from "+b+" to "+a),
o.enqueuePlayerStateChangeEvent(b,a),o._playerState=a},this.togglePauseJoin=function(a){if(o._logger.debug("togglePauseJoin()"),o._pauseJoin===a)return void o._logger.debug("togglePauseJoin(): same value, ignoring");
var b=o._pauseJoin,c=!o._pauseJoin;o.enqueuePauseJoinChangeEvent(b,c),o._pauseJoin=!o._pauseJoin},this.sendError=function(a,b){o.enqueueErrorEvent(a,b)},this.enqueueEvent=function(a,b){b[q.REQUEST_EVENT_KEY_TYPE]=a,
b[q.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),b[q.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._eventQueue.enqueue(b)},this.enqueueSessionEndEvent=function(){var a=this.getSessionTime(),b=this.getNextEventNumber(),c=this._cwsProtocol.generateSessionEndEvent(b,a);
this._eventQueue.enqueue(c)},this.enqueueTagsChangeEvent=function(a,b){var c=null;B.dictCount(a)>0&&(c={},c[q.REQUEST_KEY_TAGS]=a);var d={};d[q.REQUEST_KEY_TAGS]=b,this.declareStateChange(d,c)},this.enqueueAssetNameChangeEvent=function(a,b){
var c={};c[q.REQUEST_KEY_ASSET_NAME]=b,this.declareStateChange(c,null)},this.enqueueErrorEvent=function(a,b){var c={};c[q.REQUEST_ERROR_EVENT_KEY_MESSAGE]=a,c[q.REQUEST_ERROR_EVENT_KEY_FATAL]=b,this.enqueueEvent(q.EVENT_TYPE_ERROR,c);
},this.enqueueBitrateChangeEvent=function(a,b){var c={},d={};-1>a&&(a=-1),d[q.REQUEST_KEY_BITRATE]=a,c[q.REQUEST_KEY_BITRATE]=b,this.declareStateChange(c,d)},this.enqueueSeekEvent=function(a,b){var c={};
c[q.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=a,b>=0&&(c[q.REQUEST_EVENT_KEY_SEEK_TO_POS]=b),this.enqueueEvent(q.EVENT_TYPE_SEEK,c)},this.enqueueResourceChangeEvent=function(a,b){var c={},d={};null!==a&&(d[q.REQUEST_KEY_RESOURCE]=a),
c[q.REQUEST_KEY_RESOURCE]=b,this.declareStateChange(c,d)},this.enqueueStreamUrlChangeEvent=function(a,b){var c={},d={};null!==a&&(d[q.REQUEST_KEY_STREAM_URL]=a),c[q.REQUEST_KEY_STREAM_URL]=b,this.declareStateChange(c,d);
},this.enqueuePauseJoinChangeEvent=function(a,b){var c={},d={};d[q.REQUEST_KEY_PAUSE_JOIN]=a,c[q.REQUEST_KEY_PAUSE_JOIN]=b,this.declareStateChange(c,d)},this.enqueuePlayerStateChangeEvent=function(a,b){
var c={},d={};c[q.REQUEST_KEY_PLAYER_STATE]=q.convertPlayerState(b),d[q.REQUEST_KEY_PLAYER_STATE]=q.convertPlayerState(a),this.declareStateChange(c,d)},this.declareStateChange=function(a,b){var c={};c[q.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=a,
null!=b&&B.dictCount(b)>0&&(c[q.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=b),this.enqueueEvent(q.EVENT_TYPE_STATE_CHANGE,c)},this.enqueueCustomEvent=function(a,b){var c={};c[q.REQUEST_CUSTOM_EVENT_KEY_NAME]=a,
c[q.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=b,this.enqueueEvent(q.EVENT_TYPE_CUSTOM,c)},this.cancelHeartbeatTimer=function(){null!=o._heartbeatTimerCancel&&(o._heartbeatTimerCancel(),o._heartbeatTimerCancel=null);
},this.resetHeartbeatTimer=function(){o.cancelHeartbeatTimer();var a=1e3*o._clientSettings.heartbeatInterval;o._heartbeatTimerCancel=o._timer.create(o.sendHeartbeat,a,"Session.sendHeartbeat")},this.createHeartbeatInfo=function(){
var a={};a.err="pending",a.seq=o._heartbeatSequenceNumber-1,a.sentAt=o.getSessionTime(),a.rtt=-1,o._heartbeatInfos.push(a)},this.updateHeartbeatInfoOnFailure=function(a,b){for(var c=0;c<o._heartbeatInfos.length;c++){
var d=o._heartbeatInfos[c],e=d.seq;e===a&&(d.rtt=o.getSessionTime()-d.sentAt,d.err=b)}},this.updateHeartbeatInfoOnSuccess=function(a){for(var b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d=c.seq;
d===a&&(c.rtt=o.getSessionTime()-c.sentAt,c.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var a,b,c=o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS),d=[],e=0;e<o._heartbeatInfos.length;e++)b=o._heartbeatInfos[e],
a=b.seq,a<o._heartbeatSequenceNumber-c&&d.push(e);for(var f=[],g=0;g<o._heartbeatInfos.length;g++)b=o._heartbeatInfos[g],a=b.seq,d.indexOf(g)<0&&f.push(o._heartbeatInfos[g]);o._heartbeatInfos=f},this.compileHeartbeatInfos=function(){
o.removeOutdatedHeartbeatInfos();for(var a=[],b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d={};d[q.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=c.seq,d[q.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=c.rtt,
d[q.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=c.err,a.push(d)}return a},this.makeHeartbeat=function(){var a=new s;if(a.setMessageType(q.MESSAGE_TYPE_SESSION_HEARTBEAT),a.setCustomerKey(o._clientSettings.customerKey),
a.setClientId(o._clientConfig.get(x.CONFIG_KEY_CLIENT_ID)),a.setSessionId(o._session._id),a.setSequenceNumber(o._heartbeatSequenceNumber),a.setProtocolVersion(q.version),a.setClientVersion(b.version),a.setInstanceId(o._client.getId()),
a.setCapfield(0),a.setPlatformMetadataSchema(q.SDK_METADATA_SCHEMA),null!=o._browserName&&a.setBrowserName(o._browserName),null!=o._browserVersion&&a.setBrowserVersion(o._browserVersion),null!=o._deviceBrand&&a.setDeviceBrand(o._deviceBrand),
null!=o._deviceManufacturer&&a.setDeviceManufacturer(o._deviceManufacturer),null!=o._deviceModel&&a.setDeviceModel(o._deviceModel),null!=o._deviceType&&a.setDeviceType(o._deviceType),null!=o._deviceVersion&&a.setDeviceVersion(o._deviceVersion),
null!=o._frameworkName&&a.setFrameworkName(o._frameworkName),null!=o._frameworkVersion&&a.setFrameworkVersion(o._frameworkVersion),null!=o._operatingSystemName&&a.setOperatingSystemName(o._operatingSystemName),
null!=o._operatingSystemVersion&&a.setOperatingSystemVersion(o._operatingSystemVersion),null!=o._viewerId&&a.setViewerId(o._viewerId),null!=o._playerName&&a.setPlayerName(o._playerName),B.dictCount(o._tags)>0&&a.setTags(o._tags),
o.isVideoSession()){null!=o._assetName&&a.setAssetName(o._assetName),null!=o._isLive&&a.setIsLive(o._isLive),a.setSessionFlags(o._sessionFlags);var c=q.convertPlayerState(o._playerState);a.setPlayerState(c),
a.setPauseJoin(o._pauseJoin),o._contentLengthSec>0&&a.setContentLength(o._contentLengthSec),o._bitrateKbps>0&&a.setBitrate(o._bitrateKbps),null!==o._resource&&a.setResource(o._resource),o._encodedFrameRate>0&&a.setEncodedFrameRate(o._encodedFrameRate),
o._averageFrameRate>=0&&a.setAverageFrameRate(o._averageFrameRate),a.setPlayheadTime(o._playheadTimeMs),a.setBufferLength(o._bufferLengthMs),null!=o._streamUrl&&a.setStreamUrl(o._streamUrl)}else a.setSessionFlags(q.SessionFlags.GLOBAL);
a.setCapabilities(o._capabilities);var d=o._eventQueue.flush();if(o.isGlobalSession()&&0===d.length)return null;if(a.setEvents(d),a.setIsSdkClient(!0),o._clientConfig.get(x.CONFIG_KEY_SEND_LOGS)&&a.setLogs(o._logBuffer.flush()),
o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS)>0){var e=o.compileHeartbeatInfos();e.length>0&&a.setHeartbeatInfos(e)}return a.setSessionStartTime(o._startTimeMs),a.setSessionTime(o.getSessionTime()),
o._heartbeatSequenceNumber++,a.get()},this.sendHeartbeat=function(){if(!o._cleanedUp){var a=o.makeHeartbeat();null!=a&&o.postHeartbeat(a)}},this.postHeartbeat=function(a){o.createHeartbeatInfo();var b=o._heartbeatSequenceNumber-1;
o._logger.info("postHeartbeat(): Send HB["+b+"]"+o.sessionTypeTag());var c=function(a,c){o.onHeartbeatResponse(a,c,b)};o._gatewayControl.send(a,c)},this.onHeartbeatResponse=function(a,b,c){o._cleanedUp||o._exceptionCatcher.runProtected("onHeartbeatResponse",function(){
if(a){var d=b;if(null!=d){o._logger.debug("onHeartbeatResponse(): received valid response for HB["+c+"]"),o.updateHeartbeatInfoOnSuccess(c);var e=d[q.RESPONSE_KEY_CLIENT_ID];null!=e&&e!=o._clientConfig.get(x.CONFIG_KEY_CLIENT_ID)&&(o._logger.debug("onHeartbeatResponse(): setting the client id to "+e+" (from gateway)"),
o._clientConfig.set(x.CONFIG_KEY_CLIENT_ID,e),o._clientConfig.save());var f=d[q.RESPONSE_KEY_STATUS];null!=f&&f!=q.RESPONSE_STATUS_NO_ERRORS&&o._logger.error("onHeartbeatResponse(): error from gateway: "+f);
var g=d[q.RESPONSE_KEY_CONFIG];if("object"==typeof g){var h=g[q.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=h&&o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==h&&(o._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+h+" (from gateway)"),
o._clientConfig.set(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS,h));var i=g[q.RESPONSE_CONFIG_KEY_SEND_LOGS],j=null!=i?B.AsBoolean(i):!1;j!==o._clientConfig.get(x.CONFIG_KEY_SEND_LOGS)&&(o._logger.debug("onHeartbeatResponse(): turning "+(j?"on":"off")+" sending of logs"),
o._clientConfig.set(x.CONFIG_KEY_SEND_LOGS,j));var k=g[q.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=k){var l=B.Int32.Cast(k),m=l;m!=o._clientSettings.heartbeatInterval&&(o._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+m),
o._clientSettings.heartbeatInterval=m,null!=o._heartbeatTimerCancel&&o.resetHeartbeatTimer())}var n=g[q.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=n&&n!=o._clientSettings.gatewayUrl&&(o._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),
o._clientSettings.gatewayUrl=n)}}else o._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var p=b;B.isValidString(p)?B.stringStartsWith(p,"HTTP timeout")?o._logger.warning("onHeartbeatResponse(): "+p):o._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+p):(p=u.DEFAULT_HEARTBEAT_ERROR_MESSAGE,
o._logger.error("onHeartbeatResponse(): "+p)),o.updateHeartbeatInfoOnFailure(c,p)}})},this.getSessionTime=function(){var a=B.Int32.Cast(o._time.current()-o._startTimeMs);return a},this.getNextEventNumber=function(){
return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global},this.isVideoSession=function(){
return!this._global}};t.DEFAULT_VIDEO_SESSION_FLAGS=q.SessionFlags.VIDEO+q.SessionFlags.QUALITY_METRICS+q.SessionFlags.BITRATE_METRICS;var u=(a.IMonitor=function(){this.onPlayerStateChange=function(a){},
this.onBitrateChange=function(a){},this.onSeekEvent=function(a,b){},this.onEncodedFrameRateChange=function(a){},this.onRenderedFrameRateChange=function(a){},this.onContentLengthChange=function(a){},this.onPlayheadTimeChange=function(a){},
this.onStreamUrlChange=function(a){},this.onBufferLengthChange=function(a){},this.onPlayerTypeChange=function(a){},this.onPlayerVersionChange=function(a){},this.onError=function(a,b){},this.onRelease=function(){};
},a.Session=function(){function a(a,b,c,d,e,f,g,h){this._id=a,this._global=b,this._contentMetadata=c,this._clientConfig=d,this._systemMetadata=e,this._cwsSession=f,this._exceptionCatcher=g,this._logger=h,
this._logger.setModuleName("Session"),this._logger.setSessionId(B.ToString(this._id))}var b=this;b._contentMetadata=null,b._playerStateManager=null,b._id=0,b._global=!1,b._cleaningUp=!1,b._cleanedUp=!1,
b._adPlaying=!1,b._adStream=null,b._adPlayer=null,b._adPosition=null,b._ignorePlayerState=!1,b._pooledPlayerState=g.PlayerState.NOT_MONITORED,b._ignoreBitrateAndResource=!1,b._ignorePlayheadTimeandBufferLength=!1,
b._ignoreEncodedFrameRateAndDuration=!1,b._ignoreError=!1,b._playingFpsObservationCount=0,b._playingFpsTotal=0,a.apply(b,arguments),this.start=function(){if(b.isVideoSession()?b._logger.info("start(): assetName="+b._contentMetadata.assetName):b._logger.info("start()"+b.sessionTypeTag()),
b._cwsSession.start(this),b._clientConfig.isReady())b.initiateSession();else{var a=function(){b.initiateSession()};b._clientConfig.register(a)}},this.cleanup=function(){if(b._logger.info("cleanup()"+b.sessionTypeTag()),
b._cleaningUp=!0,b._cwsSession.willEndSoon(),b._clientConfig.isReady())b.endCwsSessionAndCleanupAll();else{var a=function(){b.endCwsSessionAndCleanupAll()};b._clientConfig.register(a)}},this.cleanupAll=function(){
b._logger.debug("cleanupAll()"+b.sessionTypeTag()),b.isVideoSession()&&null!=b._playerStateManager&&b.detachPlayer(),b._contentMetadata=null,b._logger.setSessionId(null),b._logger=null,b._exceptionCatcher=null,
b._client=null,b._clientConfig=null,b._systemMetadata=null,b._cwsSession.cleanup(),b._cwsSession=null,b._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){b._cwsSession.end(),b.cleanupAll()},this.initiateSession=function(){
b._cwsSession.initialize(),b.setStatesFromSystemMetadata(),b.isVideoSession()&&b.setStatesFromContentMetadata(),b._cwsSession.startSendingHeartbeats()},this.setStatesFromSystemMetadata=function(){b._logger.debug("setStatesFromSystemMetadata()");
var a=b._systemMetadata.get(),c=a[J.BROWSER_NAME];null!=c&&b._cwsSession.setBrowserName(c);var d=a[J.BROWSER_VERSION];null!=d&&b._cwsSession.setBrowserVersion(d);var e=a[J.DEVICE_BRAND];null!=e&&b._cwsSession.setDeviceBrand(e);
var f=a[J.DEVICE_MANUFACTURER];null!=f&&b._cwsSession.setDeviceManufacturer(f);var g=a[J.DEVICE_MODEL];null!=g&&b._cwsSession.setDeviceModel(g);var h=a[J.DEVICE_TYPE];null!=h&&b._cwsSession.setDeviceType(h);
var i=a[J.DEVICE_VERSION];null!=i&&b._cwsSession.setDeviceVersion(i);var j=a[J.FRAMEWORK_NAME];null!=j&&b._cwsSession.setFrameworkName(j);var k=a[J.FRAMEWORK_VERSION];null!=k&&b._cwsSession.setFrameworkVersion(k);
var l=a[J.OPERATING_SYSTEM_NAME];null!=l&&b._cwsSession.setOperatingSystemName(l);var m=a[J.OPERATING_SYSTEM_VERSION];null!=m&&b._cwsSession.setOperatingSystemVersion(m)},this.setStatesFromContentMetadata=function(){
if(b._logger.debug("setStatesFromContentMetadata()"),b._contentMetadata.defaultBitrateKbps>0&&b._cwsSession._bitrateKbps<0&&b._cwsSession.setBitrateKbps(b._contentMetadata.defaultBitrateKbps),null!=b._contentMetadata.defaultResource&&null==b._cwsSession._resource&&b._cwsSession.setResource(b._contentMetadata.defaultResource),
null!=b._contentMetadata.streamUrl&&null==b._cwsSession._streamUrl&&b._cwsSession.setStreamUrl(b._contentMetadata.streamUrl),b._contentMetadata.duration>0&&b._cwsSession.setContentLength(b._contentMetadata.duration),
b._contentMetadata.encodedFrameRate>0&&b._cwsSession.setEncodedFrameRate(b._contentMetadata.encodedFrameRate),b._contentMetadata.streamType!==d.StreamType.UNKNOWN){var a=b._contentMetadata.streamType===d.StreamType.LIVE;
b._cwsSession.setIsLive(a)}null!=b._contentMetadata.assetName&&b._cwsSession.setAssetName(b._contentMetadata.assetName),null!=b._contentMetadata.viewerId&&b._cwsSession.setViewerId(b._contentMetadata.viewerId),
null!=b._contentMetadata.applicationName&&b._cwsSession.setPlayerName(b._contentMetadata.applicationName),B.dictCount(b._contentMetadata.custom)>0&&b._cwsSession.setTags(b._contentMetadata.custom)},this.setRenderedFrameRate=function(a){
b._renderedFrameRate=a,b.updateAverageFrameRate()},this.updateAverageFrameRate=function(){if(b._cwsSession._playerState===g.PlayerState.PLAYING){var a=b._renderedFrameRate;if(a>=0){b._playingFpsTotal+=a,
b._playingFpsObservationCount++;var c=B.Int32.Cast(1*b._playingFpsTotal/b._playingFpsObservationCount);b._cwsSession.setAverageFrameRate(c)}}},this.onPlayerStateChange=function(a){return b._logger.debug("onPlayerStateChange(): "+a),
b._cwsSession._playerState!=a?(b._cwsSession._playerState==g.PlayerState.NOT_MONITORED&&a!=g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=a),b._ignorePlayerState?void b._logger.debug("onPlayerStateChange(): "+a+" (pooled, "+(b._adPlaying?"ad playing":"preloading")+")"):void b._cwsSession.setPlayerState(a)):void 0;
},this.onBitrateChange=function(a){return b._logger.debug("onBitrateChange(): "+a),b._ignoreBitrateAndResource?void b._logger.info("onBitrateChange(): ignored"):void b._cwsSession.setBitrateKbps(a)},this.onSeekEvent=function(a,c){
b._cwsSession.enqueueSeekEvent(a,c)},this.onRenderedFrameRateChange=function(a){b._logger.debug("onRenderedFrameRateChange(): "+a),b._ignoreEncodedFrameRateAndDuration?b._logger.info("onRenderedFrameRateChange(): Ignored rendered frame rate data: "+a+" (ads)"):(b.setRenderedFrameRate(a),
b._logger.info("onRenderedFrameRateChange(): Received rendered frame rate data: "+a))},this.onEncodedFrameRateChange=function(a){b._logger.debug("onEncodedFrameRateChange(): "+a),b._contentMetadata.encodedFrameRate>0||(a>0?b._ignoreEncodedFrameRateAndDuration?b._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+a+" (ads)"):(b._cwsSession.setEncodedFrameRate(a),
b._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+a)):b._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+a))},this.onContentLengthChange=function(a){
b._logger.debug("onContentLengthChange(): "+a),b._contentMetadata.duration>0||(a>0?b._ignoreEncodedFrameRateAndDuration?b._logger.info("setContentLength(): Ignored content length data: "+a+" (ads)"):(b._cwsSession.setContentLength(a),
b._logger.info("setContentLength(): Received content length data: "+a)):b._logger.warning("setContentLength(): Ignored invalid content length data: "+a))},this.onStreamUrlChange=function(a){b._logger.debug("onStreamUrlChange(): "+a),
b._cwsSession.setStreamUrl(a)},this.onPlayheadTimeChange=function(a){b._ignorePlayheadTimeandBufferLength||b._cwsSession.setPlayheadTimeMs(a)},this.onBufferLengthChange=function(a){b._ignorePlayheadTimeandBufferLength||b._cwsSession.setBufferLengthMs(a);
},this.onPlayerTypeChange=function(a){b._logger.debug("onPlayerTypeChange(): "+a),null==b._cwsSession.getFrameworkName()&&b._cwsSession.setFrameworkName(a)},this.onPlayerVersionChange=function(a){b._logger.debug("onPlayerVersionChange(): "+a),
null==b._cwsSession.getFrameworkVersion()&&b._cwsSession.setFrameworkVersion(a)},this.onError=function(a,c){b._logger.debug("onError(): "+a+" ("+c+")"),b.reportError(a,c)},this.onRelease=function(){b._logger.debug("onRelease()"),
b.detachPlayer()},this.adStart=function(a,c,d){return b._logger.debug("adStart(): adStream="+a+" adPlayer="+c+" adPosition="+d),b._adPlaying?void b._logger.warning("adStart(): multiple adStart calls, ignoring"):(b._adPlaying=!0,
b._adStream=a,b._adPlayer=c,b._adPosition=d,b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!0),void(b._adStream==Conviva.Client.AdStream.CONTENT||b._adPlayer==Conviva.Client.AdPlayer.SEPARATE?(b._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),
b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0):b._adStream==Conviva.Client.AdStream.SEPARATE&&b._adPlayer==Conviva.Client.AdPlayer.CONTENT&&(b._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),
b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0,b._ignoreBitrateAndResource=!0,b._ignoreEncodedFrameRateAndDuration=!0,b._ignorePlayheadTimeandBufferLength=!0,b._ignoreError=!0)));
},this.adEnd=function(){return b._logger.debug("adEnd()"),b._adPlaying?(b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!1),b._adStream==Conviva.Client.AdStream.CONTENT||b._adPlayer==Conviva.Client.AdPlayer.SEPARATE?b._preloading||(b._ignorePlayerState=!1,
b._cwsSession.setPlayerState(b._pooledPlayerState)):b._adStream==Conviva.Client.AdStream.SEPARATE&&b._adPlayer==Conviva.Client.AdPlayer.CONTENT&&(b._ignoreBitrateAndResource=!1,b._ignoreEncodedFrameRateAndDuration=!1,
b._ignorePlayheadTimeandBufferLength=!1,b._ignoreError=!1,b._preloading||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState))),b._adPlaying=!1,void(b._adStream=b._adPlayer=b._adPosition=null)):void b._logger.debug("adEnd(): called before adStart, ignoring");
},this.detachPlayer=function(){b._logger.debug("detachPlayer()"),null!==b._playerStateManager&&(b._exceptionCatcher.runProtected("Session.detachPlayer",function(){b._playerStateManager.removeMonitoringNotifier();
}),b._playerStateManager=null,b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED))},this.attachPlayer=function(a){return b._logger.debug("attachPlayer()"),null!=b._playerStateManager?void b._logger.error("attachPlayer(): detach current PlayerStateManager first"):void b._exceptionCatcher.runProtected("Session.attachPlayer()",function(){
a.setMonitoringNotifier(b,b._id)?(a.pushCurrentState(),b._playerStateManager=a):b._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})},this.contentPreload=function(){
return b._logger.debug("contentPreload()"),b._preloading?void b._logger.debug("contentPreload(): called twice, ignoring"):(b._preloading=!0,void(b._ignorePlayerState=!0))},this.contentStart=function(){
return b._logger.debug("contentStart()"),b._preloading?(b._preloading=!1,void(b._adPlaying||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState)))):void b._logger.warning("contentStart(): called without contentPreload, ignoring");
},this.reportError=function(a,c){if(b._logger.info("reportError(): "+a),!B.isValidString(a))return void b._logger.error("reportError(): invalid error message string: "+a);if(c!==Conviva.Client.ErrorSeverity.FATAL&&c!==Conviva.Client.ErrorSeverity.WARNING)return void b._logger.error("reportError(): invalid error severity: "+c);
if(b._ignoreError)return void b._logger.debug("reportError(): ignored");var d=c===Conviva.Client.ErrorSeverity.FATAL;b._cwsSession.sendError(a,d)},this.updateContentMetadata=function(a){b._logger.debug("updateContentMetadata(): enter"),
b._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){b.mergeContentMetadata(a),b.setStatesFromContentMetadata()})},this.sendCustomEvent=function(a,c){b._logger.info("sendEvent(): eventName="+a+b.sessionTypeTag()),
b._cwsSession.enqueueCustomEvent(a,c)},this.mergeContentMetadata=function(a){null==b._contentMetadata.assetName?B.isValidString(a.assetName)&&(b._contentMetadata.assetName=a.assetName,b._cwsSession.enqueueAssetNameChangeEvent(b._contentMetadata.assetName)):b._logger.warning("mergeContentMetadata(): assetName was already set."),
null==b._contentMetadata.applicationName?B.isValidString(a.applicationName)&&(b._contentMetadata.applicationName=a.applicationName):b._logger.warning("mergeContentMetadata(): applicationName was already set."),
null==b._contentMetadata.streamUrl?B.isValidString(a.streamUrl)&&(b._contentMetadata.streamUrl=a.streamUrl):b._logger.warning("mergeContentMetadata(): streamUrl was already set."),null==b._contentMetadata.viewerId?B.isValidString(a.viewerId)&&(b._contentMetadata.viewerId=a.viewerId):b._logger.warning("mergeContentMetadata(): viewerId was already set."),
b._contentMetadata.defaultBitrateKbps<=0?a.defaultBitrateKbps>0&&(b._contentMetadata.defaultBitrateKbps=a.defaultBitrateKbps):b._logger.warning("mergeContentMetadata(): defaultBitrateKbps was already set."),
null==b._contentMetadata.defaultResource?B.isValidString(a.defaultResource)&&(b._contentMetadata.defaultResource=a.defaultResource):b._logger.warning("mergeContentMetadata(): defaultResource was already set."),
b._contentMetadata.duration<=0?a.duration>0&&(b._contentMetadata.duration=a.duration):b._logger.warning("mergeContentMetadata(): duration was already set."),b._contentMetadata.encodedFrameRate<=0?a.encodedFrameRate>0&&(b._contentMetadata.encodedFrameRate=a.encodedFrameRate):b._logger.warning("mergeContentMetadata(): encodedFrameRate was already set."),
b._contentMetadata.streamType==d.StreamType.UNKNOWN?a.streamType!=d.StreamType.UNKNOWN&&(b._contentMetadata.streamType=a.streamType):b._logger.warning("mergeContentMetadata(): streamType was already set.");
var c={};for(var e in a.custom){var f=b._contentMetadata.custom[e];null==f?c[e]=a.custom[e]:b._logger.warning("mergeContentMetadata(): custom."+e+" was already set.")}if(B.dictCount(c)>0){var g={};for(e in b._contentMetadata.custom)g[e]=b._contentMetadata.custom[e];
for(e in c)g[e]=c[e];b._contentMetadata.custom=g}},this.isGlobalSession=function(){return b._global},this.isVideoSession=function(){return!b._global},this.sessionTypeTag=function(){return b.isGlobalSession()?" (global session)":"";
}});u.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var v=a.SessionFactory=function(){function a(a,c,d,e){b._client=a,b._clientSettings=c,b._clientConfig=d,
b._systemFactory=e,b._logger=b._systemFactory.buildLogger(),b._logger.setModuleName("SessionFactory"),b._nextSessionKey=0,b._sessionsByKey={}}var b=this;b._logger=null,b._logBuffer=null,b._nextSessionKey=0,
b._sessionsByKey=null,a.apply(b,arguments),this.cleanup=function(){b._logger=null,b._logBuffer=null;for(var a in b._sessionsByKey){var c=b._sessionsByKey[a];c.cleanup()}b._sessionsByKey=null,b._nextSessionKey=0;
},this.newSessionKey=function(){var a=b._nextSessionKey;return b._nextSessionKey++,a},this.makeVideoSession=function(a){return null==a&&(a=new d),b.makeSession(a,!1)},this.makeGlobalSession=function(a){
return b.makeSession(a,!0)},this.generateSessionId=function(){return E.integer32()},this.makeSession=function(a,c){var d=a.clone(a),e=b.generateSessionId(),f=b._systemFactory.buildSession(b._client,b._clientSettings,b._clientConfig,e,c,d),g=b.newSessionKey();
return b.addSession(g,f),f.start(),g},this.getSession=function(a){var c=b._sessionsByKey[a];return null==c&&b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c},this.getVideoSession=function(a){
var c=this.getSession(a);return null!=c&&(c.isVideoSession()||(b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c=null)),c},this.addSession=function(a,c){b._sessionsByKey[a]=c;
},this.removeSession=function(a){delete b._sessionsByKey[a]},this.cleanupSession=function(a){var c=b.getSession(a);b.removeSession(a),c.cleanup()}},w=a.CallbackWithTimeout=function(a){this._timer=a,this.getWrapperCallback=function(a,b,c){
var d=!1,e=function(){d||(d=!0,a(!1,c+" ("+b+" ms)"))};this._timer.createOnce(e,b,"CallbackWithTimeout.wrap");var f=function(b,c){d||(d=!0,a(b,c))};return f}},x=a.Config=function(a,b,c){var d=this;this._logger=a,
this._logger.setModuleName("Config"),this._storage=b,this._jsonInterface=c,this._defaultConfig={clientId:q.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:q.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=B.ObjectShallowCopy(this._defaultConfig),
this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){var a=function(a,b){a?(d._parse(b),d._logger.debug("load(): configuration successfully loaded from local storage"+(d._loadedEmpty?" (was empty)":"")+".")):d._logger.error("load(): error loading configuration from local storage: "+b),
d._loaded=!0,d._notify()};this._storage.load(x.STORAGE_KEY,a)},this._parse=function(a){var b=this._jsonInterface.decode(a);if(null==b)return void(this._loadedEmpty=!0);var c=b[x.CONFIG_STORAGE_KEY_CLIENT_ID];
null!=c&&c!=q.DEFAULT_CLIENT_ID&&""!=c&&"null"!=c&&(this._config[x.CONFIG_KEY_CLIENT_ID]=c,this._logger.debug("parse(): loaded clientId="+c+" (from local storage)"))},this._marshall=function(){var a={};
return a[x.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(a)},this.save=function(){
var a=function(a,b){a?d._logger.debug("save(): configuration successfully saved to local storage."):d._logger.error("save(): error saving configuration to local storage: "+b)};this._storage.save(x.STORAGE_KEY,this._marshall(),a);
},this.register=function(a){return this.isReady()?void a():void this._waitingConsumers.push(a)},this.get=function(a){return this._loaded?this._config[a]:null},this.set=function(a,b){this._loaded&&(this._config[a]=b);
},this._notify=function(){for(var a;null!=(a=this._waitingConsumers.shift());)a()}};x.STORAGE_KEY="sdkConfig",x.CONFIG_STORAGE_KEY_CLIENT_ID="clId",x.CONFIG_KEY_CLIENT_ID="clientId",x.CONFIG_KEY_SEND_LOGS="sendLogs",
x.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var y=a.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(a){this._events.push(a)},this.getNumber=function(){var a=this._nextEventNumber;
return this._nextEventNumber++,a},this.flush=function(){var a=this._events;return this._events=[],a}},z=a.ExceptionCatcher=function(a,b,c){this._logger=a,this._logger.setModuleName("ExceptionCatcher"),
this._ping=b,this._systemSettings=c,this.runProtected=function(a,b,c){try{b()}catch(d){if(null!=c)c(d);else{if(this._systemSettings.allowUncaughtExceptions)throw d;this.onUncaughtException(a,d)}}},this.onUncaughtException=function(a,b){
var c="Uncaught exception: "+a+": "+b.toString();if(null!=this._ping)try{this._ping.send(c)}catch(d){this._logger.error("Caught exception while sending ping: "+d.toString())}this._logger.error(c)}},A=a.GatewayControl=function(a,b,c,d){
var e=this;this._clientSettings=a,this._logger=b,this._logger.setModuleName("GatewayControl"),this._httpClient=c,this._jsonInterface=d,this.send=function(a,b){var c=this._jsonInterface.encode(a),d=this._clientSettings.gatewayUrl+q.gatewayPath,f=function(a,c){
if(a){var d=e._jsonInterface.decode(c);b(a,d)}else{var f=c;b(a,f)}};this._httpClient.request("POST",d,c,"application/json",f)}},B=a.Lang={};B.validateInterface=function(a,b,c){if(null==a)throw new Error("Expected "+c+" implementation is null.");
for(var d in b)if("function"!=typeof a[d])throw new Error("Expected method "+d+" in "+c+" implementation.")},B.dictCount=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},B.ToString=function(a){
return""+a},B.NumberToInt=function(a){return Math.floor(a)},B.NumberToUnsignedInt=function(a){return Math.abs(B.NumberToInt(a))},B.AsBoolean=function(a){return Boolean(a)},B.isValidString=function(a){return"string"==typeof a&&""!==a;
},B.stringStartsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b?!1:"function"==typeof a.indexOf?0===a.indexOf(b):!1},B.isBoolean=function(a){return"boolean"==typeof a},B.UrlEncodeString=function(a){
return escape(a)},B.isObject=function(a){return"object"==typeof a},B.ObjectToString=function(a){var b="";for(var c in a){var d=a[c],e=d;b+=c+"="+e}return"Object{"+b+"}"},B.ObjectShallowCopyOmitNull=function(a){
var b=B.ObjectShallowCopy(a);for(var c in b)null==b[c]&&delete b[c];return b},B.ObjectShallowCopy=function(a){var b={};for(var c in a)b[c]=a[c];return b},B.ObjectShallowEquals=function(a,b){if(typeof a!=typeof b)return!1;
if(a instanceof Object&&b instanceof Object){if(B.dictCount(a)!==B.dictCount(b))return!1;var c=!0;for(var d in a)if(c=a[d]===b[d],!c)return!1;return!0}return a===b},B.isInteger=function(a){if("number"!=typeof a)return!1;
var b=Math.round(a);return b===a},B.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},B.ArrayEquals=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;
for(var c=0;c<a.length;++c)if(B.isArray(a[c])&&B.isArray(b[c])){if(!B.ArrayEquals(a[c],b[c]))return!1}else if(a[c]!==b[c])return!1;return!0},B.isObjectDefinePropertyPresent=function(){return"undefined"!=typeof Object.defineProperty&&function(){
try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()},B.defGet=function(a,b,c){if(B.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c});else{
if("undefined"==typeof a.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");a.__defineGetter__(b,c)}},B.defSet=function(a,b,c){if(B.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{
configurable:!0,set:c});else{if("undefined"==typeof a.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");a.__defineSetter__(b,c)}},function(){
var a={};a.two32=4294967296,a.MaxValue=a.two32-1,a.MinValue=0,B.UInt32=a,B.UInt32.Cast=function(b){var c=parseInt(b,10);return c>a.MaxValue?c%=a.two32:c<a.MinValue&&(c=-c%a.two32,c=a.two32-c),c},B.UInt32.InRange=function(b){
var c=parseInt(b,10);return c<=a.MaxValue&&c>=a.MinValue};var b={};b.MaxValue=2147483647,b.MinValue=-2147483648,B.Int32=b,B.Int32.Cast=function(a){var c=parseInt(a,10);return c>b.MaxValue?c%=b.MaxValue:c<b.MinValue&&(c=-c%b.MaxValue,
c=b.MaxValue-c),c},B.Int32.InRange=function(a){var c=parseInt(a,10);return c<=b.MaxValue&&c>=b.MinValue}}();var C=a.LogBuffer=function(){var a=32;this._buffer=[],this.add=function(b){this._buffer.length>=a&&this._buffer.shift(),
this._buffer.push(b)},this.flush=function(){var a=this._buffer;return this._buffer=[],a}},D=a.Ping=function(a,c,d){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=a,this._logger.setModuleName("Ping"),
this._httpClient=c,this._clientSettings=d,this.send=function(a){if(!this._isSendingPing){this._isSendingPing=!0;var b=this.getBasePingUrl()+"&d="+B.UrlEncodeString(a.toString());this._logger.error("send(): "+b),
this._httpClient.request("GET",b,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var a=D.SERVICE_URL+"?comp="+D.COMPONENT_NAME+"&clv="+b.version;if(this._clientSettings&&(a+="&cid="+this._clientSettings.customerKey),
a+="&sch="+q.SDK_METADATA_SCHEMA,!this._clientSettings)return a;this._cachedBasePingUrl=a}return this._cachedBasePingUrl}};D.COMPONENT_NAME="sdkjs",D.SERVICE_URL="https://pings.conviva.com/ping.ping";var E=a.Random={};
E.maxUInt32=4294967295,E.maxInt32=2147483647,E.minInt32=-2147483648,E.integer32=function(){return Math.floor(Math.random()*E.maxUInt32)+E.minInt32},E.uinteger32=function(){return Math.floor(Math.random()*E.maxUInt32);
};var F=a.Sanitize={};F.Integer=function(a,b,c,d){if(isNaN(a))return d;if("number"!=typeof a)return d;if(a==d)return d;var e=B.NumberToInt(a);return F.EnforceBoundaries(e,b,c)},F.EnforceBoundaries=function(a,b,c){
return null!=c&&a>c?a=c:null!=b&&b>a&&(a=b),a},F.sanitizeSpecialIntegerValue=function(a){return-1==a||-2==a?a:a=F.Integer(a,0,null,-1)};var G=(a.StreamerError=function(){function a(a,b){c.errorCode=a,c.severity=b;
}var c=this;c.errorCode=null,c.severity=b.ErrorSeverity.FATAL,a.apply(c,arguments)},a.HttpClient=function(a,b,c,d){this._logger=a,this._logger.setModuleName("HttpClient"),this._httpInterface=b,this._callbackWithTimeout=c,
this._systemSettings=d,this.request=function(a,b,c,d,e){var f=1e3*this._systemSettings.httpTimeout,g=this._callbackWithTimeout.getWrapperCallback(e,f,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),
this._httpInterface.makeRequest(a,b,c,d,f,g)}}),H=a.Logger=function(a,b,c,d,e){this._loggingInterface=a,this._timeInterface=b,this._settings=c,this._logBuffer=d,this._packageName=e,this.debug=function(a){
this.log(a,f.LogLevel.DEBUG)},this.info=function(a){this.log(a,f.LogLevel.INFO)},this.warning=function(a){this.log(a,f.LogLevel.WARNING)},this.error=function(a){this.log(a,f.LogLevel.ERROR)},this.log=function(a,b){
var c=this.formatMessage(a,b);this._logBuffer.add(c),this._settings.logLevel<=b&&this._loggingInterface.consoleLog(c,b)},this.prependModuleName=function(a){var b=a;return b="["+this._moduleName+"] "+b},
this.prependPackageName=function(a){var b=a;return b="["+this._packageName+"] "+b},this.prependConvivaNamespace=function(a){var b=a;return b="[Conviva] "+b},this.prependTime=function(a){var b=this._timeInterface.getEpochTimeMs(),c=(b/1e3).toFixed(3).toString();
return"["+c+"] "+a},this.prependLogLevel=function(a,b){var c=H.getLogLevelString(b),d=a;return d="["+c+"] "+d},this.prependSessionId=function(a){var b=a;return null!=this._sessionId&&(b="sid="+this._sessionId+" "+b),
b},this.setSessionId=function(a){this._sessionId=a},this.setModuleName=function(a){this._moduleName=a},this.formatMessage=function(a,b){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(a))),b)));
}};H.getLogLevelString=function(a){var b;switch(a){case f.LogLevel.ERROR:b="ERROR";break;case f.LogLevel.WARNING:b="WARNING";break;case f.LogLevel.INFO:b="INFO";break;case f.LogLevel.DEBUG:b="DEBUG"}return b;
};var I=a.Storage=function(a,b,c,d){this._logger=a,this._logger.setModuleName("Storage"),this._storageInterface=b,this._callbackWithTimeout=c,this._systemSettings=d,this.load=function(a,b){var c=this._callbackWithTimeout.getWrapperCallback(b,1e3*this._systemSettings.storageTimeout,"storage load timeout");
this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(I.STORAGE_SPACE,a,c)},this.save=function(a,b,c){var d=this._callbackWithTimeout.getWrapperCallback(c,1e3*this._systemSettings.storageTimeout,"storage save timeout");
this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(I.STORAGE_SPACE,a,b,d)}};I.STORAGE_SPACE="Conviva";var J=a.SystemMetadata=function(a,c,d){this._logger=a,
this._logger.setModuleName("SystemMetadata"),this._metadataInterface=c,this._exceptionCatcher=d,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata;
},this.retrieve=function(){function a(a,b){d._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+a,function(){var c=b[a];b[a]=c.call(d._metadataInterface)})}var c={};c[J.BROWSER_NAME]=this._metadataInterface.getBrowserName,
c[J.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,c[J.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,c[J.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,c[J.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,
c[J.DEVICE_TYPE]=this._metadataInterface.getDeviceType,c[J.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,c[J.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,c[J.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,
c[J.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,c[J.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion;var d=this;this._logger.debug("retrieve(): calling MetadataInterface methods");
for(var e in c)a(e,c),B.isValidString(c[e])||delete c[e];c[J.DEVICE_TYPE]!==b.DeviceType.DESKTOP&&c[J.DEVICE_TYPE]!==b.DeviceType.CONSOLE&&c[J.DEVICE_TYPE]!==b.DeviceType.SETTOP&&c[J.DEVICE_TYPE]!==b.DeviceType.MOBILE&&c[J.DEVICE_TYPE]!==b.DeviceType.TABLET&&c[J.DEVICE_TYPE]!==b.DeviceType.SMARTTV&&delete c[J.DEVICE_TYPE],
this._cachedMetadata=B.ObjectShallowCopyOmitNull(c)}};J.BROWSER_NAME="browserName",J.BROWSER_VERSION="browserVersion",J.DEVICE_BRAND="deviceBrand",J.DEVICE_MANUFACTURER="deviceManufacturer",J.DEVICE_MODEL="deviceModel",
J.DEVICE_TYPE="deviceType",J.DEVICE_VERSION="deviceVersion",J.FRAMEWORK_NAME="frameworkName",J.FRAMEWORK_VERSION="frameworkVersion",J.OPERATING_SYSTEM_NAME="operatingSystemName",J.OPERATING_SYSTEM_VERSION="operatingSystemVersion";
var K=a.Time=function(a,b){this._timeInterface=a,this._logger=b,this._logger.setModuleName("Time"),this.current=function(){var a=this._timeInterface.getEpochTimeMs();return B.isInteger(a)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+a+")"),
a}},L=a.Timer=function(a,b,c){var d=this;this._logger=a,this._logger.setModuleName("Timer"),this._timerInterface=b,this._exceptionCatcher=c,this.create=function(a,b,c){var e=function(){d._exceptionCatcher.runProtected(c,function(){
a()})},f=this.createTimer(e,b,c);return f},this.createOnce=function(a,b,c){var e={cancel:null},f=function(){d._exceptionCatcher.runProtected(c,function(){e&&"function"==typeof e.cancel&&(e.cancel(),e.cancel=null,
e=null),a()})},g=this.createTimer(f,b,c);return e.cancel=g,g},this.createTimer=function(a,b,c){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(a,b,c);
}}}(),Conviva.Client=a.Client,Conviva.ContentMetadata=a.ContentMetadata,Conviva.PlayerStateManager=a.PlayerStateManager,Conviva.SystemSettings=a.SystemSettings,Conviva.ClientSettings=a.ClientSettings,Conviva.SystemInterface=a.SystemInterface,
Conviva.HttpInterface=a.HttpInterface,Conviva.TimeInterface=a.TimeInterface,Conviva.TimerInterface=a.TimerInterface,Conviva.LoggingInterface=a.LoggingInterface,Conviva.MetadataInterface=a.MetadataInterface,
Conviva.StorageInterface=a.StorageInterface,Conviva.SystemFactory=a.SystemFactory}})();
</script><script>
/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */

// Monitor a HTML5 video element and reports relevant video quality data
// to Conviva via Conviva.PlayerStateManager.
// Tested for progressive download streams in Chrome, on Mac and Windows devices.

/** How often do we poll the streamer */
Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS /* : int */ = 500;

/** The number of POLL intervals after which we switch to PAUSED state if PHT does not move */
Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT /* : int */ = 4000 / Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS;

/** The number of POLL intervals after which we switch to PLAY state if PHT moves as for playing */
Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT /* : int */ = 2000 / Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS;

/** The expected value of average phSpeed for PLAYING state */
Html5PlayerInterface.PHT_PLAY_EXPECTED_SPEED /* : int */ = 1;

/** The expected value of average phSpeed for PAUSED/BUFFERING state */
Html5PlayerInterface.PHT_PAUSED_EXPECTED_SPEED /* : int */ = 0;

/** Threshold to further compensate for variance in average phSpeed values */
Html5PlayerInterface.PHT_PLAY_TOLERANCE /* : int */ = 0.25;

function Html5PlayerInterface(playerStateManager, videoElement) {

    // "this" binding for callbacks
    var _s = this;
    var enableLogging = false; //enable to turn on logging 

    _s._lastPlayHeadTimeSpeeds /* : array */ = [];

    // We happen to reuse some of the system interfaces we defined to bootstrap the Conviva SDK here.
    // We could use system APIs directly as well.
    this._timerInterface = new Html5Timer();
    this._loggingInterface = new Html5Logging();

    this._addEventListener = function(eventName, eventListener, eventSource) {
        // Shorthand
        if (typeof eventSource === 'undefined') {
            eventSource = _s._videoElement;
        }

        // Remember what event we are listening to, on what source and through which listener.
        _s._eventListeners.push([eventName, eventListener, eventSource]);

        if (window.addEventListener) {
            eventSource.addEventListener(eventName, eventListener, false);
        } else {
            eventSource.attachEvent('on' + eventName, eventListener);
        }
    };

    this._removeEventListener = function(eventName, eventListener, eventSource) {
        if (typeof eventSource === 'undefined') {
            eventSource = _s._videoElement;
        }

        if (window.removeEventListener) {
            eventSource.removeEventListener(eventName, eventListener, false);
        } else {
            eventSource.detachEvent('on' + eventName, eventListener);
        }
    };

    this._registerVideoEventListeners = function() {
        _s._addEventListener("ended", function() {
            _s._receivedHtml5Event("ended");
        });
        _s._addEventListener("pause", function() {
            _s._receivedHtml5Event("pause");
        });
        _s._addEventListener("playing", function() {
            _s._receivedHtml5Event("playing");
        });
        _s._addEventListener("emptied", function() {
            _s._receivedHtml5Event("emptied");
        });
        _s._addEventListener("stalled", function() {
            if (_s._videoElement.paused) {
                // Viewer experience will not be affected by the lack of data
                // if the video is not actively playing.
                // So we do not consider this experience-impacting buffering.
                _s._log("Ignored stalled event (player was paused)");
                return;
            }
            //_s._receivedHtml5Event("stalled");
            //Ignore stalled event completely
        });
        _s._addEventListener("waiting", function() {
            if (_s._videoElement.seeking) {
                // Some HTML5 video element implementations send out tons of 
                // "waiting" events while seeking.
                // So we do not consider this experience-impacting buffering.
                _s._log("Ignored waiting event (player was seeking)");
                return;
            }
            _s._receivedHtml5Event("waiting");
        });
        _s._addEventListener("error", function() {
            // Sometimes triggers without an error attached.
            if (_s._videoElement.error) {
                var html5ErrorCode = _s._videoElement.error.code;
                _s._reportHtml5Error(html5ErrorCode);
            }
        });
        _s._addEventListener("loadedmetadata", _s._loadedMetadata);
        _s._addEventListener("seeking", function() {
            if (!_s.isSeekStarted) {
                _s._log('player is seeeking');
                _s.isSeekStarted = true;
                _s._playerStateManager.setSeekStart(-1);
            }
        });
        _s._addEventListener("seeked", function() {
            _s._log('player is seeked');
            _s.isSeekStarted = false;
            _s._playerStateManager.setSeekEnd();
        });

        // Monitor error events from nested <source> elements as well.
        _s._monitorErrorsFromSourceElements();
    };

    this._monitorErrorsFromSourceElements = function() {
        if (typeof _s._videoElement.children !== "undefined") {
            var sourceElementErrorHandler = function() {
                // <source> elements do not provide an actual error code
                _s._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN");
                _s._reportHtml5Error(0);
            };
            _s._videoElement._sources = _s._videoElement.children;
            for (var i = 0; i < _s._videoElement._sources.length; i++) {
                var source = _s._videoElement._sources[i];
                if (source.tagName == "SOURCE") {
                    _s._addEventListener("error", sourceElementErrorHandler, source);
                }
            }
        }
    };

    this._removeVideoEventHandlers = function() {
        for (var i = 0; i < _s._eventListeners.length; i++) {
            var evNameHandler = _s._eventListeners[i];
            _s._removeEventListener(evNameHandler[0], evNameHandler[1], evNameHandler[2]);
        }
        _s._eventListeners = [];
    };

    // Sometimes we may start monitoring the HTML5 video element late.
    // This method attempts to deduce the current Conviva player state without relying
    // on HTML5 video element events.
    this._findCurrentState = function() {
        _s._prevReadyState = _s._videoElement.readyState;

        if (_s._videoElement.readyState === 0) {
            // Nothing happened yet
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED);
        } else if (_s._videoElement.ended) {
            // Video playback already ended
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED);
        } else if (_s._videoElement.paused || _s._videoElement.seeking) {
            // Video playback is currently paused.
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);
        } else {
            // Otherwise we must be actively playing video
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);
        }
        // Perhaps we have received some metadata already
        if (_s._videoElement.readyState >= _s._videoElement.HAVE_METADATA) {
            _s._loadedMetadata();
        }
    };

    // Extract Conviva video quality data from HTML5 video element events.
    this._receivedHtml5Event = function(html5Event) {
        var convivaPlayerState = _s._convertHtml5EventToConvivaPlayerState(html5Event);

        _s._log("Received HTML5 event: " + html5Event + ". Mapped to Conviva player state: " + convivaPlayerState);

        _s._updateConvivaPlayerState(convivaPlayerState);
    };

    this._updateConvivaPlayerState = function(newConvivaPlayerState) {
        if (_s._playerStateManager.getPlayerState() !== newConvivaPlayerState) {
            _s._log("Changing Conviva player state to: " + newConvivaPlayerState);

            // Report the new player state to Conviva.
            _s._playerStateManager.setPlayerState(newConvivaPlayerState);
            // reset the PHT calculation on state change
            _s._resetPlayHeadTimes();
            // Failsafe to avoid overcorrecting the player state when we just changed it.
            _s._playerStateRecentlyChanged = true;
        }
    };

    // Maps relevant HTML5 video element events to the corresponding Conviva player state.
    this._convertHtml5EventToConvivaPlayerState = function(html5Event) {
        switch (html5Event) {
            case "playing":
                return Conviva.PlayerStateManager.PlayerState.PLAYING;
            case "waiting":
                return Conviva.PlayerStateManager.PlayerState.BUFFERING;
            case "ended":
            case "stopped":
                return Conviva.PlayerStateManager.PlayerState.STOPPED;
            case "pause":
                return Conviva.PlayerStateManager.PlayerState.PAUSED;
            default:
                return Conviva.PlayerStateManager.PlayerState.UNKNOWN;
        }
    };

    // Converts HTML5 video element errors to human-readable Conviva errors.
    // See http://dev.w3.org/html5/spec-author-view/video.html#error-codes
    this._reportHtml5Error = function(html5ErrorCode) {
        var html5ErrorMessage;
        switch (html5ErrorCode) {
            case 1:
                html5ErrorMessage = "MEDIA_ERR_ABORTED";
                break;
            case 2:
                html5ErrorMessage = "MEDIA_ERR_NETWORK";
                break;
            case 3:
                html5ErrorMessage = "MEDIA_ERR_DECODE";
                break;
            case 4:
                html5ErrorMessage = "MEDIA_ERR_SRC_NOT_SUPPORTED";
                break;
            default:
                html5ErrorMessage = "MEDIA_ERR_UNKNOWN";
        }

        _s._log("Reporting error: code=" + html5ErrorCode + " message=" + html5ErrorMessage);

        // HTML5 players generally do not recover from these errors,
        // so we mark all errors as fatal.
        // If the player does recover and the video starts playing,
        // the Conviva Platform will ignore the error.
        var html5ErrorSeverity = Conviva.Client.ErrorSeverity.FATAL;

        // Report the error to Conviva.
        _s._playerStateManager.sendError(html5ErrorMessage, html5ErrorSeverity);
    };

    // When metadata is available, we extract the duration of the video and report it.
    this._loadedMetadata = function() {
        var dur = _s._videoElement.duration;
        if (!isNaN(dur) && dur != Infinity) {
            // Report the duration to Conviva.
            _s._playerStateManager.setDuration(dur);
        }
    };

    // Regularly poll for the current position in the video and current buffer length
    this._startPolling = function() {
        this._previousPosition = 0;
        this._currentPosition = 0;
        this._currentBufferLength = 0;
        this._pollingTimerCancel = this._timerInterface.createTimer(
            this._poll,
            500, // check updated position every 500 milliseconds
            "Html5PlayerInterface._poll()"
        );
    };

    this._poll = function() {
        _s._pollPosition();
        _s._pollBufferLength();
        _s._inferPlayerStateFromPosition();
    };

    this._pollPosition = function() {
        // Get the current position in the video.
        _s._previousPosition = _s._currentPosition;
        _s._currentPosition = _s._videoElement.currentTime;

        now = Date.now();
        if (_s._lastPollTime > 0 && now > _s._lastPollTime) {
            // We ignore the first POLL, and out-of-band Poll (happen when we send the HB)
            currentPhtSpeed = ((_s._currentPosition - _s._previousPosition) / (now - _s._lastPollTime)) * 1000;
            // New entry will be added to end of array
            _s._lastPlayHeadTimeSpeeds.push(currentPhtSpeed);
        }
        _s._lastPollTime = now;

        if (_s._lastPlayHeadTimeSpeeds.length > Math.max(Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT,
                Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT)) {
            // Drop the first entry in the array (the oldest)
            _s._lastPlayHeadTimeSpeeds.shift();
        }

        // Report to Conviva, in milliseconds
        _s._playerStateManager.setPlayheadTime(_s._currentPosition * 1000);
    };

    this._pollBufferLength = function() {
        var buffered = _s._videoElement.buffered;
        if (buffered === undefined) return;

        // Find all buffered segments ahead of the current position and add up the lengths
        // to figure out how long content can keep playing with the data already downloaded.
        var bufferLength = 0;
        for (var i = 0; i < buffered.length; i++) {
            var start = buffered.start(i);
            var end = buffered.end(i);
            if (start <= _s._currentPosition && _s._currentPosition < end) {
                bufferLength += end - _s._currentPosition;
            }
        }

        _s._currentBufferLength = bufferLength;

        // Report to Conviva, in milliseconds
        _s._playerStateManager.setBufferLength(_s._currentBufferLength * 1000);
    };

    // Sometimes we can't rely on HTML5 video element waiting/emptied/stalled/playing events,
    // they simply won't trigger. In those scenarios, the current position in the video
    // can be a more accurate indicator of whether content is actively playing.

    // The general idea is then for us to regularly query the current position in the video,
    // compare it to previous values, and adjust the current Conviva player state based
    // on whether the video is progressing or not:
    // - If the current Conviva player state is not "playing", and the video is progressing,
    //   we correct the Conviva player state to "playing".
    // - If the current Conviva player state is "playing", and the video is not progressing,
    //   we check whether the video is paused. If it is, we correct the Conviva player state
    //   to "paused". Otherwise, we must be stalled, so we correct the Conviva player state to "buffering".

    // Note that for live streaming content, some video players do not maintain a reliable value
    // for the current position inside the video stream.
    this._inferPlayerStateFromPosition = function() {
        // Compare the current position with the last observation.
        // If different, video playback has progressed since we last checked.
        // PD-12813: extended to all HTML5 platforms for playbackRate support
        var numPhSpeedSamples /* : int */ = _s._lastPlayHeadTimeSpeeds.length;
        if (numPhSpeedSamples >= Math.min(Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT, Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT)) {
            var avgSpeed /* : Number */ = 0.0;
            var phtSamples = _s._lastPlayHeadTimeSpeeds.slice();
            for (var index = 0; index < phtSamples.length; index++) {
                var phSpeed /* : Number */ = phtSamples[index];
                avgSpeed += phSpeed;
            }
            avgSpeed /= numPhSpeedSamples;

            var adjustedPlayingSpeed /* : Number */ = Html5PlayerInterface.PHT_PLAY_EXPECTED_SPEED;
            var adjustedPlayingSpeedTolerance /* : Number */ = Html5PlayerInterface.PHT_PLAY_TOLERANCE;

            // PD-12813: adjust based on playbackRate if present and positive (couldn't get negative values to actually rewind)
            var pbRate /* : Number */ = _s._videoElement.playbackRate;
            if (!isNaN(pbRate) && pbRate != Infinity && pbRate > 0) {
                // PD-12813: Safari doesn't handle playbackRate < 0.5. Others?
                isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
                if (isSafari && pbRate < 0.5) {
                    pbRate = 0.5;
                }
                adjustedPlayingSpeed = adjustedPlayingSpeed * pbRate;
                adjustedPlayingSpeedTolerance = adjustedPlayingSpeedTolerance * pbRate;
                // PD-12813: safer to reset speeds and return? Didn't seem necessary so far.
                //_s._resetPlayHeadTimes();
            }

            // Get the current Conviva player state.
            var currentConvivaState = _s._playerStateManager.getPlayerState();
            if (currentConvivaState != Conviva.PlayerStateManager.PlayerState.PLAYING && numPhSpeedSamples >= Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT && Math.abs(avgSpeed - adjustedPlayingSpeed) < adjustedPlayingSpeedTolerance) {
                _s._log("Adjusting Conviva player state to: PLAYING");
                _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);
                return;
            }

            if (currentConvivaState == Conviva.PlayerStateManager.PlayerState.PLAYING && numPhSpeedSamples >= Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT && avgSpeed == Html5PlayerInterface.PHT_PAUSED_EXPECTED_SPEED) {
                if (_s._videoElement.paused) {
                    _s._log("Adjusting Conviva player state to: PAUSED");
                    _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);
                } else if (_s._videoElement.seeking) {
                    // If we are seeking, stick with the current player state for now.
                } else {
                    _s._log("Adjusting Conviva player state to: BUFFERING");
                    _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING);
                }
                return;
            }
        }
        // Removing Old Logic
        /*_s._positionDelta = Math.abs(_s._previousPosition - _s._currentPosition);

        // Ignore large position increments most likely due to seeking.
        // Can't rely on HTML5 video "seeking" events or "seeking" property for that.
        if (_s._positionDelta > 1) return;

        // To prevent cascading state changes, only adjust the player state
        // based on position observations within the same player state
        if (_s._playerStateRecentlyChanged) {
            _s._playerStateRecentlyChanged = false;
            return;
        }

        var videoProgressed = _s._positionDelta !== 0;

        // Get the current Conviva player state.
        var currentConvivaState = _s._playerStateManager.getPlayerState();

        // Verify that the current Conviva player state is consistent with video progress.
        if (videoProgressed && currentConvivaState !== Conviva.PlayerStateManager.PlayerState.PLAYING) {
            // Video is actually playing, we should be in playing state.
            _s._log("Adjusting Conviva player state to: PLAYING");
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);
        } else if (!videoProgressed && currentConvivaState === Conviva.PlayerStateManager.PlayerState.PLAYING) {
            // Video is not actually playing, we should not be in playing state.
            if (_s._videoElement.paused) {
                // If the video is currently paused, switch to paused state.
                _s._log("Adjusting Conviva player state to: PAUSED");
                _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);
            } else if (_s._videoElement.seeking) {
                // If we are seeking, stick with the current player state for now.
            } else {
                // Otherwise we must be waiting for more data, go to buffering state.
                _s._log("Adjusting Conviva player state to: BUFFERING");
                _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING);
            }
        }*/
    };

    this._stopPolling = function() {
        this._pollingTimerCancel();
    };

    this._resetPlayHeadTimes = function() {
        _s._lastPlayHeadTimeSpeeds = [];
        _s._previousPosition = -1;
        _s._lastPollTime = 0;
    };

    // PlayerStateManager

    this.getPlayerStateManager = function() {
        return this._playerStateManager;
    };

    // Utilities

    this._log = function(message) {
        if (enableLogging) {
            var formattedMessage = "[Html5PlayerInterface] " + message;
            this._loggingInterface.consoleLog(formattedMessage, Conviva.SystemSettings.LogLevel.DEBUG);
        }
    };

    // Constructor

    function _constr(playerStateManager, videoElement) {
        this._log("Html5PlayerInterface._constr()");

        if (!playerStateManager) {
            throw new Error("Html5PlayerInterface: playerStateManager argument cannot be null.");
        }
        if (!videoElement) {
            throw new Error("Html5PlayerInterface: videoElement argument cannot be null.");
        }

        this._playerStateManager = playerStateManager;
        this._videoElement = videoElement;

        // Start listening for HTML5 video element events.
        this._eventListeners = [];
        this._registerVideoEventListeners();
        this._resetPlayHeadTimes();
        // Start polling for the current position in the video.
        this._startPolling();

        this._findCurrentState();
    }

    _constr.apply(this, arguments);

    // Destructor

    this.cleanup = function() {
        this._log("Html5PlayerInterface.cleanup()");

        this._stopPolling();
        this._removeVideoEventHandlers();

        this._videoElement = null;
        this._playerStateManager = null;
    };
}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.HttpInterface for Chrome.

function Html5Http() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.makeRequest = function(httpMethod, url, data, contentType, timeoutMs, callback) {
        // XDomainRequest only exists in IE, and is IE8-IE9's way of making CORS requests.
        // It is present in IE10 but won't work right.
        // if (typeof XDomainRequest !== "undefined" && navigator.userAgent.indexOf('MSIE 10') === -1) {
        //  return this.makeRequestIE89.apply(this, arguments);
        // }
        return this.makeRequestStandard.apply(this, arguments);
    };

    this.makeRequestStandard = function(httpMethod, url, data, contentType, timeoutMs, callback) {
        var xmlHttpReq = new XMLHttpRequest();

        xmlHttpReq.open(httpMethod, url, true);

        if (contentType && xmlHttpReq.overrideMimeType) {
            xmlHttpReq.overrideMimeType = contentType;
        }
        if (contentType && xmlHttpReq.setRequestHeader) {
            xmlHttpReq.setRequestHeader('Content-Type', contentType);
        }
        if (timeoutMs > 0) {
            xmlHttpReq.timeout = timeoutMs;
            xmlHttpReq.ontimeout = function() {
                // Often this callback will be called after onreadystatechange.
                // The first callback called will cleanup the other to prevent duplicate responses.
                xmlHttpReq.ontimeout = xmlHttpReq.onreadystatechange = null;
                if (callback) callback(false, "timeout after " + timeoutMs + " ms");
            };
        }

        xmlHttpReq.onreadystatechange = function() {
            if (xmlHttpReq.readyState === 4) {
                xmlHttpReq.ontimeout = xmlHttpReq.onreadystatechange = null;
                if (xmlHttpReq.status == 200) {
                    if (callback) callback(true, xmlHttpReq.responseText);
                } else {
                    if (callback) callback(false, "http status " + xmlHttpReq.status);
                }
            }
        };

        xmlHttpReq.send(data);

        return null; // no way to cancel the request
    };

    //   this.makeRequestIE89 = function (httpMethod, url, data, contentType, timeoutMs, callback) {
    //    // IE8-9 does not allow changing the contentType on CORS requests.
    //    // IE8-9 does not like mixed intranet/extranet CORS requests.
    //    // IE8-9 does not like mixed HTTPS-in-HTTP-page / HTTP-in-HTTPS-page CORS requests.

    //    var xmlHttpReq = new XDomainRequest();

    //    xmlHttpReq.open(httpMethod, url, true); // async=true

    //    if (timeoutMs != null) {
    //        xmlHttpReq.timeout = timeoutMs;
    //        xmlHttpReq.ontimeout = function () {
    //            xmlHttpReq.onload = xmlHttpReq.onerror = null;
    //            if (callback) callback(false, "timeout after "+timeoutMs+" ms");
    //        };
    //    }

    // // onreadystatechange won't trigger for XDomainRequest.
    //    xmlHttpReq.onload = function () {
    //     xmlHttpReq.ontimeout = null;
    //     if (callback) callback(true, xmlHttpReq.responseText);
    //    };
    //    xmlHttpReq.onerror = function () {
    //     xmlHttpReq.ontimeout = null;
    //     if (callback) callback(false, "http status " + xmlHttpReq.status);
    //    };

    //    xmlHttpReq.send(data);

    //    return null; // no way to cancel the request
    //   };

    this.release = function() {
        // nothing to release
    };

}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.LoggingInterface for Chrome.

function Html5Logging() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.consoleLog = function(message, logLevel) {
        if (typeof console === 'undefined') return;
        if (console.log && logLevel === Conviva.SystemSettings.LogLevel.DEBUG ||
            logLevel === Conviva.SystemSettings.LogLevel.INFO) {
            console.log(message);
        } else if (console.warn && logLevel === Conviva.SystemSettings.LogLevel.WARNING) {
            console.warn(message);
        } else if (console.error && logLevel === Conviva.SystemSettings.LogLevel.ERROR) {
            console.error(message);
        }
    };

    this.release = function() {
        // nothing to release
    };

}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.MetadataInterface for Chrome.

// The Conviva Platform will recognize HTTP user agent strings for major browsers,
// and use these to fill in some of the missing metadata.
// You can validate the resulting metadata through our validation tools.
// If you wish you can maintain your own user agent string parsing on the client side
// instead, and use it to supply the requested Conviva data.

function Html5Metadata() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getBrowserName = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getBrowserVersion = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceBrand = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceManufacturer = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceModel = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceType = function() {
        return null;
    };

    // There is no value we can access that qualifies as the device version.
    this.getDeviceVersion = function() {
        return null;
    };

    // HTML5 can qualify as an application framework of sorts.
    this.getFrameworkName = function() {
        return "HTML5";
    };

    // No convenient way to detect HTML5 version.
    this.getFrameworkVersion = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getOperatingSystemName = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getOperatingSystemVersion = function() {
        return null;
    };

    this.release = function() {
        // nothing to release
    };

}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.StorageInterface for Chrome.

// HTML5 localStorage relies on a single key to index items,
// so we find a consistent way to combine storageSpace and storageKey.

function Html5Storage() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.saveData = function(storageSpace, storageKey, data, callback) {
        var localStorageKey = storageSpace + "." + storageKey;
        try {
            localStorage.setItem(localStorageKey, data);
            callback(true, null);
        } catch (e) {
            callback(false, e.toString());
        }
    };

    this.loadData = function(storageSpace, storageKey, callback) {
        var localStorageKey = storageSpace + "." + storageKey;
        try {
            var data = localStorage.getItem(localStorageKey);
            callback(true, data);
        } catch (e) {
            callback(false, e.toString());
        }
    };

    this.release = function() {
        // nothing to release
    };

}


// Implements SystemInterfaceFactory

// Convenience factory class to produce HTML5-specific SystemInterface objects
// based on the underlying system implementations.

var Html5SystemInterfaceFactory = function() {
    this.build = function() {
        return new Conviva.SystemInterface(
            new Html5Time(),
            new Html5Timer(),
            new Html5Http(),
            new Html5Storage(),
            new Html5Metadata(),
            new Html5Logging()
        );
    };
};


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.TimeInterface for Chrome.

function Html5Time() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.getEpochTimeMs = function() {
        var d = new Date();
        return d.getTime();
    };

    this.release = function() {
        // nothing to release
    };
}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.TimerInterface for Chrome.

// setInterval does exactly what we need. We just need to return a function 
// which cancels the timer when called.
// Some JavaScript implementations do not have setInterval, in which case
// you may have to write it yourself using setTimeout.

function Html5Timer() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.createTimer = function(timerAction, intervalMs, actionName) {
        var timerId = setInterval(timerAction, intervalMs);
        var cancelTimerFunc = (function() {
            if (timerId !== -1) {
                clearInterval(timerId);
                timerId = -1;
            }
        });
        return cancelTimerFunc;
    };

    this.release = function() {
        // nothing to release
    };

}
</script><script>
// conviva setup
/* globals $t, Conviva, Html5SystemInterfaceFactory, Html5PlayerInterface */

(function(Conviva, html5SystemInterfaceFactory, Html5PlayerInterface) {

    //setup conviva on player init
    $t('on', 'ndp_playerInit', function(e, data) {
        var ndp = data.playerObj;
        //doenst matter to make a new one, it will be the same.
        setupConviva(ndp);
    });

    var settings = {
        CUSTOMER_KEY: "d1ba19b311442f00663cf58858840ea4f364eea4",
        ConvivaApplicationName: "ndpplayer",
        serviceUrl: "https://nbcu-news-test.testonly.conviva.com",
    };

    var client = false;

    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];

    var crossBrandPageType = function() {
        //setup pagetype for cross platform MBT, bludenode, today.com

        var ramenPageType = $t('jsonLd.Dataset.0.pageType', '').toLowerCase();
        if (ramenPageType) {
            return ramenPageType;
        }
        if (window.s) {
            if (window.s.prop12 && window.s.prop12.indexOf('=') === -1) {
                return window.s.prop12;

            } else {
                return window.s.eVar2 || 'unknown';
            }
        }
        //default 
        return 'unknown';
    };

    function setupConviva(ndp) {
        var $ndp = window.$ndp || { events: {}, NativeSingleton: {} };

        var state = {
            inSession: false, //keep track of session creation to help disambiguate when an ad plays and video content plays
            inAdState: false,
            clientSession: false,
            currentAsset: {},
        };

        //init client
        initClient();
        //add handlers to specific instance of NDP player initiated, for each time
        addHandlers(ndp);

        //initiate client and ensure a single instance of conviva client per user
        function initClient() {
            if (!client) {
                /*initialize conviva */
                // To create boostrap the Conviva Library
                //this is the customer key provided by conviva tied to the nbc news account, there are both a dev and a production key defined in the configuration object
                var systemSettings = new Conviva.SystemSettings();

                //this is currently not masking errors, the conviva team has been engaged in determining why.
                //TODO : Move log level value to configuration.js
                systemSettings.logLevel = Conviva.SystemSettings.LogLevel.NONE;

                var systemInterface = new html5SystemInterfaceFactory().build();

                var systemFactory = new Conviva.SystemFactory(systemInterface, systemSettings);
                //Customer integration
                var clientSettings = new Conviva.ClientSettings(settings.CUSTOMER_KEY);
                //the touchstone service url is only used by dev for verification. this should not be set in prod
                if (window.NDP_DEBUG) {
                    //this sets up conviva to report to the touchstone interface only for dev
                    clientSettings.gatewayUrl = settings.serviceUrl;
                }
                client = new Conviva.Client(clientSettings, systemFactory);
            }
        }

        function createConvivaSession(asset) {

            //there should only be one session active at a time so end the session if it exists
            endSession();

            if (!asset) {
                return;
            }

            //keep track that the session has started
            state.inSession = true;
            //provide the convivhtml5interface with info about the videoplayer element
            var playerStateManager = client.getPlayerStateManager();
            //inform conviv about what stream is playing by filling out a content metadata object
            var contentMetadata = new Conviva.ContentMetadata();

            contentMetadata.assetName = asset.getID();
            contentMetadata.streamUrl = $ndp.NativeSingleton.contentURL;
            contentMetadata.streamType = (function() {
                if ($ndp.NativeSingleton.isLive()) {
                    return Conviva.ContentMetadata.StreamType.LIVE;
                } else {
                    return Conviva.ContentMetadata.StreamType.VOD;
                }
            })();
            contentMetadata.applicationName = settings.ConvivaApplicationName;
            contentMetadata.duration = asset.raw && !isNaN(asset.raw.duration) && asset.raw.duration;
            contentMetadata.custom = {
                //custom values
                pageType: crossBrandPageType(),
                playerTech: $ndp.playbackAdapter || 'not available',
                domain: topLevelDomain
            };


            //provide the session with the content metadata object
            state.clientSession = client.createSession(contentMetadata);
            //the html5interface module takes care of marshalling the native video events into conviva specific implementations
            var videoElement = $ndp.NativeSingleton.getVideoElement();
            new Html5PlayerInterface(playerStateManager, videoElement);
            // until player is attached, Conviva State remains in NOT_MONITORED State
            client.attachPlayer(state.clientSession, playerStateManager);
        }

        function sendAdStart() {
            //track state of ad as far as conviva understands
            state.inAdState = true;
            //creqates a new conviva session
            createConvivaSession(state.currentAsset);
            // calls the conviva client and reports that an ad has started playback
            // params are as follows.
            // adStream:   Required: Whether the ad is embedded inside the content stream
            //             Set to Conviva.Client.AdStream.SEPARATE if value is unknown
            //             string {ENUM: Conviva.Client.AdStream.CONTENT/SEPARATE}
            // adPlayer:   Required: Whether the ad is played by the same player as the original video content.
            //             Set to Conviva.Client.AdPlayer.SEPARATE if value is unknown
            //             string {ENUM: Conviva.Client.AdPlayer.CONTENT/SEPARATE}
            // adPosition: Always need to Set to Conviva.Client.AdPosition.PREROLL
            client.adStart(state.clientSession, Conviva.Client.AdStream.SEPARATE, Conviva.Client.AdPlayer.SEPARATE, Conviva.Client.AdPosition.PREROLL);
        }

        function sendAdEnd() {
            if (state.inAdState) {
                client.adEnd(state.clientSession);
            }
            state.inAdState = false;
        }

        function attachSession() {
            sendAdEnd();
            //if the ad did not start for some reason we need to create the client session
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
            }
        }

        function endSession() {
            //only end the session if it is allready started
            if (state.inSession) {
                client.cleanupSession(state.clientSession);
                state.inSession = false;
            }
        }

        function SetContentMetaData(event) {
            endSession();
            state.currentAsset = event.getAsset();

        }

        function handleStart() {
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
            }
            attachSession(state.currentAsset);
        }

        function handlePlay() {
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
                attachSession(state.currentAsset);
            }
        }

        function handleSeek(event) {
            //We end the session if the user seeks back to the beginning of the video so we can treat it as a new session
            if (event.payload.playheadPosition < 100) {
                endSession();
            }
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
            }
        }

        function reportError(errType) {
            if (state.inSession) {
                client.reportError(state.clientSession, errType, Conviva.Client.ErrorSeverity.FATAL);
            }
            endSession();
        }

        function addHandlers(ndp) {
            //set up reference to event structs we want to listen for
            var PlaybackEvent = $ndp.events.PlaybackEvent;
            var AdEvent = $ndp.events.AdEvent;
            var ErrorEvent = $ndp.events.ErrorEvent;
            var VideoEvent = $ndp.events.VideoEvent;
            var SystemEvent = $ndp.events.SystemEvent;

            //loaded handler sets asset for next session
            ndp.on(PlaybackEvent.LOADED, SetContentMetaData);
            //start handler starts monitoring of content
            ndp.on(PlaybackEvent.START, handleStart);
            //play handler starts continues monitering of content
            ndp.on(PlaybackEvent.PLAY, handlePlay);
            //complete handler clears session when  stream ends
            ndp.on(PlaybackEvent.COMPLETE, endSession);
            //adevent start handler  sends ad start to conviva
            ndp.on(AdEvent.START, sendAdStart);
            //adevent complete handler sends ad end to conviva
            ndp.on(AdEvent.COMPLETE, sendAdEnd);
            //We end the session if the user seeks back to the beginning of the video so we can treat it as a new session
            ndp.on(PlaybackEvent.SEEK, handleSeek);
            //errors should clear the session
            ndp.on(ErrorEvent.MEDIA_ERROR, function() { reportError('media error'); });
            ndp.on(ErrorEvent.NETWORK_ERROR, function() { reportError('network error'); });
            ndp.on(ErrorEvent.TIMEOUT_ERROR, function() { reportError('timeout error'); });
            ndp.on(VideoEvent.ABORT, function() { reportError('abort error'); });
            ndp.on(VideoEvent.ERROR, function() { reportError('unknown error'); });
            ndp.on(AdEvent.ERROR, function() { reportError('ad error'); });
            ndp.on(SystemEvent.VIDEO_ERROR, function() { reportError('video error'); });
        }
    }
})(Conviva, Html5SystemInterfaceFactory, Html5PlayerInterface);
</script><script src="./M-050_files/dt-dLILCrQnEa9tihQkISOiSQfBsuZKdW" type="text/javascript"></script><script>
/*
 * video heartbeats - 2.0.1 - 2016-08-22
 * Copyright (c) 2016 Adobe Systems, Inc. All Rights Reserved.
 */

// Heartbeat core
!function(a){if("undefined"==typeof b)var b={};if("undefined"==typeof c)var c={};if("undefined"==typeof d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),"undefined"==typeof e)var e={};e.clock||(e.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(b),function(a){"use strict";var b={};b.startsWith=function(a,b){return 0==a.indexOf(b)},a.StringUtils=b}(b),function(a){"use strict";var b={};b.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(a,c){var d=b.clone(a);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d},a.ObjectUtils=b}(b),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._lastTs=0,this._isSuspended="undefined"!=typeof a?a:!1,this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++){var b=this._queue[a];b.run()}this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){function c(){a.run(),null!=b&&b.call(d)}var d=this;if(0==this._lastTs)c();else{var e=(new Date).getTime(),f=e-this._lastTs;this._lastTs=e,f<this._delay?setTimeout(c,this._delay-f):c()}},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a,b){if(this._name=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function c(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f}b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(d,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},b.prototype.on=function(a,b,c){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c}))},b.prototype.off=function(a,b,c){if(!this._isShutDown){if(b="function"==typeof b?b:null,!a&&null==b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)}},b.prototype.trigger=function(a){if(!this._isShutDown)for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&c(b,a.name))for(var d=this._listeners[b].slice(0),e=0;e<d.length;e++){var f=d[e];f.fn.call(f.ctx,a)}},b.prototype.comply=function(a,b,c){this._isShutDown||(this._commands[a]={cmd:b,ctx:c})},b.prototype.command=function(a,b){if(!this._isShutDown){var c=this._commands[a];return c?void c.cmd.call(c.ctx,b):void this._logger.warn(d,"#command > No command handler for: "+a)}},b.prototype.reply=function(a,b,c){this._isShutDown||(this._requests[a]={fn:b,ctx:c})},b.prototype.request=function(a){if(!this._isShutDown){var b=this._requests[a];return b?b.fn.call(b.ctx):(this._logger.warn(d,"#request > No request handler for: "+a),null)}},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}};var d="radio::Channel";a.radio.Channel=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a,this._logger)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){throw new Error("Implementation error: Method must be overridden.")},a.ILogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)},a.LogWriter=b}(d,c),function(a){"use strict";function b(){}b.prototype.setLogWriter=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.debug=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.info=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.warn=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.error=function(a,b){throw new Error("Implementation error: Method must be overridden.")},a.ILogger=b}(d),function(a){"use strict";function b(){this._logWriter=new d}function c(a){return 10>a?"00"+a:100>a?"0"+a:""+a}var d=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a,this._enabled=!1},b.prototype.getLogWriter=function(){return this._logWriter},b.prototype.getEnabled=function(){return this._enabled},b.prototype.enable=function(){this._enabled=!0},b.prototype.disable=function(){this._enabled=!1},b.prototype.debug=function(a,b){this._log(a,f,b)},b.prototype.info=function(a,b){this._log(a,e,b)},b.prototype.warn=function(a,b){this._log(a,g,b)},b.prototype.error=function(a,b){this._log(a,h,b)},b.prototype._log=function(a,b,d){if(b==h||this._enabled){var e="",f=new Date;e+="["+f.toTimeString()+"."+c(f.getMilliseconds())+"] ["+b+"] ",e+="["+a+"] "+d,this._logWriter.write(e)}};var e="INFO",f="DEBUG",g="WARN",h="ERROR";a.Logger=b}(d),function(a){"use strict";function b(a,b){this._pluginName=a,this._eventName=b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getEventName=function(){return this._eventName},b.prototype.getName=function(){return this._pluginName+c.SEPARATOR+this._eventName},a.Trigger=b}(d),function(a){"use strict";function b(a,b){this.name=a,this.data=b}b.SUCCESS="success",b.ERROR="error",b.createFromTrigger=function(a){return new b(a.getName())},a.Event=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.name){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;f>c;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype.close=function(){this.removeAllListeners(null)},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},d.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){return b.status&&parseInt(b.status,10)>=400?this.onerror():(f[d.RESPONSE]=b.responseText,void g.dispatchEvent(new e(e.SUCCESS,f)))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";var b="js",c="2.0.1.88",d="c8c0b1",e=4,f={};f.getVersion=function(){return b+"-"+c+"-"+d},f.getMajor=function(){return f.getNumberAtPosition(0)},f.getMinor=function(){return f.getNumberAtPosition(1)},f.getMicro=function(){return f.getNumberAtPosition(2)},f.getPatch=function(){return f.getNumberAtPosition(3)},f.getBuild=function(){return d},f.getApiLevel=function(){return e},f.getNumberAtPosition=function(a){return c.split(".")[a]},a.Version=f}(c),function(a){"use strict";function b(a,b){this._message=a,this._details=b}b.prototype.getMessage=function(){return this._message},b.prototype.getDetails=function(){return this._details},a.ErrorInfo=b}(c),function(a){"use strict";function b(){this.debugLogging=!1}a.HeartbeatConfig=b}(c),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.HeartbeatDelegate=b}(c),function(a){"use strict";function b(){}b.prototype.configure=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.bootstrap=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.resolveData=function(a){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a){"use strict";function b(a,b,c,d){this.trigger=a,this.action=c,this.plugin=b,this._paramMappings={},this.mergeParams(d)}var c=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];this._paramMappings[c.getKeyName()]=c}},b.prototype.getParams=function(){var a=[];for(var b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a},b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a},b.prototype.removeParam=function(a,b){var d=new c(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]},a.plugin.Behaviour=b}(d),function(a){"use strict";function b(a,b,d){this._pluginName=a,this._key=b,this._paramName=d||a+c.SEPARATOR+b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getKey=function(){return this._key},b.prototype.getKeyName=function(){return this._pluginName+c.SEPARATOR+this._key},b.prototype.getParamName=function(){return this._paramName},a.plugin.ParamMapping=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._plugins={},this._behaviours={},this._radio=new d(this._logger),this._dataChannel=this._radio.channel(g),this._ctrlChannel=this._radio.channel(h)}var c=a.Event,d=a.radio.Radio,e=a.radio.Channel,f=a.plugin.Behaviour;b.ERROR="error",b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(i,"#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},b.prototype.pluginExists=function(a){return!!this._plugins[a]},b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},b.prototype.on=function(a,b,c,d){this._dataChannel.on(a+e.SEPARATOR+b,c,d)},b.prototype.off=function(a,b,c,d){var f=a&&b?a+e.SEPARATOR+b:null;this._dataChannel.off(f,c,d)},b.prototype.trigger=function(a){var b=a.name,c=this._behaviours[b];if(c){var d,e,f,g,h,i={},j={};for(d=0;d<c.length;d++)if(f=c[d],g=f.getParams())for(e=0;e<g.length;e++)h=g[e],i[h.getPluginName()]=i[h.getPluginName()]||[],h.key in i[h.getPluginName()]||i[h.getPluginName()].push(h.getKey());for(var k in i)i.hasOwnProperty(k)&&(j[k]=this.request(k,i[k]));for(d=0;d<c.length;d++){f=c[d];var l={_behaviour:f,_eventData:a.data||{}};if(g=f.getParams()){for(e=0;e<g.length;e++)h=g[e],l[h.getParamName()]=j[h.getPluginName()]?j[h.getPluginName()][h.getKey()]:null;this.command(f.plugin.getName(),f.action,l)}}}this._dataChannel.trigger(a)},b.prototype.request=function(a,b){var c=this._plugins[a];return c&&b&&0!=b.length?c.resolveData(b):null},b.prototype.raise=function(a){this._errorInfo=a;var d=new c(b.ERROR,a);this._ctrlChannel.trigger(d)},b.prototype.getErrorInfo=function(){return this._errorInfo},b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},b.prototype.comply=function(a,b,c){this._dataChannel.comply(a.getName()+e.SEPARATOR+b,c,a)},b.prototype.command=function(a,b,c){this._dataChannel.command(a+e.SEPARATOR+b,c)},b.prototype.registerBehaviour=function(a,b,c,d){var e=a.getName(),g=new f(a,b,c,d);this._behaviours[e]=this._behaviours[e]||[],this._behaviours[e].push(g)};var g="data_channel",h="ctrl_channel",i="plugin::PluginManager";a.plugin.PluginManager=b}(d),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new d}var d=a.Logger,e=a.Trigger,f=a.Event,g=b.ErrorInfo;c.INITIALIZED="initialized",c.prototype.configure=function(a){},c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._pluginManager.raise(new g("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.getLogger=function(){return this._logger},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);var b=null;if(a)for(var c=0;c<a.length;c++){var d=a[c];this._dataResolver.hasOwnProperty(d)&&(b=b||{},"function"==typeof this._dataResolver[d]?b[d]=this._dataResolver[d].call(this):b[d]=this._dataResolver[d])}return b},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){return this._isEnabled?this._isDestroyed?(this._logger.error(this._logTag,"Plugin destroyed."),!1):!0:(this._logger.error(this._logTag,"Plugin disabled."),!1)},c.prototype._trigger=function(a,b){var c=f.createFromTrigger(new e(this.getName(),a));c.data=b,this._pluginManager.trigger(c)},a.plugin.BasePlugin=c}(d,c),function(a){"use strict";function b(a,b,c){this.name=a,this.interval=b,this.isActive=!1,this.repeatCount="undefined"!=typeof c?c:e,this._nextTickTimestamp=0,this.reset()}function c(a,b){if(!a)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._timers={};var c=this;this._clock=window.setInterval(function(){c._onTick()},1e3*f)}b.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},b.prototype.shouldTick=function(){var a=(new Date).getTime();return a>this._nextTickTimestamp-f/2?(this.tick++,this._updateNextTickTimestamp(),!0):!1},b.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},c.prototype.createTimer=function(a,c,d){this._timers[a]=new b(a,c,d)},c.prototype.destroyTimer=function(a){delete this._timers[a]},c.prototype.resumeTimer=function(a,b){b="undefined"!=typeof b?b:!1,this._logger.debug(d,"#resumeTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&c.reset())},c.prototype.pauseTimer=function(a,b){b="undefined"!=typeof b?b:!1,this._logger.debug(d,"#pauseTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&c.reset())},c.prototype.isTimerPaused=function(a){var b=this._timers[a];return b?!b.isActive:!1},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},c.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(b.interval>1&&this._logger.debug(d,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,b.interval,b.tick),b.repeatCount!=e&&b.repeatCount--):this.destroyTimer(b.name))}};var d="service.clock::TimerManager",e=-1,f=.25;a.clock.TimerDescriptor=b,a.clock.TimerManager=c}(e),function(a,b,c){"use strict";function d(a){if(d.__super__.constructor.call(this,h),!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._timerManager=new e(this,this._logger),this._setupDataResolver()}var e=c.clock.TimerManager,f=b.StringUtils,g=a.plugin.BasePlugin;a.extend(d,g),d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._pluginManager.comply(this,i,this._cmdCreate),this._pluginManager.comply(this,k,this._cmdResume),this._pluginManager.comply(this,j,this._cmdPause),this._pluginManager.comply(this,l,this._cmdDestroy)},d.prototype._teardown=function(){this._timerManager.destroy()},d.prototype._cmdCreate=function(a){var b=a[o]||s;this._timerManager.createTimer(a[m],a[n],b)},d.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[m],!!a[q])},d.prototype._cmdResume=function(a){this._timerManager.resumeTimer(a[m],!!a[q])},d.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[m])},d.prototype.onTick=function(a,b,c){a+=".tick";var d={};d[m]=a,d[n]=b,d[p]=c,this._trigger(a,d)},d.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[r]=function(a){return b.isTimerPaused(a)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];if(c=c||{},f.startsWith(e,r)){var g=e.split(r+".");g.length>0&&(c[e]=a[r].call(this,g[1]))}}return c}};var h="service.clock",i="create",j="pause",k="resume",l="destroy",m="name",n="interval",o="repeat_count",p="tick",q="reset",r="is_paused",s=-1;c.clock.ClockService=d}(d,b,e),function(a,b,c){"use strict";function d(a,b){if(this._logger=new e,this._pluginManager=new f(this._logger),this._pluginManager.addPlugin(new g(this._logger)),b)for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var e=a.Logger,f=a.plugin.PluginManager,g=b.clock.ClockService;d.prototype.configure=function(a){if(!a)throw new Error("Configuration object cannot be NULL.");a.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(h,"Instance is destroyed.")},d.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var h="Heartbeat";c.Heartbeat=d}(d,e,c),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va||(a.ADB.va=c),a.ADB.va.utils||(a.ADB.va.utils=b),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);

// VideoPlayerPlugin
!function(a){if("undefined"==typeof b)var b={};!function(a){"use strict";var b={};b.ASSET_TYPE_VOD="vod",b.ASSET_TYPE_LIVE="live",b.ASSET_TYPE_LINEAR="linear",a.AssetType=b}(b),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},a.AdBreakInfo=b}(b),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null}b.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},a.AdInfo=b}(b),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},a.ChapterInfo=b}(b),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}b.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},a.QoSInfo=b}(b),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}b.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},a.VideoInfo=b}(b),function(a){"use strict";function b(){this.debugLogging=!1}a.VideoPlayerPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},a.VideoPlayerPluginDelegate=b}(b),function(a,b){"use strict";function c(a){if(c.__super__.constructor.call(this,h),!a)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=a,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var d=a.plugin.ParamMapping,e=a.Trigger,f=a.plugin.BasePlugin,g=b.VideoPlayerPluginConfig;a.extend(c,f),c.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof g))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");a.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},c.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},c.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(o),this._trigger(p),a.isInChapter&&this._trigger(A),a.isInAd&&(this._trigger(u),this._isTrackingAd=!0)),this._videoIdle=!1},c.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(o),this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&this._trigger(p)}},c.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(m),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},c.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(n),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1}},c.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(s),this._startPlayheadTimer())},c.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var a={};a[H]=!1,this._trigger(t,a)}},c.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(w))},c.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(x),this._startPlayheadTimer())},c.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(y))},c.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(z),this._startPlayheadTimer();var a=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=a.hasOwnProperty("ad.isInAd")&&a["ad.isInAd"]}},c.prototype.trackComplete=function(a){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var b={};b[G]=a,this._stopPlayheadTimer(),this._trigger(q,b)}},c.prototype.trackTimedMetadata=function(a){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(r,a)},c.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(A)},c.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(B)},c.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(u),this._isTrackingAd=!0)},c.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(v),this._isTrackingAd=!1)},c.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(C)},c.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[I]=l,b[J]=a,this._trigger(D,b)}},c.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[I]=k,b[J]=a,this._trigger(D,b)}},c.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},c.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new e(j,E),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new e(j,F),this,"handleVideoIdleResume",[new d(i,"ad.isInAd","isInAd"),new d(i,"chapter.isInChapter","isInChapter")])},c.prototype._setupDataResolver=function(){function a(){return g.video?g.video:(g.video=h._delegate.getVideoInfo(),h._logger.info(h._logTag,"Data from delegate > VideoInfo: "+g.video),g.video)}function b(){return g.ad?g.ad:(g.ad=h._delegate.getAdInfo(),h._logger.info(h._logTag,"Data from delegate > AdInfo: "+g.ad),g.ad)}function c(){return g.pod?g.pod:(g.pod=h._delegate.getAdBreakInfo(),h._logger.info(h._logTag,"Data from delegate > AdBreakInfo: "+g.pod),g.pod)}function d(){return g.chapter?g.chapter:(g.chapter=h._delegate.getChapterInfo(),h._logger.info(h._logTag,"Data from delegate > ChapterInfo: "+g.chapter),g.chapter)}function e(){return g.qos?g.qos:(g.qos=h._delegate.getQoSInfo(),h._logger.info(h._logTag,"Data from delegate > QoSInfo: "+g.qos),g.qos)}var f={},g={},h=this;f["video.id"]=function(){var b=a(),c=b?b.id:null;return h._logger.debug(h._logTag,"Resolving video.id: "+c),c},f["video.name"]=function(){var b=a(),c=b?b.name:null;return h._logger.debug(h._logTag,"Resolving video.name: "+c),c},f["video.length"]=function(){var b=a(),c=b?b.length:NaN;return h._logger.debug(h._logTag,"Resolving video.length: "+c),c},f["video.playerName"]=function(){var b=a(),c=b?b.playerName:null;return h._logger.debug(h._logTag,"Resolving video.playerName: "+c),c},f["video.streamType"]=function(){var b=a(),c=b?b.streamType:null;return h._logger.debug(h._logTag,"Resolving video.streamType: "+c),c},f["video.playhead"]=function(){var b=a(),c=b?b.playhead:NaN;return h._logger.debug(h._logTag,"Resolving video.playhead: "+c),c},f["video.resumed"]=function(){var b=a(),c=b?b.resumed:!1;return h._logger.debug(h._logTag,"Resolving video.resumed: "+c),c},f["video.playheadStalled"]=function(){return this._playheadStalled},f["pod.name"]=function(){var a=c(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving pod.name: "+b),b},f["pod.playerName"]=function(){var a=c(),b=a?a.playerName:null;return h._logger.debug(h._logTag,"Resolving pod.playerName: "+b),b},f["pod.position"]=function(){var a=c(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving pod.position: "+b),b},f["pod.startTime"]=function(){var a=c(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving pod.startTime: "+b),b},f["ad.isInAd"]=function(){var a=b(),c=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAd: "+c),c},f["ad.isInAdBreak"]=function(){var a=c(),b=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAdBreak: "+b),b},f["ad.id"]=function(){var a=b(),c=a?a.id:null;return h._logger.debug(h._logTag,"Resolving ad.id: "+c),c},f["ad.name"]=function(){var a=b(),c=a?a.name:null;return h._logger.debug(h._logTag,"Resolving ad.name: "+c),c},f["ad.length"]=function(){var a=b(),c=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving ad.length: "+c),c},f["ad.position"]=function(){var a=b(),c=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving ad.position: "+c),c},f["chapter.isInChapter"]=function(){var a=d(),b=null!=a;return h._logger.debug(h._logTag,"Resolving chapter.isInChapter: "+b),b},f["chapter.name"]=function(){var a=d(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving chapter.name: "+b),b},f["chapter.length"]=function(){var a=d(),b=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving chapter.length: "+b),b},f["chapter.position"]=function(){var a=d(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving chapter.position: "+b),b},f["chapter.startTime"]=function(){var a=d(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving chapter.startTime: "+b),b},f["qos.bitrate"]=function(){var a=e(),b=a?a.bitrate:NaN;return h._logger.debug(h._logTag,"Resolving qos.bitrate: "+b),b},f["qos.fps"]=function(){var a=e(),b=a?a.fps:NaN;return h._logger.debug(h._logTag,"Resolving qos.fps: "+b),b},f["qos.droppedFrames"]=function(){var a=e(),b=a?a.droppedFrames:NaN;return h._logger.debug(h._logTag,"Resolving qos.droppedFrames: "+b),b},f["qos.startupTime"]=function(){var a=e(),b=a?1e3*a.startupTime:NaN;return h._logger.debug(h._logTag,"Resolving qos.startupTime: "+b),b},this._dataResolver=function(a){if(!a||0==a.length)return null;g={};for(var b=null,c=0;c<a.length;c++){var d=a[c];b=b||{},b[d]=f.hasOwnProperty(d)?f[d].call(this):null}return b}},c.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(t)))},c.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this.trackPlay()))},c.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);if(a._isTrackingAd)a._playheadStalled&&a._trackExitStall(),b.hasOwnProperty("ad.isInAd")&&!b["ad.isInAd"]&&(a._isTrackingAd=!1);else{var c=b["video.playhead"];c!=a._previousPlayhead?a._trackExitStall():a._previousPlayhead>=0&&c==a._previousPlayhead&&(a._stalledPlayheadCount++,a._stalledPlayheadCount==L&&a._trackPlayheadStall()),a._previousPlayhead=c}}},K))},c.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},c.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)};var h="player",i=h,j="adobe-heartbeat",k="sourceErrorExternal",l="sourceErrorSDK",m="video_load",n="video_unload",o="video_start",p="video_resume",q="video_complete",r="timed_metadata",s="play",t="pause",u="ad_start",v="ad_complete",w="buffer_start",x="buffer_complete",y="seek_start",z="seek_complete",A="chapter_start",B="chapter_complete",C="bitrate_change",D="track_error",E="video_idle_start",F="video_idle_resume",G="callback",H="filter_report",I="source",J="error_id",K=1001,L=2;b.VideoPlayerPlugin=c}(a.ADB.core,b),a.ADB.va.plugins.videoplayer||(a.ADB.va.plugins.videoplayer=b)}(this);

// AdobeHeartbeatPlugin
!function(a){if("undefined"==typeof b)var b={};b.clock||(b.clock={}),b.context||(b.context={}),b.filter||(b.filter={}),b.model||(b.model={}),b.network||(b.network={}),function(a,b){"use strict";function c(a,b,c,d,e){if(!b)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!e)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+c,this._logger=e,this._isDestroyed=!1,this._createTimer(c,d),this._installHandlers()}var d=a.Event;c.KEY_NAME="name",c.KEY_INTERVAL="interval",c.KEY_RESET="reset",c.prototype.resume=function(a){this._logger.debug(this._logTag,"Starting timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,i,b)},c.prototype.pause=function(a){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,h,b)},c.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var a={};a[c.KEY_NAME]=e+"."+this._name,this._pluginManager.command(f,j,a)}},c.prototype.setInterval=function(a){var b=k+"."+e+"."+this._name,c=this._pluginManager.request(f,[b])[b];this.pause(!0),this._createTimer(this._name,a),c||this.resume(!0)},c.prototype._cmdResume=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.resume(b)},c.prototype._cmdPause=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.pause(b)},c.prototype._onTick=function(a,b){this._channel.trigger(new d("clock:"+this._name+".tick",b))},c.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(f,e+"."+this._name+".tick",this._onTick,this)},c.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},c.prototype._createTimer=function(a,b){this._name=a,this._interval=b;var d={};d[c.KEY_NAME]=e+"."+this._name,d[c.KEY_INTERVAL]=this._interval,this._pluginManager.command(f,g,d)};var e="heartbeat",f="service.clock",g="create",h="pause",i="resume",j="destroy",k="is_paused";b.clock.Timer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,f,h,d)}var d=a.Event,e=b.clock.Timer;a.extend(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[l];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");b>g?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(g)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(h)},c.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new d(i))},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(j,this._getSettings,this),this._channel.on(k,this._onCheckStatusComplete,this),this._channel.reply(l,function(){return this._interval},this)};var f="check_status",g=600,h=60,i="clock:check_status.tick",j="clock:check_status.get_settings",k="net:check_status_complete",l="check_status_interval";b.clock.CheckStatusTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d),c.prototype._onCheckStatusComplete=function(a){var b=a.data[g];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(f)},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(h,this._onCheckStatusComplete,this),this._channel.reply(g,function(){return this._interval},this)};var e="reporting",f=10,g="reporting_interval",h="net:check_status_complete";b.clock.ReportingTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="idle",f=1800;b.clock.IdleTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="flush_filter",f=.25;b.clock.FlushFilterTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c){if(!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(!b)throw new Error("Reference to the channel object cannot be NULL");if(!c)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new f(a,b,c),this._checkStatusTimer=new d(a,b,c),this._flushFilterTimer=new e(a,b,c),this._idleTimer=new g(a,b,c)}var d=b.clock.CheckStatusTimer,e=b.clock.FlushFilterTimer,f=b.clock.ReportingTimer,g=b.clock.IdleTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},b.clock.Clock=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},b.model.Dao=d,b.model.DaoField=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podOffset(a.podOffset()),this.podName(a.podName()),this.adLength(a.adLength()),this.adName(a.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.reportSuiteId(a.reportSuiteId()),this.trackingServer(a.trackingServer()),this.ssl(a.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.name(a.name()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.length(a.length());var b=a.adData()?new e(a.adData()):null;this.adData(b);var d=a.chapterData()?new f(a.chapterData()):null;this.chapterData(d)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_AD="ad",c.TYPE_MAIN_CONTENT="main",b.model.AssetDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.duration(a.duration()),this.playhead(a.playhead()),this.id(a.id()),this.source(a.source()),this.ts(a.ts()),this.prevTs(a.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var d=b.model.Dao;a.extend(c,d),c.EVENT_TYPE_AA_START="aa_start",c.EVENT_TYPE_AA_AD_START="aa_ad_start",c.EVENT_TYPE_START="start",c.EVENT_TYPE_RESUME="resume",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_STALL="stall",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_COMPLETE="complete",b.model.EventDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.bitrate(a.bitrate()),this.fps(a.fps()),this.droppedFrames(a.droppedFrames()),this.startupTime(a.startupTime()),this.isStartupTimeOverridden=a.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.ovp(a.ovp()),this.sdk(a.sdk()),this.channel(a.channel()),this.playerName(a.playerName()),this.libVersion(a.libVersion()),this.apiLevel(a.apiLevel())}else this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao;a.extend(c,d);var e="unknown";b.model.ServiceProviderDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.sessionId(a.sessionId())}else this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type())}else this.type(null)}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId()),this.marketingCloudVisitorId(a.marketingCloudVisitorId()),this.visitorId(a.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.audienceManagerBlob(a.audienceManagerBlob()),this.audienceManagerLocationHint(a.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var d=b.model.Dao;a.extend(c,d),b.model.AudienceManagerDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c,i,j){this.eventData=new e,this.eventData.type(b),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(c),this.assetData=new f(a._assetData),this.streamData=new g(a._streamData),this.qosData=new h(a._qosData),this.cuserData=d.clone(a._cuserData),this.meta=i,this.callback=j,this.filterReport=!0}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.TrackItem=c}(a.ADB.va.utils,b),function(a,b){"use strict";function c(a,b,c,i,j,k){this.adobeAnalyticsData=a,this.userData=b,this.aamData=c,this.serviceProviderData=i,this.sessionData=j,this.eventData=new e(k.eventData),this.assetData=new f(k.assetData),this.streamData=new g(k.streamData),this.qosData=new h(k.qosData),this.cuserData=d.clone(k.cuserData),this.meta=d.clone(k.meta),this.callback=k.callback,this.filterReport=k.filterReport}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.CUserDao;b.model.Report=c}(a.ADB.va.utils,b),function(a){"use strict";function b(){}b.prototype.serializeReport=function(a){},b.prototype.serializeDao=function(a){},b.prototype.serializeMap=function(a){},b.prototype.serializeNumber=function(a,b,c,d){},b.prototype.serializeString=function(a,b,c,d){},a.model.ISerializer=b}(b),function(a,b){"use strict";function c(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a}var d=b.model.Dao,e=b.model.DaoField,f=b.model.ISerializer;a.extend(c,f),c.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}},c.prototype.serializeDao=function(a){var b=this._processDao(a);return b.filter(function(a){return!!a}).join("&")},c.prototype.serializeMap=function(a,b){var c=[],d=b?b:"meta";for(var e in a)a.hasOwnProperty(e)&&a[e]&&c.push("s:"+d+":"+e+"="+window.encodeURIComponent(a[e]));return c.join("&")},c.prototype.serializeNumber=function(a,b,c,d){var f=h;return null==b||isNaN(b)?null:(d===e.HINT_SHORT&&(f=i),f+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c,d){return b?j+":"+c+":"+a+"="+window.encodeURIComponent(b):null},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var e=a.data[c],f=e.value,h=e.hint,i=null,j=a.realm;if(null==f)continue;"number"==typeof f?i=this.serializeNumber(c,f,j,h):"string"==typeof f?i=this.serializeString(c,f,j,h):f instanceof d?i=this.serializeDao(f):this._logger.warn(g,"#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+f+"."),i&&b.push(i)}return b};var g="ah::QuerystringSerializer",h="l",i="h",j="s";b.model.QuerystringSerializer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the data object cannot be NULL");if(this._data=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b}c.prototype.parse=function(){var a,b,c,i,j;if(window.DOMParser){var k=new window.DOMParser;j=k.parseFromString(this._data,"text/xml")}else j=new window.ActiveXObject("Microsoft.XMLDOM"),j.async=!1,j.loadXML(this.data);var l;l=parseInt(j.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),l&&(a=l),l=parseInt(j.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),l&&(b=l),l=parseInt(j.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),l&&(c=1==l),j.getElementsByTagName("nielsenEnabled")[0]?(l=parseInt(j.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),i=1==l):i=!0;var m={};return m[e]=a,m[f]=b,m[g]=c,m[h]=i,this._logger.debug(d,"#parse() > Obtained configuration settings."),m};var d="ah::SettingsParser",e="reporting_interval",f="check_status_interval",g="track_external_errors",h="nielsen_enabled";b.network.SettingsParser=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._serializer=new i(b),this._installEventListeners()}var d=a.Event,e=a.URLRequestMethod,f=a.URLRequest,g=a.URLLoader,h=b.network.SettingsParser,i=b.model.QuerystringSerializer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(j,"#destroy()"),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this._logger.debug(j,"#_onApiConfig(sb_server="+b[k]+", check_status_server="+b[l]+", publisher="+b[m]+", quiet_mode="+b[n]+", ssl="+b[o]+")"),this._trackingServer=this._updateRequestProtocol(b[k],b[o]),this._checkStatusServer=this._updateRequestProtocol(b[l],b[o]),this._publisher=b[m],this._quietMode=b[n],this._isConfigured=!0},c.prototype._onUpdateVisitorOptOut=function(a){var b=a.data;this._logger.debug(j,"#_onUpdateVisitorOptOut(visitor_opt_out="+b[q]+")"),this._visitorOptedOut=b[q]},c.prototype._onFilterReportAvailable=function(a){var b=a.data;if(!this._isConfigured)return void this._logger.warn(j,"#_onFilterReportAvailable() > Unable to send request: not configured.");var c=b[p],h=this._serializer.serializeReport(c),i=this._trackingServer+"/?"+h.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&c.eventData&&this._prevReportSent.eventData.playhead==c.eventData.playhead&&this._prevReportSent.eventData.ts==c.eventData.ts&&this._prevReportSent.eventData.prevTs==c.eventData.prevTs&&this._prevReportSent.eventData.type==c.eventData.type)return void this._logger.debug(j,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+i);this._prevReportSent=c;var k=new f(i,e.GET);this._logger.debug(j,"#_onFilterReportAvailable() > "+k.url);var l=this,m=function(a){o.close(),h.callback&&h.callback.call(null)},n=function(a){o.close(),l._logger.warn(j,"#_onFilterReportAvailable() > Failed to send heartbeat report."),h.callback&&h.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var o=new g;o.addEventListener(d.SUCCESS,m,this),o.addEventListener(d.ERROR,n,this),o.load(k)}},c.prototype._onClockCheckStatusTick=function(a){function b(a){if(a.data){var b=new h(a.data.response,i._logger),c=b.parse();c?i._channel.trigger(new d(v,c)):i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}n.close()}function c(a){i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),n.close()}if(!this._isConfigured)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Publisher is NULL.");var i=this,k=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+k+".xml?r="+(new Date).getTime(),m=new f(l,e.GET),n=new g;n.addEventListener(d.SUCCESS,b,this),n.addEventListener(d.ERROR,c,this),this._logger.debug(j,"#_onClockCheckStatusTick() > Get new settings from: "+l),n.load(m)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(r,this._onApiConfig,this),this._channel.on(s,this._onUpdateVisitorOptOut,this),this._channel.on(t,this._onFilterReportAvailable,this),this._channel.on(u,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var j="ah::Network",k="tracking_server",l="check_status_server",m="publisher",n="quiet_mode",o="ssl",p="report",q="visitor_opt_out",r="api:config",s="api:update_visitor_optout",t="filter:data_available",u="clock:check_status.tick",v="net:check_status_complete";b.network.Network=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function d(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_PAUSE||a.eventData.type()==k.EVENT_TYPE_STALL?(!a.filterReport||a.eventData.duration()>u)&&b.push(a):b.push(a)}),b}function e(a){var b=-1,c=-1,d=[];return a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_START?a.assetData.type()==l.TYPE_MAIN_CONTENT?-1==b?b=d.push(a)-1:(a.eventData.prevTs(-1),d[b]=a):-1==c?c=d.push(a)-1:(a.eventData.prevTs(-1),d[c]=a):d.push(a)}),d}function f(a){var b=[];return a.forEach(function(c){if(c.eventData.type()==k.EVENT_TYPE_PLAY){if(c.eventData.duration()>t)b.push(c);else if(0==c.eventData.duration()&&c.assetData.type()==l.TYPE_MAIN_CONTENT){var d=g(a);d.indexOf(c)==d.length-1&&b.push(c)}}else b.push(c)}),b}function g(a){var b=[];return a.forEach(function(a){(a.eventData.type()==k.EVENT_TYPE_PLAY||a.eventData.type()==k.EVENT_TYPE_BUFFER||a.eventData.type()==k.EVENT_TYPE_START)&&b.push(a)}),b}var h=a.radio.Command,i=a.radio.CommandQueue,j=a.Event,k=b.model.EventDao,l=b.model.AssetDao;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners(),this.clear())},c.prototype.clear=function(){this._logger.debug(w,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},c.prototype.flush=function(){this._workQueue.addCommand(new h(this._flushBufferReport,this))},c.prototype._bufferReport=function(a){if(!this._isDestroyed){var b=a[q];if(b){var c=b.sessionData.sessionId();this._reportBuffer[c]=this._reportBuffer[c]||[],this._reportBuffer[c].push(b)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var d={};d[p]=!0,d[r]=1,this._channel.command(s,d)}}},c.prototype._flushBufferReport=function(){function a(a){if(a)for(var c=0;c<a.length;c++){var d=a[c],e=d.sessionData.sessionId();b._tsHistory[e]=b._tsHistory[e]||{};var f=d.eventData.type()+"."+(d.assetData.type()==l.TYPE_AD?d.assetData.adData().adId():d.assetData.videoId());b._tsHistory[e].hasOwnProperty(f)&&d.eventData.prevTs(b._tsHistory[e][f]),b._tsHistory[e][f]=d.eventData.ts()}}if(!this._isDestroyed){var b=this;for(var c in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(c)){var g=f(e(d(this._reportBuffer[c])));a(g);for(var h=0;h<g.length;h++){var i=g[h],k={};k[q]=i,this._channel.trigger(new j(n,k))}}this._reportBuffer={};var m=this._channel.request(v),o=this._tsHistory[m]||{};this._tsHistory={},this._tsHistory[m]=o,this._isBufferingInProgress=!1}},c.prototype._onContextReportAvailable=function(a){var b=a.data;this._workQueue.addCommand(new h(this._bufferReport,this,[b]))},c.prototype._onClockFlushFilterTick=function(a){this.flush()},c.prototype._installEventListeners=function(){this._channel.on(m,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var m="context:report_available",n="filter:data_available",o="clock:flush_filter.tick",p="reset",q="report",r="repeat_count",s="clock:flush_filter.resume",t=250,u=250,v="session_id",w="ah::ReportFilter";b.filter.ReportFilter=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.context.InputDataValidator=c}(a.ADB.va,b),function(a,b){"use strict";function c(a,b){if(!b)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw new Error("Reference to the context object cannot be NULL");this._context=a}var d=b.model.Report;
c.prototype.createReportForItem=function(a){return this._logger.debug(e,"Creating report for item: "+a.eventData.type()),new d(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var e="ah::ReportFactory";b.context.ReportFactory=c}(a.ADB.core,b),function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=fa,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new j,this._serviceProviderData=new k,this._userData=new l,this._aamData=new m,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new u(this,this._logger),this._inputDataValidator=new v(function(a){this._logger.error(w,a.getMessage()+" | "+a.getDetails()),this._channel.trigger(new h(y,a))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var f=c.md5,g=c.ObjectUtils,h=a.Event,i=d.model.SessionDao,j=d.model.AdobeAnalyticsDao,k=d.model.ServiceProviderDao,l=d.model.UserDao,m=d.model.AudienceManagerDao,n=d.model.EventDao,o=d.model.AssetDao,p=d.model.StreamDao,q=d.model.QoSDao,r=d.model.AdDao,s=d.model.ChapterDao,t=d.model.TrackItem,u=d.context.ReportFactory,v=d.context.InputDataValidator;e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners())},e.prototype._onApiAnalyticsStart=function(a){this._logger.debug(w,"#_onApiAnalyticsStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._userData.visitorId(b.vid),this._userData.analyticsVisitorId(b.aid),this._userData.marketingCloudVisitorId(b.mid),this._aamData.audienceManagerBlob(b.blob),this._aamData.audienceManagerLocationHint(b.loc_hint),b.customerIDs&&(this._cuserData=b.customerIDs),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_START,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(c)}},e.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(w,"#_onApiAnalyticsAdStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_AD_START,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoLoad=function(a){var b=a.data;this._logger.debug(w,"#_onApiVideoLoad(rsid="+b.rsid+", aa_trackingServer="+b.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(b,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},e.prototype._onApiVideoUnload=function(a){return this._logger.debug(w,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(w,"#_onApiVideoUnload() > No active tracking session.")},e.prototype._onApiVideoStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoStart(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(b.rsid),this._adobeAnalyticsData.trackingServer(b.trackingServer),this._adobeAnalyticsData.ssl(Number(b.useSsl)),this._serviceProviderData.ovp(b.ovp),this._serviceProviderData.sdk(b.sdk),this._serviceProviderData.channel(b.channel),this._serviceProviderData.libVersion(b.version),this._serviceProviderData.apiLevel(b.apiLvl),this._activeAssetId=b.videoId,this._serviceProviderData.playerName(b.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.publisher(b.publisher),this._assetData.name(b.videoName),this._streamData.type(b.streamType),this._updateQoSInfo(b);var c=b.metaNielsen?g.merge(b.metaVideo,b.metaNielsen):b.metaVideo,d=new t(this,n.EVENT_TYPE_START,b.playhead,c,b._eventData[E]);this._sendHit(d)}},e.prototype._onApiVideoResume=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoResume(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._activeAssetId=b.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.name(b.videoName),this._streamData.type(b.streamType);var c=new t(this,n.EVENT_TYPE_RESUME,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoComplete=function(a){this._logger.debug(w,"#_onApiVideoComplete()");var b=a.data;if(this._checkCall("_onApiVideoComplete")){var c=new t(this,n.EVENT_TYPE_COMPLETE,this._assetData.length(),null,b._eventData[E]);this._sendHit(c),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(a){this._logger.debug(w,"#_onApiPlay()");var b=a.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_PLAY,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiPause=function(a){this._logger.debug(w,"#_onApiPause()");var b=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=b.playheadStalled?n.EVENT_TYPE_STALL:n.EVENT_TYPE_PAUSE,d=new t(this,c,b.playhead,null,b._eventData[E]);b._eventData.hasOwnProperty(F)&&(d.filterReport=b._eventData[F]),this._sendHit(d)}},e.prototype._onApiBufferStart=function(a){this._logger.debug(w,"#_onApiBufferStart()");var b=a.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BUFFER,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiSeekStart=function(a){this._logger.debug(w,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},e.prototype._onApiSeekComplete=function(a){this._logger.debug(w,"#_onApiSeekComplete()");var b=a.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(b.isInAd){if(!this._inputDataValidator.validateFields(b,["adId","adPosition","podPosition","podPlayerName"]))return;var c=f(this._assetData.videoId())+"_"+b.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==c&&parseInt(this._stashedAdData.podPosition(),10)==b.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=b.adId;var d=new r;d.adId(this._activeAssetId),d.adName(b.adName),d.adLength(b.adLength),d.podId(c),d.resolver(b.podPlayerName),d.podPosition(b.podPosition+""),d.podName(b.podName),d.podOffset(b.podSecond),d.sid(this._generateSessionId()),this._assetData.adData(d)}this._assetData.type(o.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(b.isInChapter){if(!this._inputDataValidator.validateFields(b,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&b.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var e=new s;e.id(f(this._assetData.videoId())+"_"+b.chapterPosition),e.name(b.chapterName),e.length(b.chapterLength),e.position(b.chapterPosition),e.offset(b.chapterOffset),e.sid(this._generateSessionId()),this._assetData.chapterData(e)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},e.prototype._onApiAdStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiAdStart(id="+b.adId+", player_name="+b.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+b.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(b,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=b.adId;var c=new r;c.adId(this._activeAssetId),c.adName(b.adName),c.adLength(b.adLength),c.resolver(b.podPlayerName),c.podId(f(this._assetData.videoId())+"_"+b.podPosition),c.podPosition(b.adPosition+""),c.podName(b.podName),c.podOffset(b.podSecond),c.sid(this._generateSessionId()),this._assetData.adData(c),this._assetData.type(o.TYPE_AD),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaAd);d=b.metaNielsen?g.merge(d,b.metaNielsen):d;var e=new t(this,n.EVENT_TYPE_START,b.playhead,d,b._eventData[E]);this._sendHit(e)}},e.prototype._onApiAdComplete=function(a){this._logger.debug(w,"#_onApiAdComplete()");var b=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(this._assetData.type()!=o.TYPE_AD)return void this._logger.warn(w,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_COMPLETE,b.playhead,null,b._eventData[E]);this._sendHit(c),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},e.prototype._onApiChapterStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiChapterStart(name="+b.chapterName+", length="+b.chapterLength+", position="+b.chapterPosition+", chapter_offset="+b.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(b,["playhead","chapterPosition","chapterOffset","chapterLength"])){var c=new s;c.id(f(this._assetData.videoId())+"_"+b.chapterPosition),c.name(b.chapterName),c.length(b.chapterLength),c.position(b.chapterPosition),c.offset(b.chapterOffset),c.sid(this._generateSessionId()),this._assetData.chapterData(c),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaChapter),e=new t(this,n.EVENT_TYPE_CHAPTER_START,b.playhead,d,b._eventData[E]);e.assetData.adData(null),e.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(e)}},e.prototype._onApiChapterComplete=function(a){this._logger.debug(w,"#_onApiChapterComplete()");var b=a.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(w,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_CHAPTER_COMPLETE,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c),this._assetData.chapterData(null)}},e.prototype._onApiBitrateChange=function(a){this._logger.debug(w,"#_onApiBitrateChange()");var b=a.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BITRATE_CHANGE,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiTrackError=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiTrackError(source="+b._eventData.source+", err_id="+b._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(w,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||b._eventData.source===x){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0,null,b._eventData[E]);c.eventData.id(b._eventData.error_id),c.eventData.source(b._eventData.source),this._sendHit(c)}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this._logger.debug(w,"#_onApiTrackInternalError(source="+b.source+", err_id="+b.error_id+")"),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0);c.eventData.id(b.error_id),c.eventData.source(b.source),this._sendHit(c)},e.prototype._onApiQuantumEnd=function(a){this._logger.debug(w,"#_onApiQuantumEnd(interval="+this._channel.request(B)+")");var b=a.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(b,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(b.playhead),this._updateQoSInfo(b),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},e.prototype._onNetworkCheckStatusComplete=function(a){var b=a.data;this._trackExternalErrors=b[I],this._reportingInterval=b[J],this._reportingInterval||(this._reportingInterval=fa),this._logger.debug(w,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._onResetSessionId=function(a){var b=this._generateSessionId();this._sessionData=new i,this._sessionData.sessionId(b),this._logger.debug(w,"#_resetSessionId(new sessionId="+b+")")},e.prototype._installEventListeners=function(){this._channel.on(K,this._onApiAnalyticsStart,this),this._channel.on(L,this._onApiAnalyticsAdStart,this),this._channel.on(M,this._onApiVideoLoad,this),this._channel.on(N,this._onApiVideoUnload,this),this._channel.on(O,this._onApiVideoStart,this),this._channel.on(P,this._onApiVideoComplete,this),this._channel.on(Q,this._onApiVideoResume,this),this._channel.on(R,this._onApiAdStart,this),this._channel.on(S,this._onApiAdComplete,this),this._channel.on(T,this._onApiPlay,this),this._channel.on(U,this._onApiPause,this),this._channel.on(V,this._onApiBufferStart,this),this._channel.on(W,this._onApiSeekStart,this),this._channel.on(X,this._onApiSeekComplete,this),this._channel.on(Y,this._onApiChapterStart,this),this._channel.on(Z,this._onApiChapterComplete,this),this._channel.on(aa,this._onApiBitrateChange,this),this._channel.on($,this._onApiTrackError,this),this._channel.on(_,this._onApiTrackInternalError,this),this._channel.on(ba,this._onApiQuantumEnd,this),this._channel.on(da,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(C,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this._logger.debug(w,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new p,this._qosData=new q,this._sessionData=new i,this._assetData=new o,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},e.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},e.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||0),this._qosData.fps(a.fps||0),this._qosData.droppedFrames(a.droppedFrames||0),null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?this._isVideoComplete?(this._logger.warn(w,"#"+a+"() > The video content already completed."),!1):!0:(this._logger.warn(w,"#"+a+"() > No active tracking session."),!1)},e.prototype._updateLastInBandItem=function(a){var b=(new Date).getTime(),c=1e3*Math.abs(a.eventData.playhead()-this._lastInBandItem.eventData.playhead()),d=Math.abs(b-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_STALL?(d*ea>=c||this._doNotOverrideEventDuration)&&d<=this._reportingInterval*ea*1e3?this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()):(this._logger.warn(w,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+c+" tsDelta:"+d+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(b),this._lastInBandItem.eventData.playhead(a.eventData.playhead()),this._lastInBandItem.qosData.startupTime(a.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden},e.prototype._sendHit=function(a){function b(a){var b=c._reportFactory.createReportForItem(a);b.qosData.isStartupTimeOverridden||b.qosData.startupTime(c._autoComputedStartupTime);var e={};e[G]=b,c._channel.trigger(new h(ca,e)),(b.eventData.type()==n.EVENT_TYPE_PLAY||b.eventData.type()==n.EVENT_TYPE_BUFFER||b.eventData.type()==n.EVENT_TYPE_START)&&(d={},d[H]=!0,c._channel.command(z,d))}var c=this,d={};switch(a.eventData.type()){case n.EVENT_TYPE_START:case n.EVENT_TYPE_PLAY:case n.EVENT_TYPE_PAUSE:case n.EVENT_TYPE_STALL:case n.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==n.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==o.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),a!=this._lastInBandItem&&b(this._lastInBandItem)),b(a),this._lastInBandItem=a,d={},d[H]=!0,this._channel.command(z,d);break;case n.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(a.assetData.type()==o.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),a.assetData.type()==o.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,d={},d[H]=!0,this._channel.command(A,d)):a.assetData.type()==o.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(o.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case n.EVENT_TYPE_CHAPTER_START:case n.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==n.EVENT_TYPE_CHAPTER_START?new s(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),b(this._lastInBandItem));break;default:b(a)}};var w="ah::Context",x="sourceErrorSDK",y="error",z="clock:reporting.resume",A="clock:reporting.pause",B="reporting_interval",C="session_id",D="reset_session_id",E="callback",F="filter_report",G="report",H="reset",I="track_external_errors",J="reporting_interval",K="api:aa_start",L="api:aa_ad_start",M="api:video_load",N="api:video_unload",O="api:video_start",P="api:video_complete",Q="api:video_resume",R="api:ad_start",S="api:ad_complete",T="api:play",U="api:pause",V="api:buffer_start",W="api:seek_start",X="api:seek_complete",Y="api:chapter_start",Z="api:chapter_complete",$="api:track_error",_="api:track_internal_error",aa="api:bitrate_change",ba="api:quantum_end",ca="context:report_available",da="net:check_status_complete",ea=1.5,fa=10;d.context.Context=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";function b(a,b){this.trackingServer=a,this.publisher=b,this.ssl=!1,this.ovp=c,this.sdk=c,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var c="unknown";a.AdobeHeartbeatPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeHeartbeatPluginDelegate=b}(b),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,q),this._radio=new i(this._logger),this._channel=this._radio.channel(y),this._delegate=a,this._context=new l(this._channel,this._logger),this._filter=new m(this._channel,this._logger),this._network=new n(this._channel,this._logger),this._setupDataResolver()}var e=a.Event,f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Radio,j=b.ErrorInfo,k=b.Version,l=c.context.Context,m=c.filter.ReportFilter,n=c.network.Network,o=c.clock.Clock,p=c.AdobeHeartbeatPluginConfig;a.extend(d,g),d.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var b=this._config.trackingServer+"/settings/",c={};c[ba]=this._config.trackingServer,c[ca]=b,c[da]=this._config.publisher,c[ea]=this._config.quietMode,c[fa]=this._config.ssl,this._channel.trigger(new e(ja,c)),this._isConfigured=!0},d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._channel.on(z,this._onError,this),this._clock=new o(this._pluginManager,this._channel,this._logger),this._channel.command(Ea),this._channel.trigger(new e(La)),this._registerCommands(),this._registerBehaviours()},d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},d.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},d.prototype._cmdAnalyticsError=function(a){this._errorInfo||(this._errorInfo=new j("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},d.prototype._cmdAnalyticsStart=function(a){if(this._canProcess()){var b={};b[ga]=a.visitorOptedOut,this._channel.trigger(new e(ka,b)),this._channel.trigger(new e(ha,a))}},d.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new e(ia,a))},d.prototype._cmdVideoLoad=function(a){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new e(ma,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new e(la,a)),this._isTrackingSessionActive=!0)},d.prototype._cmdVideoUnload=function(a){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new e(ma,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},d.prototype._cmdVideoStart=function(a){this._canProcess()&&this._channel.trigger(new e(na,a))},d.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new e(oa,a))},d.prototype._cmdVideoResume=function(a){this._canProcess()&&this._channel.trigger(new e(pa,a))},d.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new e(ta,a)),this._isPaused=!0,this._runIdleTimer(!0))},d.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new e(qa,a)),this._resumePlaybackIfPossible(a))},d.prototype._cmdAdComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(ra,a)),a.isInAdBreak||this._resumePlaybackIfPossible(a))},d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new e(ua,a)),this._isBuffering=!0,this._runIdleTimer(!0))},d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._channel.trigger(new e(va,a)),this._channel.trigger(new e(ta,a)),this._isSeeking=!0,this._runIdleTimer(!0))},d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(wa,a)),this._isSeeking=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new e(xa,a))},d.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new e(ya,a))},d.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new e(Ba,a))},d.prototype._cmdTrackError=function(a){this._canProcess()&&this._channel.trigger(new e(za,a))},d.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new e(Ca,a))},d.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(V),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(T))},d.prototype._onError=function(a){this._errorInfo=a.data;var b={};b[_]=Da,b[aa]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new e(Aa,b)),this._runReportingTimer(!1),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},d.prototype._runIdleTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ja,b):this._channel.command(Ka,b)},d.prototype._runFlushFilterTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ha,b):this._channel.command(Ia,b)},d.prototype._runReportingTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Fa,b):this._channel.command(Ga,b)},d.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(t,C),this,"handleVideoLoad",[new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new f(t,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new f(t,E),this,"handleVideoStart",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"ssl","useSsl"),new h(u,"meta","metaNielsen"),new h(r,"publisher","publisher"),new h(r,"sdk","sdk"),new h(r,"ovp","ovp"),new h(r,"version","version"),new h(r,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new f(t,G),this,"handleVideoComplete",[new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,F),this,"handleVideoResume",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new f(t,H),this,"handlePlay",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,I),this,"handlePause",[new h(t,"video.playhead","playhead"),new h(t,"video.playheadStalled","playheadStalled"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,J),this,"handleAdStart",[new h(t,"video.playhead","playhead"),new h(t,"ad.id","adId"),new h(t,"ad.name","adName"),new h(t,"ad.length","adLength"),new h(t,"ad.position","adPosition"),new h(t,"pod.name","podName"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"pod.startTime","podSecond"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,K),this,"handleAdComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,L),this,"handleBufferStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,M),this,"handleBufferComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,N),this,"handleSeekStart",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(t,O),this,"handleSeekComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAd","isInAd"),new h(t,"ad.id","adId"),new h(t,"ad.position","adPosition"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"chapter.isInChapter","isInChapter"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),
this._pluginManager.registerBehaviour(new f(t,P),this,"handleChapterStart",[new h(t,"video.playhead","playhead"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.chapter.*","metaChapter"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,Q),this,"handleChapterComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,R),this,"handleBitrateChange",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,S),this,"handleTrackError"),this._pluginManager.registerBehaviour(new f(v,X),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(v,Z),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new f(r,V),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,z),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new f(s,A),this,"handleAnalyticsStart",[new h(s,"vid","vid"),new h(s,"aid","aid"),new h(s,"mid","mid"),new h(s,"customerIDs","customerIDs"),new h(s,"visitorOptedOut","visitorOptedOut"),new h(s,"blob","blob"),new h(s,"loc_hint","loc_hint"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,B),this,"handleAnalyticsAdStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")])},d.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return k.getVersion()},a.api_level=function(){return k.getApiLevel()},a.tracking_server=function(){return b._config?b._config.trackingServer:null},a.publisher=function(){return b._config?b._config.publisher:null},a.quiet_mode=function(){return b._config?b._config.quietMode:!1},a.ovp=function(){return b._config?b._config.ovp:null},a.sdk=function(){return b._config?b._config.sdk:null},a.is_primetime=function(){return b._config?b._config.__isPrimetime:!1},a.psdk_version=function(){return b._config?b._config.__psdkVersion:null},a.session_id=function(){return b._channel.request(w)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},d.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new e(sa,a)))},d.prototype._resumePlaybackFromIdle=function(){this._trigger(V),this._filter.clear(),this._channel.trigger(new e(x)),this._trigger(U),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var q="adobe-heartbeat",r=q,s="adobe-analytics",t="player",u="nielsen",v="service.clock",w="session_id",x="reset_session_id",y="heartbeat-channel",z="error",A="aa_start",B="sc_ad_start",C="video_load",D="video_unload",E="video_start",F="video_resume",G="video_complete",H="play",I="pause",J="ad_start",K="ad_complete",L="buffer_start",M="buffer_complete",N="seek_start",O="seek_complete",P="chapter_start",Q="chapter_complete",R="bitrate_change",S="track_error",T="video_idle_start",U="video_idle_resume",V="quantum_close",W="heartbeat.reporting",X=W+".tick",Y="heartbeat.idle",Z=Y+".tick",$="reset",_="source",aa="error_id",ba="tracking_server",ca="check_status_server",da="publisher",ea="quiet_mode",fa="ssl",ga="visitor_opt_out",ha="api:aa_start",ia="api:aa_ad_start",ja="api:config",ka="api:update_visitor_optout",la="api:video_load",ma="api:video_unload",na="api:video_start",oa="api:video_complete",pa="api:video_resume",qa="api:ad_start",ra="api:ad_complete",sa="api:play",ta="api:pause",ua="api:buffer_start",va="api:seek_start",wa="api:seek_complete",xa="api:chapter_start",ya="api:chapter_complete",za="api:track_error",Aa="api:track_internal_error",Ba="api:bitrate_change",Ca="api:quantum_end",Da="sourceErrorHeartbeat",Ea="clock:check_status.resume",Fa="clock:reporting.resume",Ga="clock:reporting.pause",Ha="clock:flush_filter.resume",Ia="clock:flush_filter.pause",Ja="clock:idle.resume",Ka="clock:idle.pause",La="clock:check_status.get_settings";c.AdobeHeartbeatPlugin=d}(a.ADB.core,a.ADB.va,b),a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=b)}(this);

// AdobeAnalyticsPlugin
!function(a){if("undefined"==typeof b)var b={};!function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.InputDataValidator=c}(a.ADB.va,b),function(a){"use strict";function b(){this.channel=c,this.debugLogging=!1}var c="";a.AdobeAnalyticsPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeAnalyticsPluginDelegate=b}(b),function(a,b,c,d){"use strict";function e(a,b){if(e.__super__.constructor.call(this,r),!a)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=a,this._delegate=b,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new k(!0,w),this._inputDataValidator=new q(function(a){this._errorInfo=a,this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(x,a),b._delegate&&b._delegate.onError(b._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Channel,j=a.radio.Command,k=a.radio.CommandQueue,l=b.ErrorInfo,m=c.md5,n=c.StringUtils,o=c.ObjectUtils,p=d.AdobeAnalyticsPluginConfig,q=d.InputDataValidator;a.extend(e,g),e.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},e.prototype.bootstrap=function(a){e.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},e.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),e.__super__.setup.call(this)},e.prototype.setVideoMetadata=function(a){this._videoMetadata=o.clone(a)},e.prototype.setAdMetadata=function(a){this._adMetadata=o.clone(a)},e.prototype.setChapterMetadata=function(a){this._chapterMetadata=o.clone(a)},e.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):e.__super__._canProcess.call(this)},e.prototype._cmdVideoLoad=function(a){this._errorInfo=null},e.prototype._cmdVideoStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpen,this,[a]))},e.prototype._cmdAdStart=function(a){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpenAd,this,[a]))},e.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new l("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(x,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},e.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var a=0;a<this._customMetaKeys.length;a++){var b=this._customMetaKeys[a];delete this._appMeasurement.contextData[b]}this._customMetaKeys=[]},e.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playerName"])){this._resetAppMeasurementContextData();for(var b in a.metaVideo)a.metaVideo.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaVideo[b],this._customMetaKeys.push(b));if(a.metaNielsen)for(var b in a.metaNielsen)a.metaNielsen.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaNielsen[b],this._customMetaKeys.push(b));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.pev3=y,this._appMeasurement.pe=a.isPrimetime?B:A,this._appMeasurement.track();var c=this;setTimeout(function(){c._trigger(E,a)},0)}},e.prototype._executeOpenAd=function(a){var b=m(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", streamType="+a.streamType+", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond,this._resetAppMeasurementContextData();var c;for(c in a.metaVideo)a.metaVideo.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaVideo[c],this._customMetaKeys.push(c));for(c in a.metaAd)a.metaAd.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaAd[c],this._customMetaKeys.push(c));if(a.metaNielsen)for(var c in a.metaNielsen)a.metaNielsen.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaNielsen[c],this._customMetaKeys.push(c));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=a.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=a.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=a.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(a.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=a.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=b,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(a.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=z,this._appMeasurement.pe=a.isPrimetime?D:C,this._appMeasurement.track();var d=this;setTimeout(function(){d._trigger(F,a)},0)}},e.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account},a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer},a.ssl=function(){return b._appMeasurement.ssl},a.vid=function(){return b._appMeasurement.visitorID},a.aid=function(){return b._appMeasurement.analyticsVisitorID},a.mid=function(){return b._appMeasurement.marketingCloudVisitorID},a.blob=function(){return b._appMeasurement.audienceManagerBlob},a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""},a.customerIDs=function(){var a=b._appMeasurement.visitor.getCustomerIDs(),c={};for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?c[d+".as"]=e[f]:c[d+"."+f]=e[f]);c[d+".as"]||(c[d+".as"]="0")}}return c},a.channel=function(){return b._config?b._config.channel:null},a.meta=function(a){var c=a.split(".");if(c.length<2)return null;var d=c.shift();switch(a=c.join("."),d){case"video":return a==i.WILDCARD?b._videoMetadata:b._videoMetadata[a];case"ad":return a==i.WILDCARD?b._adMetadata:b._adMetadata[a];case"chapter":return a==i.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}},a.visitorOptedOut=function(){return void 0==b._appMeasurement.visitorOptedOut?!1:b._appMeasurement.visitorOptedOut},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},n.startsWith(e,"meta.")?c[e]=a.meta(e.split("meta.")[1]):c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},e.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},e.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(u,G),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new f(u,H),this,"handleVideoStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"video.playerName","playerName"),new h(u,"video.streamType","streamType"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(u,I),this,"handleAdStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.playhead","playhead"),new h(u,"video.playerName","playerName"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"ad.id","adId"),new h(u,"ad.length","adLength"),new h(u,"ad.position","adPosition"),new h(u,"ad.name","adName"),new h(u,"pod.name","podName"),new h(u,"pod.position","podPosition"),new h(u,"pod.playerName","podPlayerName"),new h(u,"pod.startTime","podSecond"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(v,x),this,"handleHeartbeatPluginError")},e.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var r="adobe-analytics",s=r,t="nielsen",u="player",v="adobe-heartbeat",w=2e3,x="error",y="video",z="videoAd",A="ms_s",B="msp_s",C="msa_s",D="mspa_s",E="aa_start",F="sc_ad_start",G="video_load",H="video_start",I="ad_start";d.AdobeAnalyticsPlugin=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";var b={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},c={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};a.VideoMetadataKeys=b,a.AdMetadataKeys=c}(b),a.ADB.va.plugins.aa||(a.ADB.va.plugins.aa=b)}(this);

// MediaHeartbeat
!function(a){!function(a){"use strict";function b(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}a.MediaHeartbeatConfig=b,a.MediaHeartbeatConfig.sharedInstance=new b}(a.ADB.va),function(a){"use strict";function b(){this.data={}}var c=a.plugins.videoplayer.VideoInfo,d=a.plugins.videoplayer.AdBreakInfo,e=a.plugins.videoplayer.AdInfo,f=a.plugins.videoplayer.ChapterInfo,g=a.plugins.videoplayer.QoSInfo;b.MEDIAINFO_KEY_NAME="a.name",b.MEDIAINFO_KEY_VIDEOID="a.videoId",b.MEDIAINFO_KEY_ADID="a.adId",b.MEDIAINFO_KEY_LENGTH="a.length",b.MEDIAINFO_KEY_PLAYHEAD="a.playhead",b.MEDIAINFO_KEY_STREAMTYPE="a.streamType",b.MEDIAINFO_KEY_POSITION="a.position",b.MEDIAINFO_KEY_STARTTIME="a.startTime",b.MEDIAINFO_KEY_BITRATE="a.bitrate",b.MEDIAINFO_KEY_FPS="a.fps",b.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",b.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",b.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",b.prototype.setValue=function(a,b){this.data[a]=b},b.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},b.prototype.createVideoInfo=function(){var a=new c;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_VIDEOID)?this.getValue(b.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(b.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(b.MEDIAINFO_KEY_PLAYHEAD):0,a.streamType=null!=this.getValue(b.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(b.MEDIAINFO_KEY_STREAMTYPE):"",a},b.prototype.createAdBreakInfo=function(){var a=new d;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a},b.prototype.createAdInfo=function(){var a=new e;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_ADID)?this.getValue(b.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createChapterInfo=function(){var a=new f;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createQoSInfo=function(){var a=new g;return a.bitrate=null!=this.getValue(b.MEDIAINFO_KEY_BITRATE)?this.getValue(b.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(b.MEDIAINFO_KEY_FPS)?this.getValue(b.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(b.MEDIAINFO_KEY_STARTUPTIME):0,a},a.MediaObject=b}(a.ADB.va),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this),this._heartbeat=a}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}function e(a){e.__super__.constructor.call(this),this._heartbeat=a}function f(a){f.__super__.constructor.call(this),this._heartbeat=a}a.extend(c,b.plugins.aa.AdobeAnalyticsPluginDelegate),c.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(d,b.plugins.ah.AdobeHeartbeatPluginDelegate),d.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(e,b.HeartbeatDelegate),e.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(f,b.plugins.videoplayer.VideoPlayerPluginDelegate),f.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},f.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},f.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},f.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},f.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null},b._MediaAnalyticsPluginDelegate=c,b._MediaHeartbeatPluginDelegate=d,b._ADBMediaHeartbeatDelegate=e,b._MediaHeartbeatVideoPlayerPluginDelegate=f}(a.ADB.core,a.ADB.va),function(a,b){"use strict";function c(){}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}var e=b.MediaHeartbeatConfig;b.plugins.nielsen&&(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",e.prototype.nielsenConfigKey=void 0,e.prototype.nielsenAppInfo=void 0,a.extend(d,b.plugins.nielsen.NielsenPluginDelegate),d.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof a)return a}return null},d.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var a=this._heartbeat._currentAdMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof a)return a}return null},d.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof a)return a}return null},d.prototype.onError=function(a){this._heartbeat&&b.MediaHeartbeat._onError.call(this._heartbeat,a)},b.MediaHeartbeatNielsen=c,b._MediaHeartbeatNielsenPluginDelegate=d)}(a.ADB.core,a.ADB.va),function(b,c){"use strict";function d(){}function e(b,c,d){if(this._logger=new y,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=b,d)this.appMeasurement=d;else{if(!a.s)return void this._logger.error(X,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=a.s}c&&"object"==typeof c&&void 0!=c.trackingServer?this._config=c:this._logger.error(X,"Valid config required for initialising MediaHeartbeat")}function f(a,b){if(a==e.Event.AdBreakStart){if(!t.call(this,W))return void this._logger.error(X,"API call trackEvent:AdBreakStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._adBreakInfo=b.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error(X,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event.")}else{if(!t.call(this,W,!0))return void this._logger.error(X,"API call trackEvent:AdBreakComplete is unsupported in the current state.");this._adBreakInfo=void 0}}function g(a,b,c){if(a==e.Event.AdStart){if(!t.call(this,V))return void this._logger.error(X,"API call trackEvent:AdStart is unsupported in the current state.");if(b&&"object"==typeof b&&b.setValue){this._currentAdMediaObject=b,this._adInfo=b.createAdInfo();var d=b.getValue(e.MediaObjectKey.StandardAdMetadata);if(d&&"object"==typeof d)for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);this._aaPlugin&&this._aaPlugin.setAdMetadata(c),this._playerPlugin.trackAdStart()}else this._logger.error(X,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.")}else if(a==e.Event.AdComplete){if(!t.call(this,V,!0))return void this._logger.error(X,"API call trackEvent:AdComplete is unsupported in the current state.");this._playerPlugin.trackAdComplete(),this._adInfo=null}else{if(!t.call(this,V,!0))return void this._logger.error(X,"API call trackEvent:AdSkip is unsupported in the current state.");this._adInfo=null}}function h(a){if(a==e.Event.SeekStart){if(!t.call(this,T))return void this._logger.error(X,"API call trackEvent:SeekStart is unsupported in the current state.");this._playerPlugin.trackSeekStart()}else{if(!t.call(this,T,!0))return void this._logger.error(X,"API call trackEvent:SeekComplete is unsupported in the current state.");this._playerPlugin.trackSeekComplete()}}function i(a,b,c){if(a==e.Event.ChapterStart){if(!t.call(this,U))return void this._logger.error(X,"API call trackEvent:ChapterStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._chapterInfo=b.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(c),this._playerPlugin.trackChapterStart()):this._logger.error(X,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event.")}else if(a==e.Event.ChapterComplete){if(!t.call(this,U,!0))return void this._logger.error(X,"API call trackEvent:ChapterComplete is unsupported in the current state.");this._chapterInfo=null,this._playerPlugin.trackChapterComplete()}else{if(!t.call(this,U,!0))return void this._logger.error(X,"API call trackEvent:ChapterSkip is unsupported in the current state.");this._chapterInfo=null}}function j(a){if(a==e.Event.BufferStart){if(!t.call(this,S))return void this._logger.error(X,"API call trackEvent:BufferStart is unsupported in the current state.");this._playerPlugin.trackBufferStart()}else{if(!t.call(this,S,!0))return void this._logger.error(X,"API call trackEvent:BufferComplete is unsupported in the current state.");this._playerPlugin.trackBufferComplete()}}function k(){return w.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error(X,"API call trackEvent:BitrateChange is unsupported in the current state.")}function l(a){if(a&&"object"==typeof a&&a.setValue){var b=a.getValue(A.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin&&b&&"string"==typeof b&&this._playerPlugin.trackTimedMetadata(b)}}function m(){this._aaPlugin=new H(this.appMeasurement,new J);var a=new I;a.channel=this._config.channel?this._config.channel:"",a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(a),this._plugins.push(this._aaPlugin)}function n(){this._ahPlugin=new K(new M);var a=new L(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.ovp=this._config.ovp?this._config.ovp:"",a.ssl=this._config.ssl,a.sdk=this._config.appVersion?this._config.appVersion:"";var b=s.call(this);b&&b.length>0&&(a.__primetime=!0,a.__psdkVersion=b),this._ahPlugin.configure(a),this._plugins.push(this._ahPlugin)}function o(){this._playerPlugin=new E(new G(this));var a=new F;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(a),this._plugins.push(this._playerPlugin)}function p(){if(c.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new c.plugins.nielsen.NielsenPlugin(new c._MediaHeartbeatNielsenPluginDelegate(this));var a=new c.plugins.nielsen.NielsenPluginConfig;a.nielsenPluginConfig=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.appInfo=this._config.nielsenAppInfo,a.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(a),this._plugins.push(this._nielsenPlugin)}}function q(){var a=new C;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new B(new D(this),this._plugins),this._heartbeat.configure(a)}function r(a){this._logger.error(X,a.getMessage()+" | "+a.getDetails())}function s(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(Y):null}function t(a,b){if(a!=O&&(!this._state[O]||this._state[R]))return!1;if(a===P&&u.call(this),b?!this._state[a]:this._state[a])return!1;switch(a){case P:this._state[Q]=b;break;case Q:this._state[P]=b;break;case W:if(!b&&this._state[V])return!1;break;case V:if(!b&&!this._state[W])return!1;case U:b||this._state[P]||this.trackPlay()}return this._state[a]=!b,!0}function u(){this._state[T]&&this.trackEvent(e.Event.SeekComplete),this._state[S]&&this.trackEvent(e.Event.BufferComplete)}function v(a){this._state[a]=!1}function w(){return this._state[O]}function x(){this._state={}}var y=b.Logger,z=c.plugins.videoplayer.AssetType,A=c.MediaObject,B=c.Heartbeat,C=c.HeartbeatConfig,D=c._ADBMediaHeartbeatDelegate,E=c.plugins.videoplayer.VideoPlayerPlugin,F=c.plugins.videoplayer.VideoPlayerPluginConfig,G=c._MediaHeartbeatVideoPlayerPluginDelegate,H=c.plugins.aa.AdobeAnalyticsPlugin,I=c.plugins.aa.AdobeAnalyticsPluginConfig,J=c._MediaAnalyticsPluginDelegate,K=c.plugins.ah.AdobeHeartbeatPlugin,L=c.plugins.ah.AdobeHeartbeatPluginConfig,M=c._MediaHeartbeatPluginDelegate;d.prototype.getCurrentPlaybackTime=function(){return null},d.prototype.getQoSObject=function(){return null},e.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},e.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},e.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},e.VideoMetadataKeys=c.plugins.aa.VideoMetadataKeys,e.AdMetadataKeys=c.plugins.aa.AdMetadataKeys,e.version=function(){return c.Version.getVersion()},e.prototype.trackSessionStart=function(a,b){if(!t.call(this,O))return void this._logger.error(X,"API call trackSessionStart is unsupported in the current state.");if(!a||"object"!=typeof a||!a.setValue)return v.call(this,O),void this._logger.error(X,"Invalid Media Info object");this._currentContentMediaObject=a,this._videoInfo=a.createVideoInfo(),this._videoInfo.playerName=void 0!=this._config.playerName?this._config.playerName:"";var c=a.getValue(e.MediaObjectKey.StandardVideoMetadata);if(c&&"object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);var f=a.getValue(e.MediaObjectKey.VideoResumed);f&&"boolean"==typeof f&&(this._videoInfo.resumed=a.getValue(e.MediaObjectKey.VideoResumed)),N.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(b),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())},e.prototype.trackPlay=function(){return t.call(this,P)?void this._playerPlugin.trackPlay():void this._logger.error(X,"API call trackPlay is unsupported in the current state.")},e.prototype.trackPause=function(){return t.call(this,Q)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(X,"API call trackPause is unsupported in the current state.")},e.prototype.trackComplete=function(){return t.call(this,R)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(X,"API call trackComplete is unsupported in the current state.")},e.prototype.trackSessionEnd=function(){return t.call(this,O,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),x.call(this),void(this._plugins=[])):(x.call(this),this._plugins=[],void this._logger.error(X,"API call trackSessionEnd is unsupported in the current state."))},e.prototype.trackError=function(a){return w.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(a?a:"unknown_error_id")):void this._logger.error(X,"API call trackError is unsupported in the current state.")},e.prototype.trackEvent=function(a,b,c){switch(a){case e.Event.AdBreakStart:case e.Event.AdBreakComplete:f.call(this,a,b);break;case e.Event.AdStart:case e.Event.AdComplete:case e.Event.AdSkip:g.call(this,a,b,c);break;case e.Event.SeekStart:case e.Event.SeekComplete:h.call(this,a);break;case e.Event.ChapterStart:case e.Event.ChapterComplete:case e.Event.ChapterSkip:i.call(this,a,b,c);break;case e.Event.BufferStart:case e.Event.BufferComplete:j.call(this,a);break;case e.Event.BitrateChange:k.call(this);break;case e.Event.TimedMetadataUpdate:l.call(this,b)}};var N=function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");m.call(this),n.call(this),o.call(this),p.call(this),q.call(this)},O=1,P=2,Q=3,R=4,S=5,T=6,U=7,V=8,W=9;e.createMediaObject=function(a,b,c,d){var f=new A;f.setValue(A.MEDIAINFO_KEY_VIDEOID,b),f.setValue(A.MEDIAINFO_KEY_NAME,a),f.setValue(A.MEDIAINFO_KEY_LENGTH,c),f.setValue(A.MEDIAINFO_KEY_PLAYHEAD,0);var g=z.ASSET_TYPE_VOD;switch(d){case e.StreamType.VOD:g=z.ASSET_TYPE_VOD;break;case e.StreamType.LIVE:g=z.ASSET_TYPE_LIVE;break;case e.StreamType.LINEAR:g=z.ASSET_TYPE_LINEAR}return f.setValue(A.MEDIAINFO_KEY_STREAMTYPE,g),f},e.createAdBreakObject=function(a,b,c){var d=new A;return d.setValue(A.MEDIAINFO_KEY_NAME,a),d.setValue(A.MEDIAINFO_KEY_POSITION,b),d.setValue(A.MEDIAINFO_KEY_STARTUPTIME,c),d},e.createAdObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_NAME,a),e.setValue(A.MEDIAINFO_KEY_ADID,b),e.setValue(A.MEDIAINFO_KEY_POSITION,c),e.setValue(A.MEDIAINFO_KEY_LENGTH,d),e},e.createChapterObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_NAME,a),e.setValue(A.MEDIAINFO_KEY_POSITION,b),e.setValue(A.MEDIAINFO_KEY_LENGTH,c),e.setValue(A.MEDIAINFO_KEY_STARTTIME,d),e},e.createQoSObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_BITRATE,a),e.setValue(A.MEDIAINFO_KEY_FPS,c),e.setValue(A.MEDIAINFO_KEY_DROPPEDFRAMES,d),e.setValue(A.MEDIAINFO_KEY_STARTUPTIME,b),e},e.createTimedMetadataObject=function(a){var b=new A;return b.setValue(A.MEDIAINFO_KEY_TIMEDMETADATA,a),b};var X="MediaHeartbeat",Y="a.__pttvsdkVersion";c.MediaHeartbeat=e,c.MediaHeartbeatDelegate=d,c.MediaHeartbeat.StreamType=e.StreamType,c.MediaHeartbeat.Event=e.Event,c.MediaHeartbeat.version=e.version,c.MediaHeartbeat.createMediaObject=e.createMediaObject,c.MediaHeartbeat.createAdBreakObject=e.createAdBreakObject,c.MediaHeartbeat.createAdObject=e.createAdObject,c.MediaHeartbeat.createChapterObject=e.createChapterObject,c.MediaHeartbeat.createQoSObject=e.createQoSObject,c.MediaHeartbeat.createTimedMetadataObject=e.createTimedMetadataObject,c.MediaHeartbeat._onDelegateError=r,c.MediaHeartbeat._debugLogging=!1}(a.ADB.core,a.ADB.va),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=core),a.ADB.va||(a.ADB.va=va),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);

</script><script id="hbCustomRamen">
    /* global $t, s */
    (function() {
        'use strict';
        //calculated on load
        //statics
        var noValue = 'not available';
        var isAmp = location.hash.indexOf('amp=1') != -1;
        var ampSection = noValue; //(document.location.search.split('&')[1] || noValue) need to have this passed in URL later
        var extend = function(defaults, options) {
            var extended = {};
            var prop;
            for (prop in defaults) {
                if (Object.prototype.hasOwnProperty.call(defaults, prop)) {
                    extended[prop] = defaults[prop];
                }
            }
            for (prop in options) {
                if (Object.prototype.hasOwnProperty.call(options, prop)) {
                    extended[prop] = options[prop];
                }
            }
            return extended;
        };
    
        var contentType = function() {
            if (isAmp) {
                return 'offsite';
            } else {
                return s.contextData['news.contenttype'];
            }
        };
    
        var playerStyle = function() {
            switch (contentType()) {
                case 'vertical':
                case 'subvertical':
                case 'show':
                    return 'Front Player';
                case 'cover':
                    return 'Cover Player'; 
                case 'canonical video':
                    return 'Canonical';
                case 'post':
                    return 'Inline';
                case 'offsite':
                    if (isAmp) {
                        return 'AMP Player';
                    } else {
                        return 'Offsite Embedded';
                    }
                default:
                    return noValue;
            }
        };
    
        //formating for publish date
        var formatDate = function(dateStr) {
            //convert: Thu Nov 09 2017 16:32:29 GMT+0000 (UTC) convert to 12/22/2015
            if (typeof dateStr !== 'string') {
                return false;
            }
            var date = new Date(dateStr);
            //return if its not a valid date
            if (isNaN(date.getTime())) { return false; }
    
            return (date.getUTCMonth() + 1) + '/' + date.getUTCDate() + '/' + date.getUTCFullYear();
        };
    
        //expose function for custom values
        window.hbCutomValues = (function() {
            var customBuilder = function(context) {
                var eventDataRaw = context.eventDataRaw;
                var customContextData = context.customContextData;
    
                var playListInfo = (function() {
                    var playListInfo = {
                        'id': false,
                        'label': false
                    };
                    if (eventDataRaw.associatedPlaylist) {
                        playListInfo.label = eventDataRaw.associatedPlaylist.headline && eventDataRaw.associatedPlaylist.headline.actual || false;
                        playListInfo.id = eventDataRaw.associatedPlaylist.playlist_id || false;
                    }
                    return playListInfo;
                })();
    
                var siteBrand = (function() {
                    //brand is only today, and everything else is nbcnews
                    if ($t('jsonLd.Dataset.0.vertical', noValue) === 'today') {
                        return 'today';
                    } else {
                        return 'NBC News';
                    }
                })();
    
                customContextData = extend(customContextData, {
                    'videocontentsource': eventDataRaw.source && eventDataRaw.source.name || noValue, //show name / network
                    'videonetwork': (eventDataRaw.url && eventDataRaw.url.canonical && eventDataRaw.url.canonical.indexOf('msnbc.com') != -1) ? 'msnbc' : 'nbc', //msnbc or nbc
                    'videopagecontentcategory': isAmp ? ampSection : $t('jsonLd.Dataset.0.section', noValue),
                    'videopagesubverticalname': $t('jsonLd.Dataset.0.subVertical', noValue), //not correct for amp
                    'videopagetemplatename': $t('jsonLd.Dataset.0.packageId', noValue), //not  correct for amp
                    'videopagetype': isAmp ? 'AMP:post' : contentType(),
                    'videopageverticalname': $t('jsonLd.Dataset.0.vertical', noValue),
                    'videoplayerstyle': playerStyle(),
                    'videoplaylist': playListInfo.label || noValue,
                    'videoplaylistid': playListInfo.id || noValue,
                    'videoprogram': eventDataRaw.source && eventDataRaw.source.name || siteBrand, //not sure
                    'videopublishdate': formatDate(eventDataRaw.datePublished) || noValue,
                    'videotitle': eventDataRaw.headline && eventDataRaw.headline.primary || noValue,
                    //copied from AppM context variables
                    'videoscrollcount': s.contextData['news.scrollcount'] || noValue,
                    'videosessionnumber': s.contextData['news.sessionnumber'] || noValue,
                    'videoflashversion': s.contextData['news.flashversion'] || noValue,
                    //optional values
                    'videoplayercount': $t('jsonLd.NewsArticle.0.video', []).length || noValue
    
                });
                return customContextData;
            };
            customBuilder.appMAccount = function() {
                var appMAccount = s.account;
                return appMAccount;
            };
            customBuilder.playerStyle = playerStyle();
            //get referrer pagename if its an embeded amp page.
            customBuilder.pageName = isAmp ? 'nbcnews:AMP:post:' + document.referrer.substr(document.referrer.lastIndexOf('/') + 1) : false;
    
            return customBuilder;
        })();
    })();
    </script><script id="heartbeatSubscription">
//version 2.19
(function() {
    /*global $t, ADB, console, $ndp, AppMeasurement, visitor*/
    $t('register', 'ahb_adobeAppMeasurmentLoaded');
    var setupHeartbeat = function(s) {
        'use strict';
        //statics
        var noValue = 'not available';
        var playerName = window.otherVideoPlayerTech || 'NDP player'; //at this point, the whole thing shoudl be re-done, but adding a player type global var
        var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;

        //privates
        var _mediaHeartbeat = null;
        var _appMeasurement = null;
        var _videoData = null; //video data populated in scope by event
        var _adData = null; //video data populated in scope by event
        var _stateInfo = {
            adPosition: 1,
            playheadPosition: 0,
            startupTime: 0,
            manualPlayTime: 0,
            videoCount: 0,
            playState: 'stop',
            videoType: 'VOD Clip',
            inAd: false

        };

        //constructors from adobe for deligate
        var CustomMediaHeartbeatDelegate = new ADB.va.MediaHeartbeatDelegate();
        var MediaHeartbeat = ADB.va.MediaHeartbeat; //mapping to match documentation

        //video info deligate
        CustomMediaHeartbeatDelegate.getCurrentPlaybackTime = function() {
            //playhead will be 0 for ads.
            return Math.round(_stateInfo.playheadPosition / 1000) || 0;
        };

        CustomMediaHeartbeatDelegate.getQoSObject = function() {
            //dont have QOS data right now (<bitrate>, <startuptime>, <fps>, <droppedFrames>)
            return MediaHeartbeat.createQoSObject(0, Math.round(_stateInfo.startupTime), 0, 0);
        };

        var createAMandHBObjects = function() {
            //create new appMeasurementmain and heartbeat instance 
            if (!_mediaHeartbeat) {
                //use DTM values since this may load before the page track is complete
                var appMAccount = window.hbCutomValues && typeof window.hbCutomValues.appMAccount === 'function' && window.hbCutomValues.appMAccount() || ''; //get from site specific function
                // Set-up the AppMeasurement component using values from page version.
                _appMeasurement = new AppMeasurement();
                _appMeasurement.visitor = visitor;
                _appMeasurement.trackingServer = s.trackingServer;
                _appMeasurement.account = appMAccount;
                _appMeasurement.charSet = "UTF-8";
                _appMeasurement.doPlugins = false;
                _appMeasurement.ssl = true;
                $t('track', 'ahb_adobeAppMeasurmentLoaded', {
                    'sc_obj': _appMeasurement
                });

                //Media Heartbeat initialization
                var mediaConfig = new ADB.va.MediaHeartbeatConfig();
                mediaConfig.trackingServer = 'nbcume.hb.omtrdc.net';
                mediaConfig.playerName = playerName;
                mediaConfig.debugLogging = debugState; // set this to false for production apps.
                mediaConfig.ssl = true;
                mediaConfig.appVersion = $ndp && $ndp.__version || 'unknown'; //ndp player version
                mediaConfig.ovp = 'unknown'; //change later
                mediaConfig.channel = (function() {
                    if (window.hbCutomValues && window.hbCutomValues.playerStyle === "Offsite Embedded") {
                        return 'Off-domain';
                    }
                    return 'On-domain';
                })();

                _mediaHeartbeat = new MediaHeartbeat(CustomMediaHeartbeatDelegate, mediaConfig, _appMeasurement);
            }
        };

        var setStartupTime = function(playInitiate) {
            if (!window.performance || _stateInfo.startupTime !== 0) {
                //only set startuptime first play
                return;
            }
            var startupTime = 0;
            if (playInitiate === 'Auto') {
                startupTime = performance.now() / 1000;
            } else {
                startupTime = (performance.now() - _stateInfo.manualPlayTime) / 1000;
            }
            _stateInfo.startupTime = startupTime;
        };

        var convertDuration = function(duration) {
            //if this is an ISO 8601 duration
            var ISO8601 = /^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;
            if (ISO8601.test(duration)) {
                var h = 0,
                    m = 0,
                    s = 0;
                var matches = ISO8601.exec(duration);
                if (matches[1]) h = Number(matches[1]);
                if (matches[2]) m = Number(matches[2]);
                if (matches[3]) s = Number(matches[3]);
                return h * 3600 + m * 60 + s;
            }
            //else return number
            return duration;
        };

        $t('on', 'ndp_playerManualPlay', function() {
            _stateInfo.manualPlayTime = window.performance && performance.now() || 0;
            if (debugState) {
                console.log('* ndp_playerManualPlay (' + performance.now() + ')');
            }

        });

        //setup events
        $t('on', 'ndp_videoEvent', function(e, data) {
            //populate scope data
            var eventSection = data.eventType.split('_')[1] || '';
            if (eventSection === 'AdEvent') {
                _adData = data; //populate scope data with video data
            } else if (eventSection === 'PlaybackEvent') {
                _videoData = data; //populate scope data with video data
            }

            //if this is a progress event, populate playhead and exit
            if (data.eventType.indexOf('PROGRESS') >= 0) {
                if (data.videoData && data.videoData.playheadPosition !== 0) {
                    //dont update playhead with ad progress
                    if (data.eventType !== 'NDP_AdEvent_PROGRESS') {
                        _stateInfo.playheadPosition = data.videoData.playheadPosition;
                    }
                }

                //let the first AdEvent_PROGRESS event through
                if (!(data.eventType === 'NDP_AdEvent_PROGRESS' && _stateInfo.inAd === false)) {
                    return;
                }
            }

            //if the heartbeat instance wasnt created yet, do it now
            createAMandHBObjects();

            var eventData = _videoData && _videoData.videoData || {};
            var eventDataRaw = eventData.raw || {};

            //set videoType based on guid (VOD, LINEAR, LIVE)
            if (/^lv_/.test(eventDataRaw.guid) || /^nbcnewslive/.test(eventDataRaw.guid)) {
                _stateInfo.videoType = 'Linear';
            } else if (/^nn_netcast_/.test(eventDataRaw.guid)) {
                _stateInfo.videoType = 'VOD Episode';
            } else {
                _stateInfo.videoType = 'VOD Clip';
            }

            var playInitiate = (function() {
                if (eventDataRaw.isContinuousPlay) {
                    return 'Continuous';
                }
                if (!eventDataRaw.autoPlay) {
                    return 'Manual';
                }
                return 'Auto';
            })();

            var playListInfo = (function() {
                var playListInfo = {
                    'id': false,
                    'label': false
                };
                if (eventDataRaw.video_playlists && eventDataRaw.video_playlists[0]) {
                    playListInfo.label = eventDataRaw.video_playlists[0].label || false;
                    playListInfo.id = eventDataRaw.video_playlists[0].playlist_id || false;
                }
                return playListInfo;
            })();

            //had to move this out becuase of the pre-load event firing, and not knowing if ad_Start or content_Start firing
            var startSession = function(customContextData) {
                //start session on first frame

                if (_stateInfo.playState == 'stop') {
                    _stateInfo.playState = 'sessionStarted';
                    var mediaInfo = MediaHeartbeat.createMediaObject(
                        customContextData.videotitle || noValue, //video name
                        customContextData.videoguid || noValue, //video ID
                        (function() {
                            if (_stateInfo.videoType === "Linear") {
                                return -1; //set duration to -1 if its linear
                            } else {
                                return convertDuration(eventDataRaw.duration);
                            }
                        })(), //videoLength
                        (function() {
                            if (_stateInfo.videoType === "Linear") {
                                return MediaHeartbeat.StreamType.LIVE;
                            } else {
                                return MediaHeartbeat.StreamType.VOD; //default VOD
                            }
                        })()
                    );
                    _mediaHeartbeat.trackSessionStart(mediaInfo, customContextData);
                }
            };

            var pageName = window.hbCutomValues && window.hbCutomValues.pageName || s.pageName; //grab pagename from custom

            var customContextData = { //custom context data for calls
                'videocliptype': eventDataRaw.videoType || noValue,
                'videocontentsource': eventDataRaw.source || noValue, //show name / network
                'videocontenttype': 'Video',
                'videodate': s.customTimeParting('d'),
                'videoday': s.customTimeParting('dw'),
                'videoguid': eventDataRaw.guid || noValue,
                'videohour': s.customTimeParting('h'),
                'videoinitiate': playInitiate || noValue, //"Auto" vs. "Manual" vs. "Continuous"
                'videominute': s.customTimeParting('m'), //use customTimepart from scode file
                'videompxid': eventDataRaw.mpxId || noValue,
                'videonetwork': eventDataRaw.newsNetwork || noValue,
                'videopagecontentcategory': noValue, //set remotly
                'videopagename': pageName || noValue,
                'videopagetype': noValue, //set remotly
                'videoplatform': 'Web', //[todo] maybe mobile too?
                'videoplayerstyle': noValue, //set remotly
                'videoplayertech': $ndp && $ndp.playbackAdapter || noValue,
                'videoplayerurl': window.location.href.split('?')[0],
                'videoplaylist': playListInfo.label || noValue,
                'videoplaylistid': playListInfo.id || noValue,
                'videoprogram': eventDataRaw.source || noValue,
                'videopublishdate': noValue,
                'videoscreen': 'Normal', //[TODO] make this also show "Full"
                'videostatus': 'Unrestricted',
                'videosubcat1': noValue, //mpx primary category
                'videosubcat2': noValue,
                'videotitle': eventDataRaw.title || noValue,
                //optionsal values
                'videoadblockerdetection': s.cookieRead("i_abd") || noValue, //use s cookieread
                'videoflashversion': s.eVar88 || noValue, //uses "FlashDetect.raw"
                'videonativesponsor': noValue,
                'videopagestorylines': noValue,
                'videoplayercount': noValue,
                'videoplayertestvalue': window.__DY_VIDEO_TEST__ && window.__DY_VIDEO_TEST__.videoPlayerType || noValue,
                'videoscrollcount': s.eVar86 || noValue,
                'videosessionnumber': s.eVar35 || noValue, //session number count (from adobe)
                'videostreamcount': _stateInfo.videoCount || noValue, //video count (set inside the event)
                'videovideocontenttype': _stateInfo.videoType,
                'videocontentrating': eventDataRaw.sentiment || noValue,
                'videovisitorid': visitor.getMarketingCloudVisitorID() //for testing mostly, visitorID

            };
            //append site specific data from seperate function
            if (window.hbCutomValues) {
                customContextData = window.hbCutomValues({
                    'customContextData': customContextData,
                    'eventDataRaw': eventDataRaw,
                    '_stateInfo': _stateInfo
                });

            }
            if (debugState) {
                console.log('* ndp_videoEvent (' + performance.now() + ') : ' + data.eventType + ' : %O : %O : %O', data, customContextData, JSON.parse(JSON.stringify(_stateInfo)));
            }

            //specific events
            switch (data.eventType) {
                case 'NDP_PlaybackEvent_LOADED':
                    //set videostreamcount, and increment
                    _stateInfo.videoCount = _stateInfo.videoCount + 1;
                    customContextData.videostreamcount = _stateInfo.videoCount;

                    if (_stateInfo.playState !== 'stop') {
                        //if other video is started while in pause, close out last session, and reset values
                        _mediaHeartbeat.trackSessionEnd();
                        _stateInfo.playState = 'stop';
                        _stateInfo.adPosition = 1;
                        _stateInfo.playheadPosition = 0;
                        _stateInfo.inAd = false;
                    }
                    //reload app measurement settings before a videoLoad (to be sure its up to date)
                    _appMeasurement.clearVars();
                    _appMeasurement.pageName = pageName;
                    break;

                case 'NDP_PlaybackEvent_START':
                    //set startup time
                    setStartupTime(playInitiate);

                    startSession(customContextData);

                    if (_stateInfo.adPosition !== 1) { //if just came from an ad, end the adbreak
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakComplete);
                        _stateInfo.adPosition = 1;

                        //do a seek event to force event fire at playback start after ad
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);
                    }
                    if (_stateInfo.playState !== 'play') {
                        //if first asset after load
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;

                case 'NDP_PlaybackEvent_PLAY':
                case 'NDP_AdEvent_PLAY':
                    //play was resumed (filter multiple plays)
                    if (_stateInfo.playState === 'pause') {
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;
                case 'NDP_PlaybackEvent_PAUSE':
                case 'NDP_AdEvent_PAUSE':
                    _stateInfo.playState = 'pause';
                    _mediaHeartbeat.trackPause();
                    break;

                case 'NDP_PlaybackEvent_SEEK':
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);
                    //track rewind event
                    if (eventData.playheadPosition < _stateInfo.playheadPosition) {
                        _appMeasurement.contextData = customContextData;
                        _appMeasurement.contextData.videoscrub = 'rewind';
                        _appMeasurement.tl(this, 'o', 'Video Rewind', null);
                    }
                    break;

                case 'NDP_PlaybackEvent_COMPLETE':
                    _mediaHeartbeat.trackComplete();
                    _mediaHeartbeat.trackSessionEnd();
                    _stateInfo.playState = 'stop';
                    _stateInfo.playheadPosition = 0;
                    break;

                case 'NDP_AdEvent_START':
                    //move all ad logic to progress
                    //have to use this since content_loaded fires earlier.
                    startSession(customContextData);
                    break;

                case 'NDP_AdEvent_PROGRESS':
                    //set startup time 
                    _stateInfo.inAd = true;
                    setStartupTime(playInitiate);
                    //for ads, its only ever at the beginings for now, so hard coded
                    var adData = _adData && _adData.videoData || {};
                    var adLength = Math.round(adData.totalLength / 1000) || 0;
                    var adBreakInfo = MediaHeartbeat.createAdBreakObject(
                        noValue, //name
                        1, //position 
                        0); //startTime
                    var adInfo = MediaHeartbeat.createAdObject(
                        noValue, //name
                        ('rand_' + (Math.random() * 36 * 100000 | 0).toString(36)), //id (random ID)
                        _stateInfo.adPosition, //position
                        adLength); //length

                    if (_stateInfo.adPosition === 1) { //start adBreak
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakStart, adBreakInfo);
                    }
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdStart, adInfo, customContextData);
                    _stateInfo.adPosition = _stateInfo.adPosition + 1;
                    //do the track play AFTER the ad starts
                    if (_stateInfo.playState !== 'play') {
                        //if first asset after load
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;

                case 'NDP_AdEvent_COMPLETE':
                    if (_stateInfo.inAd) {
                        _stateInfo.inAd = false;
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdComplete);
                        _stateInfo.playheadPosition = 0;
                    }
                    break;

                default:
                    break;
            }
        });
    };

    //run after adobe is loaded, or if its alrady loaded.
    if ($t('dtm_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupHeartbeat(window.s);
    } else {
        $t('on', 'dtm_adobeAppMeasurmentLoaded', function() {
            setupHeartbeat(window.s);
        });
    }
})();
</script><script>
    // bizDev floodlight tag
    /*globals $t */
    (function () {
        var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
        var sites = {
            'today.com': {
                'view': 'DC-8168974/today0/today0+standard',
                'play': 'DC-8168974/today0/today00+standard'
            },
            'nbcnews.com': {
                'view': 'DC-8168974/nbcvi0/nbcne0+standard',
                'play': 'DC-8168974/nbcvi0/nbcne00+standard'
            },
            'msnbc.com': {
                'view': 'DC-8168974/msnbc0/msnbc0+standard',
                'play': 'DC-8168974/msnbc0/msnbc00+standard'
            }
        };
        var siteEvents = sites[topLevelDomain] || { 'view': '', 'play': '' };

        // add global script
        var loadScript = function (script) {
            var s = document.createElement('script'),
                el = document.getElementsByTagName('script')[0];
            s.async = true;
            s.src = (document.location.protocol == 'https:' ? 'https://' : 'http://') + script;
            el.parentNode.insertBefore(s, el);
        };
        loadScript('www.googletagmanager.com/gtag/js?id=DC-8168974');

        window.dataLayer = window.dataLayer || []; //that name is to generic to have global scope
        function gtag() { window.dataLayer.push(arguments); }

        gtag('js', new Date());
        gtag('config', 'DC-8168974');

        var customEvent = function (sendTo) {
            gtag('event', 'conversion', {
                'allow_custom_scripts': true,
                'send_to': sendTo
            });
        };

        //on pageload
        customEvent(siteEvents.view);

        //on video start
        $t('on', 'ndp_videoEvent', function (e, data) {
            if(data.eventType === 'NDP_PlaybackEvent_START') {
                customEvent(siteEvents.play);
            }
        });
    })();
</script><script>
(function(){
    /*global $t, fbq */
    !function (f, b, e, v, n, t, s) {
        if (f.fbq) return; n = f.fbq = function () { n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments) };
        if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
        n.queue = []; t = b.createElement(e); t.async = !0;
        t.src = v; s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s)
    }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');

    var pixelIds = {
        'newsletter':'514991798612189',
        'ecommerce':'258438165004812'
    };

    for (var pixel in pixelIds) {
        fbq('init', pixelIds[pixel]);
    }

    $t('on', 'dtm_pageView', function (e, data) {
        var trackView = data.trackView !== false; //this will default all to true if not false
        var pageIndex = $t(e.type + '.index', 0);
        //Tracks all page views.
        if (trackView) {
            fbq('track', 'PageView', {});
        
            //Tracks only ECommerce.
            if ($t('jsonLd.Dataset.' + pageIndex + '.ecommerceEnabled',false)) {
                fbq('trackSingle', pixelIds.ecommerce, 'ViewContent', {});
            }
        }
    });

    $t('on', 'mbt_ecommerce_shop_button', function() {
        fbq('trackSingle', pixelIds.ecommerce , 'Lead', {});
    });

    //Promo - FB Pixel to track newsletter mach+better
    $t('on', 'nv_newsletter_subscribe', function (e, data) {
        if (data.id === 1 || data.id === 2) {
            var fbTackingCode = data.id === 1 ? 'MACHNewsletterBento' : 'BETTERNewsletterBento';
            fbq('trackSingleCustom', '514991798612189', fbTackingCode, {});
        }
    });
})();
</script><script>
//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var e=[],b,h;a!==Object(a)&&(a={});var g,k,q,m,r,n,x,E,t,A,L,B,C,F;g=a.partner;k=a.containerNSID;q=!!a.disableDestinationPublishingIframe;m=a.iframeAkamaiHTTPS;r=a.mappings;n=a.uuidCookie;x=!0===a.enableErrorReporting;E=a.visitorService;t=a.declaredId;A=!0===a.removeFinishedScriptsAndCallbacks;L=!0===a.delayAllUntilWindowLoad;B=!0===a.disableIDSyncs;C="undefined"===typeof a.secureDataCollection||!0===a.secureDataCollection;F=!0===a.useCORSOnly;
var M,N,I,G,O,P,Q,R;M=!0===a.disableScriptAttachment;N=!0===a.disableDefaultRequest;I=a.afterResultForDefaultRequest;G=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;R=!0===a.disableCORS;x&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&e.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";
if(k||"number"===typeof k)k=parseInt(k,10),!isNaN(k)&&0<=k&&(b="");b&&(k=0,e.push(b),b="");h=DIL.getDil(g,k);if(h instanceof DIL&&h.api.getPartner()===g&&h.api.getContainerNSID()===k)return h;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var y={IS_HTTPS:C||"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC",
MILLIS_PER_DAY:864E5,DIL_COOKIE_NAME:"AAMC_"+encodeURIComponent(g)+"_"+k,FIRST_PARTY_SYNCS:"AMSYNCS",FIRST_PARTY_SYNCS_ON_PAGE:"AMSYNCSOP"},J={stuffed:{}},v={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],
num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(d){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=
!0;var l=this,s,f,a,b;if("function"===typeof d&&"function"===typeof d.getInstance){if(E===Object(E)&&(s=E.namespace)&&"string"===typeof s)f=d.getInstance(s,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(f===Object(f)&&f instanceof d&&"function"===typeof f.isAllowed&&"function"===typeof f.getMarketingCloudVisitorID&&"function"===typeof f.getCustomerIDs&&"function"===typeof f.isOptedOut){this.VisitorAPI=d;if(!f.isAllowed()){this.releaseType="VisitorAPI not allowed";
this.releaseRequests();return}this.instance=f;a=function(d){"VisitorAPI"!==l.releaseType&&(l.mid=d,l.releaseType="VisitorAPI",l.releaseRequests())};b=f.getMarketingCloudVisitorID(a);if("string"===typeof b&&b.length){a(b);return}setTimeout(function(){"VisitorAPI"!==l.releaseType&&(l.releaseType="timeout",l.releaseRequests())},this.getLoadTimeout());return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(e){this.releaseRequests()}},releaseRequests:function(){this.calledBack=
!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var d=w.isPopulatedString,l=this.getMarketingCloudVisitorID();d(this.mid)&&this.mid===l||(this.mid=l);return d(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(d){if(d===Object(d)){var l="",s=[],f=[],a,b;for(a in d)d.hasOwnProperty(a)&&
(f[0]=a,b=d[a],b===Object(b)&&(f[1]=b.id||"",f[2]=b.authState||0,s.push(f),f=[]));if(f=s.length)for(d=0;d<f;d++)l+="&d_cid_ic="+u.encodeAndBuildRequest(s[d],"%01");return l}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(d){this.isOptedOut=d;this.isOptedOutCallbackCalled=!0;p.registerRequest()},getLoadTimeout:function(){var d=
this.instance;if(d){if("function"===typeof d.getLoadTimeout)return d.getLoadTimeout();if("undefined"!==typeof d.loadTimeout)return d.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(d,l){var s=w.isPopulatedString,f=encodeURIComponent;if(d===Object(d)&&s(l)){var a=d.dpid,b=d.dpuuid,e=null;if(s(a)&&s(b)){e=f(a)+"$"+f(b);if(!0===this.declaredIdCombos[e])return"setDeclaredId: combo exists for type '"+
l+"'";this.declaredIdCombos[e]=!0;this.declaredId[l]={dpid:a,dpuuid:b};return"setDeclaredId: succeeded for type '"+l+"'"}}return"setDeclaredId: failed for type '"+l+"'"},getDeclaredIdQueryString:function(){var d=this.declaredId.request,l=this.declaredId.init,a=encodeURIComponent,f="";null!==d?f="&d_dpid="+a(d.dpid)+"&d_dpuuid="+a(d.dpuuid):null!==l&&(f="&d_dpid="+a(l.dpid)+"&d_dpuuid="+a(l.dpuuid));return f}},registerRequest:function(d){var l=this.firingQueue;d===Object(d)&&l.push(d);this.firing||
!l.length||L&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,d=l.shift(),d.src=d.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),w.isPopulatedString(d.corsPostData)&&(d.corsPostData=d.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),D.fireRequest(d),this.firstRequestHasFired||
"script"!==d.tag&&"cors"!==d.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(d){if(!A)return"removeFinishedScriptsAndCallbacks is not boolean true";var l=this.toRemove,a,f;d===Object(d)&&(a=d.script,f=d.callbackName,(a===Object(a)&&"SCRIPT"===a.nodeName||"no script created"===a)&&"string"===typeof f&&f.length&&l.push(d));if(this.readyToRemove&&l.length){f=l.shift();a=f.script;f=f.callbackName;"no script created"!==a?
(d=a.src,a.parentNode.removeChild(a)):d=a;window[f]=null;try{delete window[f]}catch(b){}this.removed.push({scriptSrc:d,callbackName:f});DIL.variables.scriptsRemoved.push(d);DIL.variables.callbacksRemoved.push(f);return this.requestRemoval()}return"requestRemoval() processed"}};h=function(){var d="http://fast.",l="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);if("string"===typeof G&&G.length)return G+l;y.IS_HTTPS&&(d=!0===m?"https://fast.":"https://");return d+g+".demdex.net/dest5.html"+
l};var z={THROTTLE_START:3E4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:h(),onPagePixels:[],iframeHost:null,getIframeHost:function(d){if("string"===typeof d){var l=d.split("/");if(3<=l.length)return l[0]+"//"+l[2];e.push("getIframeHost: url is malformed: "+d);return d}},iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:y.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonWaiting:[],jsonProcessed:[],
canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function d(){f=document.createElement("iframe");f.sandbox="allow-scripts allow-same-origin";f.title="Adobe ID Syncing iFrame";f.id=a.id;f.style.cssText="display: none; width: 0; height: 0;";f.src=a.url;a.newIframeCreated=!0;l();document.body.appendChild(f)}function l(){u.addListener(f,"load",function(){f.className="aamIframeLoaded";
a.iframeHasLoaded=!0;a.requestToProcess()})}var a=this,f=document.getElementById(this.id);f?"IFRAME"!==f.nodeName?(this.id+="_2",this.iframeIdChanged=!0,d()):(this.newIframeCreated=!1,"aamIframeLoaded"!==f.className?(this.originalIframeHasLoadedAlready=!1,l()):(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.iframe=f,this.requestToProcess())):d();this.iframe=f},requestToProcess:function(d,l){var a=this;d&&!w.isEmptyObject(d)&&this.jsonWaiting.push([d,l]);if((this.receivedThirdPartyCookiesNotification||
!y.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var f=this.jsonWaiting.shift();this.process(f[0],f[1]);this.requestToProcess()}this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){a.messageSendingInterval=y.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},processSyncOnPage:function(d){var l,a,f;if((l=d.ibs)&&l instanceof Array&&(a=l.length))for(d=
0;d<a;d++)f=l[d],f.syncOnPage&&this.checkFirstPartyCookie(f,"","syncOnPage")},process:function(d,l){var a=encodeURIComponent,f,b,e,c,g,h;l===Object(l)&&(h=u.encodeAndBuildRequest(["",l.dpid||"",l.dpuuid||""],","));if((f=d.dests)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("dests"),a(c.id||""),a(c.y||""),a(c.c||"")],this.addMessage(g.join("|"));if((f=d.ibs)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("ibs"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||
[],","),a(c.ttl||""),"",h,c.fireURLSync?"true":"false"],c.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(g.join("|")):c.fireURLSync&&this.checkFirstPartyCookie(c,g.join("|")));if((f=d.dpcalls)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=c.callback||{},g=[g.obj||"",g.fn||"",g.key||"",g.tag||"",g.url||""],g=[a("dpm"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||[],","),a(c.ttl||""),u.encodeAndBuildRequest(g,","),h],this.addMessage(g.join("|"));this.jsonProcessed.push(d)},
checkFirstPartyCookie:function(d,a,s){var f=(s="syncOnPage"===s?!0:!1)?y.FIRST_PARTY_SYNCS_ON_PAGE:y.FIRST_PARTY_SYNCS,b=this.getOnPageSyncData(f),c=!1,e=!1,g=Math.ceil((new Date).getTime()/y.MILLIS_PER_DAY);b?(b=b.split("*"),e=this.pruneSyncData(b,d.id,g),c=e.dataPresent,e=e.dataValid,c&&e||this.fireSync(s,d,a,b,f,g)):(b=[],this.fireSync(s,d,a,b,f,g))},getOnPageSyncData:function(d){var a=p.adms.instance;return a&&"function"===typeof a.idSyncGetOnPageSyncInfo?a.idSyncGetOnPageSyncInfo():u.getDilCookieField(d)},
pruneSyncData:function(d,a,b){var f=!1,e=!1,c,g,h;if(d instanceof Array)for(g=0;g<d.length;g++)c=d[g],h=parseInt(c.split("-")[1],10),c.match("^"+a+"-")?(f=!0,b<h?e=!0:(d.splice(g,1),g--)):b>=h&&(d.splice(g,1),g--);return{dataPresent:f,dataValid:e}},manageSyncsSize:function(d){if(d.join("*").length>this.MAX_SYNCS_LENGTH)for(d.sort(function(d,a){return parseInt(d.split("-")[1],10)-parseInt(a.split("-")[1],10)});d.join("*").length>this.MAX_SYNCS_LENGTH;)d.shift()},fireSync:function(d,a,b,f,e,c){function g(d,
a,l,f){return function(){h.onPagePixels[d]=null;var b=h.getOnPageSyncData(l),e=[];if(b){var b=b.split("*"),c,s,g;c=0;for(s=b.length;c<s;c++)g=b[c],g.match("^"+a.id+"-")||e.push(g)}h.setSyncTrackingData(e,a,l,f)}}var h=this;if(d){if("img"===a.tag){d=a.url;b=y.IS_HTTPS?"https:":"http:";var k,n,t;f=0;for(k=d.length;f<k;f++){n=d[f];t=/^\/\//.test(n);var p=new Image;u.addListener(p,"load",g(this.onPagePixels.length,a,e,c));p.src=(t?b:"")+n;this.onPagePixels.push(p)}}}else this.addMessage(b),this.setSyncTrackingData(f,
a,e,c)},addMessage:function(d){var a=encodeURIComponent,a=x?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+d)},setSyncTrackingData:function(d,a,b,f){d.push(a.id+"-"+(f+Math.ceil(a.ttl/60/24)));this.manageSyncsSize(d);u.setDilCookieField(b,d.join("*"))},sendMessages:function(){var d=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),this.messagesPosted.push(a),setTimeout(function(){d.sendMessages()},this.messageSendingInterval)):
this.sendingMessages=!1},receiveMessage:function(d){var a=/^---destpub-to-parent---/;"string"===typeof d&&a.test(d)&&(a=d.replace(a,"").split("|"),"canSetThirdPartyCookies"===a[0]&&(this.canSetThirdPartyCookies="true"===a[1]?!0:!1,this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(d))}},K={traits:function(d){w.isValidPdata(d)&&(v.sids instanceof Array||(v.sids=[]),u.extendArray(v.sids,d));return this},pixels:function(d){w.isValidPdata(d)&&(v.pdata instanceof
Array||(v.pdata=[]),u.extendArray(v.pdata,d));return this},logs:function(d){w.isValidLogdata(d)&&(v.logdata!==Object(v.logdata)&&(v.logdata={}),u.extendObject(v.logdata,d));return this},customQueryParams:function(d){w.isEmptyObject(d)||u.extendObject(v,d,p.reservedKeys);return this},signals:function(d,a){var b,f=d;if(!w.isEmptyObject(f)){if(a&&"string"===typeof a)for(b in f={},d)d.hasOwnProperty(b)&&(f[a+b]=d[b]);u.extendObject(v,f,p.reservedKeys)}return this},declaredId:function(d){p.declaredId.setDeclaredId(d,
"request");return this},result:function(d){"function"===typeof d&&(v.callback=d);return this},afterResult:function(d){"function"===typeof d&&(v.postCallbackFn=d);return this},useImageRequest:function(){v.useImageRequest=!0;return this},clearData:function(){v={};return this},submit:function(){D.submitRequest(v);v={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return e},getState:function(){var d={},l={};u.extendObject(d,p,{callbackPrefix:!0,
useJSONP:!0,registerRequest:!0});u.extendObject(l,z,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{initConfig:a,pendingRequest:v,otherRequestInfo:d,destinationPublishingInfo:l}},idSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpid||!d.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof d.url||!d.url.length)return"Error: config.url is empty";var a=d.url,b=d.minutesToLive,f=encodeURIComponent,
c,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";c=u.encodeAndBuildRequest(["",d.dpid,d.dpuuid||""],",");d=["ibs",f(d.dpid),"img",f(a),b,"",c];z.addMessage(d.join("|"));p.firstRequestHasFired&&z.requestToProcess();return"Successfully queued"},aamIdSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpuuid||!d.dpuuid.length)return"Error: config or config.dpuuid is empty";
d.url="//dpm.demdex.net/ibs:dpid="+d.dpid+"&dpuuid="+d.dpuuid;return this.idSync(d)},passData:function(d){if(w.isEmptyObject(d))return"Error: json is empty or not an object";z.ibsDeleted.push(d.ibs);delete d.ibs;D.defaultCallback(d);return d},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var d=p,a=d.modStatsParams,b=d.platformParams,f;if(!a){a={};for(f in b)b.hasOwnProperty(f)&&!d.nonModStatsParams[f]&&(a[f.replace(/^d_/,"")]=b[f]);d.modStatsParams=a}return a}},
D={corsMetadata:function(){var d="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?d="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?d="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:d,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===
this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(d){p.registerRequest(D.createQueuedRequest(d));return!0},createQueuedRequest:function(d){var a=p,b,f=d.callback,c="img",e;if(!w.isEmptyObject(r)){var g,h,n;for(g in r)r.hasOwnProperty(g)&&(h=r[g],null!=h&&""!==h&&g in d&&!(h in d||h in p.reservedKeys)&&(n=d[g],null!=n&&""!==n&&(d[h]=n)))}w.isValidPdata(d.sids)||(d.sids=[]);w.isValidPdata(d.pdata)||(d.pdata=[]);w.isValidLogdata(d.logdata)||(d.logdata={});
d.logdataArray=u.convertObjectToKeyValuePairs(d.logdata,"=",!0);d.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof f&&(f=this.defaultCallback);a.useJSONP=!0!==d.useImageRequest;a.useJSONP&&(c="script",b=a.callbackPrefix+"_"+k+"_"+(new Date).getTime());a=this.makeRequestSrcData(d,b);P&&!F||!(e=this.getCORSInstance())||(c="cors");return{tag:c,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:f,postCallbackFn:d.postCallbackFn,useImageRequest:!!d.useImageRequest,requestData:d,
corsInstance:e,corsPostData:a.corsPostData}},defaultCallback:function(d,a){z.processSyncOnPage(d);var b,f,c,e,g,h,k,t,x;if((b=d.stuff)&&b instanceof Array&&(f=b.length))for(c=0;c<f;c++)if((e=b[c])&&e===Object(e)){g=e.cn;h=e.cv;k=e.ttl;if("undefined"===typeof k||""===k)k=Math.floor(u.getMaxCookieExpiresInMinutes()/60/24);t=e.dmn||"."+document.domain.replace(/^www\./,"");x=e.type;g&&(h||"number"===typeof h)&&("var"!==x&&(k=parseInt(k,10))&&!isNaN(k)&&u.setCookie(g,h,1440*k,"/",t,!1),J.stuffed[g]=h)}b=
d.uuid;w.isPopulatedString(b)&&!w.isEmptyObject(n)&&(f=n.path,"string"===typeof f&&f.length||(f="/"),c=parseInt(n.days,10),isNaN(c)&&(c=100),u.setCookie(n.name||"aam_did",b,1440*c,f,n.domain||"."+document.domain.replace(/^www\./,""),!0===n.secure));q||p.abortRequests||z.requestToProcess(d,a)},makeRequestSrcData:function(d,a){d.sids=w.removeEmptyArrayValues(d.sids||[]);d.pdata=w.removeEmptyArrayValues(d.pdata||[]);var b=p,f=b.platformParams,c=u.encodeAndBuildRequest(d.sids,","),e=u.encodeAndBuildRequest(d.pdata,
","),h=(d.logdataArray||[]).join("&");delete d.logdataArray;var n=y.IS_HTTPS?"https://":"http://",t=b.declaredId.getDeclaredIdQueryString(),x=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):"",m;m=[];var r,q,v,A;for(r in d)if(!(r in b.reservedKeys)&&d.hasOwnProperty(r))if(q=d[r],r=encodeURIComponent(r),q instanceof Array)for(v=0,A=q.length;v<A;v++)m.push(r+"="+encodeURIComponent(q[v]));else m.push(r+"="+encodeURIComponent(q));m=m.length?"&"+m.join("&"):"";c="d_nsid="+f.d_nsid+
t+x+(c.length?"&d_sid="+c:"")+(e.length?"&d_px="+e:"")+(h.length?"&d_ld="+encodeURIComponent(h):"");f="&d_rtbd="+f.d_rtbd+"&d_jsonv="+f.d_jsonv+"&d_dst="+f.d_dst;n=n+g+".demdex.net/event";e=b=n+"?"+c+(b.useJSONP?f+"&d_cb="+(a||""):"")+m;2048<b.length&&(b=b.substring(0,2048).substring(0,b.lastIndexOf("&")));return{corsSrc:n+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:e,corsPostData:c+f+m,isDeclaredIdCall:""!==t}},fireRequest:function(d){if("img"===d.tag)this.fireImage(d);
else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===d.tag?this.fireScript(d,a):"cors"===d.tag&&this.fireCORS(d,a)}},fireImage:function(d){var a=p,c,f;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(d),c.onload=function(){a.firing=!1;a.fired.push(d);a.num_of_img_responses++;a.registerRequest()},f=function(f){b="imgAbortOrErrorHandler received the event of type "+f.type;e.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(d);
a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",f,!1),c.addEventListener("abort",f,!1)):c.attachEvent&&(c.attachEvent("onerror",f),c.attachEvent("onabort",f)),c.src=d.src)},fireScript:function(d,a){var c=this,f=p,h,k,n=d.src,t=d.postCallbackFn,m="function"===typeof t,r=d.internalCallbackName;f.abortRequests||(f.firing=!0,window[r]=function(c){try{c!==Object(c)&&(c={});B&&(z.ibsDeleted.push(c.ibs),delete c.ibs);var h=d.callbackFn;f.firing=!1;f.fired.push(d);
f.num_of_jsonp_responses++;h(c,a);m&&t(c,a)}catch(s){s.message="DIL jsonp callback caught error with message "+s.message;b=s.message;e.push(b);s.filename=s.filename||"dil.js";s.partner=g;DIL.errorModule.handleError(s);try{h({error:s.name+"|"+s.message},a),m&&t({error:s.name+"|"+s.message},a)}catch(n){}}finally{f.requestRemoval({script:k,callbackName:r}),f.registerRequest()}},M||F?(f.firing=!1,f.requestRemoval({script:"no script created",callbackName:r})):(k=document.createElement("script"),k.addEventListener&&
k.addEventListener("error",function(a){f.requestRemoval({script:k,callbackName:r});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,d)},!1),k.type="text/javascript",k.src=n,h=DIL.variables.scriptNodeList[0],h.parentNode.insertBefore(k,h)),f.sent.push(d),f.declaredId.declaredId.request=null)},fireCORS:function(d,a){var c=this,f=p,h=this.corsMetadata.corsType,k=d.corsSrc,n=d.corsInstance,t=d.corsPostData,r=d.postCallbackFn,m="function"===typeof r;
if(!f.abortRequests&&!R){f.firing=!0;try{n.open("post",k,!0),"XMLHttpRequest"===h&&(n.withCredentials=!0,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status)a:{var h;try{if(h=JSON.parse(this.responseText),h!==Object(h)){c.handleCORSError(d,a,"Response is not JSON");break a}}catch(k){c.handleCORSError(d,a,"Error parsing response as JSON");break a}B&&(z.ibsDeleted.push(h.ibs),delete h.ibs);try{var n=d.callbackFn;
f.firing=!1;f.fired.push(d);f.num_of_cors_responses++;n(h,a);m&&r(h,a)}catch(t){t.message="DIL handleCORSResponse caught error with message "+t.message;b=t.message;e.push(b);t.filename=t.filename||"dil.js";t.partner=g;DIL.errorModule.handleError(t);try{n({error:t.name+"|"+t.message},a),m&&r({error:t.name+"|"+t.message},a)}catch(x){}}finally{f.registerRequest()}}}),n.onerror=function(){c.handleCORSError(d,a,"onerror")},n.ontimeout=function(){c.handleCORSError(d,a,"ontimeout")},n.send(t)}catch(x){this.handleCORSError(d,
a,"try-catch")}f.sent.push(d);f.declaredId.declaredId.request=null}},handleCORSError:function(d,a,b){p.num_of_cors_errors++;p.corsErrorSources.push(b);"ontimeout"===b||F||(d.tag="script",this.fireScript(d,a))},handleScriptError:function(d,a){p.num_of_jsonp_errors++;this.handleRequestError(d,a)},handleRequestError:function(d,a){var b=p;e.push(d);b.abortRequests=!0;b.firing=!1;b.errored.push(a);b.registerRequest()}},w={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?
!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,f,e=[],b=0;b<c;b++)f=a[b],"undefined"!==typeof f&&null!==f&&""!==f&&e.push(f);return e},isPopulatedString:function(a){return"string"===typeof a&&a.length}},u={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===
typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var f=[],e,g;b||(b="=");for(e in a)a.hasOwnProperty(e)&&(g=a[e],"undefined"!==typeof g&&null!==g&&""!==g&&f.push(e+b+(c?encodeURIComponent(g):g)));return f},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===
a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=Array(f),g=0;g<f;g++)g in c&&(e[g]=b.call(b,c[g],g,c));return e},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=[],g=0;g<f;g++)if(g in c){var h=c[g];b.call(b,h,g,c)&&e.push(h)}return e}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),
c,f,e;c=0;for(f=b.length;c<f;c++){for(e=b[c];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return decodeURIComponent(e.substring(a.length,e.length))}return null},setCookie:function(a,b,c,f,e,g){var h=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(h.getTime()+c)).toUTCString():"")+(f?";path="+f:"")+(e?";domain="+e:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,
b),!0):!1},extendObject:function(a,b,c){var f;if(a===Object(a)&&b===Object(b)){for(f in b)!b.hasOwnProperty(f)||!w.isEmptyObject(c)&&f in c||(a[f]=b[f]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(y.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60},getCookieField:function(a,b){var c=this.getCookie(a),f=decodeURIComponent;if("string"===typeof c){var c=c.split("|"),e,g;e=0;for(g=c.length-1;e<g;e++)if(f(c[e])===b)return f(c[e+1])}return null},getDilCookieField:function(a){return this.getCookieField(y.DIL_COOKIE_NAME,
a)},setCookieField:function(a,b,c){var e=this.getCookie(a),g=!1,h=encodeURIComponent;b=h(b);c=h(c);if("string"===typeof e){var e=e.split("|"),k,h=0;for(k=e.length-1;h<k;h++)if(e[h]===b){e[h+1]=c;g=!0;break}g||(h=e.length,e[h]=b,e[h+1]=c)}else e=[b,c];this.setCookie(a,e.join("|"),this.getMaxCookieExpiresInMinutes(),"/",this.getDomain(),!1)},setDilCookieField:function(a,b){return this.setCookieField(y.DIL_COOKIE_NAME,a,b)},getDomain:function(a){!a&&window.location&&(a=window.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a=
"";else{var b=a.split("."),c=b.length-1,e=c-1;1<c&&2>=b[c].length&&(2===b[c-1].length||0>",DOMAIN_2_CHAR_EXCEPTIONS,".indexOf(","+b[c]+","))&&e--;if(0<e)for(a="";c>=e;)a=b[c]+(a?".":"")+a,c--}return a}};"error"===g&&0===k&&u.addListener(window,"load",function(){DIL.windowLoaded=!0});var S=!1,H=function(){S||(S=!0,p.registerRequest(),U(),q||p.abortRequests||z.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){q||setTimeout(function(){N||p.firstRequestHasFired||("function"===typeof I?
K.afterResult(I).submit():K.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)};C=document;"error"!==g&&(DIL.windowLoaded?H():"complete"!==C.readyState&&"loaded"!==C.readyState?u.addListener(window,"load",function(){DIL.windowLoaded=!0;H()}):(DIL.windowLoaded=!0,H()));if("error"!==g)try{DIL.xd.receiveMessage(function(a){z.receiveMessage(a.data)},z.getIframeHost(z.url))}catch(V){}p.declaredId.setDeclaredId(t,"init");p.processVisitorAPI();this.api=K;this.getStuffedVariable=function(a){var b=J.stuffed[a];
b||"number"===typeof b||(b=u.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=w;this.helpers=u;this.constants=y;this.log=e;T&&(this.pendingRequest=v,this.requestController=p,this.setDestinationPublishingUrl=h,this.destinationPublishing=z,this.requestProcs=D,this.variables=J,this.callWindowLoadFunctions=H)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",
c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.9",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){throw Error("Error in attempt to create DIL instance with DIL.create(): "+
c.message);}},registerDil:function(a,c,e){c=c+"$"+e;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var e;"string"!==typeof a&&(a="");c||(c=0);e=a+"$"+c;return e in this.dils?this.dils[e]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,e){c=this.getDil(c,e);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,e){var b=1;c&&(window.postMessage?e.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):
c&&(e.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))},receiveMessage:function(a,c){var e;try{if(window.postMessage)if(a&&(e=function(b){if("string"===typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin))return!1;a(b)}),window.addEventListener)window[a?"addEventListener":"removeEventListener"]("message",e,!1);else window[a?"attachEvent":"detachEvent"]("onmessage",e)}catch(b){}}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,
disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},e=!1;return{activate:function(){e=!0},handleError:function(b){if(!e)return"DIL error module has not been activated";b!==Object(b)&&(b={});var h=b.name?(b.name+"").toLowerCase():"",g=[];b={name:h,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":
"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(h in c?c[h]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,e){var b="";c=c||"Error caught in DIL module/submodule: ";a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;e instanceof DIL&&(a.partner=e.api.getPartner());
DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var e=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),h="",g="",k={queryParam:"q"};return(h=e.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(e.helpers.extendObject(k,h),g=k.queryPattern?
(h=(""+b.search).match(k.queryPattern))?h[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),e=document.createElement("a");e.href=a||document.referrer;return{hash:e.hash,host:e.host.split(":").shift(),hostname:e.hostname,href:e.href,pathname:e.pathname.replace(/^\//,""),protocol:e.protocol,search:e.search,uriParams:function(a,e){c.helpers.map(e.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},e.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),e,b,h,g,k;e=0;for(h=arguments.length;e<h;e++)if(g=arguments[e],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e,b){try{var h=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=h.constructTrackVars(e);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",e=this.s,g,r=[];g=[];var m={},q=!1;if(e!==Object(e))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof e.foreachVar)e.foreachVar(function(a,b){"undefined"!==typeof b&&(m[a]=b,q=!0)},this.trackVars);else{if(!(e.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(e.lightProfileID)(a=e.lightTrackVars)&&(a=","+a+","+e.vl_mr+",");else if(e.pe||e.linkType)a=e.linkTrackVars,e.pe&&(b=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[b]&&(a=e[b].trackVars)),a&&(a=","+a+","+e.vl_l+","+e.vl_l2+",");if(a){b=0;for(r=a.split(",");b<r.length;b++)0<=c.indexOf(","+r[b]+",")&&g.push(r[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=e.va_t.length;g<b;g++)a=e.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof e[a]&&null!==e[a]&&""!==e[a]&&(m[a]=e[a],q=!0)}h.includeContextData(e,
m).store_populated&&(q=!0);q&&this.d.api.signals(m,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(q){return this.handle(q,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],e,b,h,g,k;if(a===Object(a)){e=a.names;if(e instanceof Array&&(h=e.length))for(b=0;b<h;b++)g=e[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(h=a.length))for(b=0;b<h;b++)if(e=a[b],e===Object(e)&&(g=e.name,k=parseInt(e.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(e=0;e<=k;e++)c.push(g+e);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var e={},b=!1;if(a.contextData===Object(a.contextData)){var h=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,q={},m,r,n,x;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(m=0,r=k.length;m<r;m++)n=k[m],this.dil.validators.isPopulatedString(n)&&(q[n]=!0);for(x in h)!h.hasOwnProperty(x)||q[x]||!(k=h[x])&&"number"!==typeof k||(x=("contextData."+x).replace(/\./g,g),c[x]=k,b=!0)}e.store_populated=b;return e}};
DIL.modules.GA={submitUniversalAnalytics:function(a,c,e){try{var b=a.getAll()[0],h=b[e||"b"].data.keys;a={};var g,k,q,m;g=0;for(k=h.length;g<k;g++)q=h[g],m=b.get(q),"undefined"===typeof m||"function"===typeof m||m===Object(m)||/^_/.test(q)||/^&/.test(q)||(a[q]=m);c.api.signals(a,"c_").submit();return a}catch(r){return"Caught error with message: "+r.message}},dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,
signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},h="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.message=h,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(h="gaArray is not an array or is empty",b.message=h,DIL.errorModule.handleError(b));
this.tv=this.constructTrackVars(e);this.errorMessage=h}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],e,b,h,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){h=this.defaultTrackVars;g={};e=0;for(b=h.length;e<b;e++)g[h[e]]=!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(e=0;e<b;e++)h=a[e],"string"===typeof h&&
h.length&&h in g&&c.push(h);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var e,b,h,g;e=0;for(b=a.length;e<b;e++)h=a[e],h instanceof Array&&h.length&&(h=[],g=a[e],h instanceof Array&&g instanceof Array&&Array.prototype.push.apply(h,g),g=h.shift(),"string"===typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(h)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof
Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,e,g,h){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",e);this.addToSignals("c_itemPrice",g);this.addToSignals("c_itemQuantity",
h)},_addTrans:function(a,b,c,e,g,h,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",e);this.addToSignals("c_transShipping",g);this.addToSignals("c_transCity",h);this.addToSignals("c_transState",k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,e){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",
e)}},e=this.tv,b,h,g,k,q,m;b=0;for(h=e.length;b<h;b++)if(g=e[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(m=a[g],m instanceof Array))for(k=0,q=m.length;k<q;k++)c[g].apply(this,m[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",
this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,e){try{this.callback=this.dil=null,this.errorMessage="",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(e)?e:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,
"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,e,b,h,g,k;k=!1;var q=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(e=c.length))for(a=0;a<e;a++)if((b=c[a])&&b===Object(b)&&(h=b.cn,g=b.cv,h===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(e=c.length;a<e&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",
q++,g,k,1]),q>this.LIMIT);a++);this.errorMessage=1<q?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",
this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=e===Object(e)?e:{};e={name:"DIL Peer39 Module Error"};var b=[],h="";this.isSecurePageButNotEnabled(document.location.protocol)&&(h="Module has not been enabled for a secure page",b.push(h),e.message=h,DIL.errorModule.handleError(e));c instanceof
DIL?(this.dil=c,e.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.push(h),e.message=h,DIL.errorModule.handleError(e));"string"===typeof a&&a.length?this.aid=a:(h="aid is not a string or is empty",b.push(h),e.message=h,DIL.errorModule.handleError(e));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),e=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};e.parentNode.insertBefore(c,e);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,e,b,h,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,e=a.length;c<e;c++)b=a[c].split("="),h=b[0],b=b[1],h&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[h]instanceof Array||(g[h]=[]),g[h].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,e=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof e&&e.length?e:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=document.location.protocol+
"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**

</script><script>
(function() {
    /* globals $t, DIL */
    var setupAAM = function(_scDilObj) {
        //DIL instantiation starts. Configurable section below
        var nbcuDil = DIL.create({
            partner: "nbcu",
            containerNSID: 0,
            uuidCookie: {
                name: 'aam_uuid',
                days: 30
            }

        });
        //replace customObj with any MPS object when data collection is required
        if (typeof window.customObj != 'undefined') {
            var nbcuDilInstance = DIL.getDil('nbcu');
            nbcuDilInstance.api.signals(window.customObj, 'c_');
        }
        //SC Object Data Collection 
        DIL.modules.siteCatalyst.init(_scDilObj, DIL.getDil('nbcu'), {
            names: ['pageName', 'channel', 'campaign', 'products', 'events', 'pe', 'referrer', 'server', 'purchaseID', 'zip', 'state'],
            iteratedNames: [{
                name: 'eVar',
                maxIndex: 75
            }, {
                name: 'prop',
                maxIndex: 75
            }, {
                name: 'pev',
                maxIndex: 3
            }, {
                name: 'hier',
                maxIndex: 4
            }]
        });
    };
    //run after adobe is loaded, or if its alrady loaded.
    if ($t('dtm_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupAAM($t('dtm_adobeAppMeasurmentLoaded.sc_obj', {}));
    } else {
        $t('on', 'dtm_adobeAppMeasurmentLoaded', function() {
            setupAAM($t('dtm_adobeAppMeasurmentLoaded.sc_obj', {}));
        });
    }
    //also setup heartbeat instsnce of app measurment
    if ($t('ahb_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupAAM($t('ahb_adobeAppMeasurmentLoaded.sc_obj', {}));
    } else {
        $t('on', 'ahb_adobeAppMeasurmentLoaded', function() {
            setupAAM($t('ahb_adobeAppMeasurmentLoaded.sc_obj', {}));
        });
    }
})();
</script>
<script>
/* globals $t, s */
$t('on', 'nv_newsletter_subscribe', function(e) {
    var actionContextData = {
        'news.newsletteraction': 'Subscribe', //"Subscribe", "Unsubscribe"
        'news.newsletterid': $t(e.type + '.id', $t(e.type + '.key', '')),
        'news.newslettertouchpoint': $t(e.type + '.placement', '')
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'newsletter_subscribe');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});
</script><script>
$t('on','nv_newsletter_subscribe',function(e, data){
	window.DY && window.DY.API('event',{name:'newsletter_subscribed', properties:{id:data.id}});
});
</script><script>
/* globals $t, s */
$t('on', 'mbt_video_socialShare', function(e, data) {
    var sharePlatform = function(href) {
        var sharePlatform = '';
        if (href.indexOf('mailto:') != -1) {
            sharePlatform = 'email';
        } else if (href.indexOf('twitter.com') != -1) {
            sharePlatform = 'twitter';
        } else if (href.indexOf('facebook.com') != -1) {
            sharePlatform = 'facebook';
        } else if (href.indexOf('#') != -1) { //this one needs to be updated
            sharePlatform = 'embed';
        }
        return sharePlatform;
    };

    s.events = 'event5,event60';
    s.eVar26 = sharePlatform($t(e.type + '.target.href', ''));
    s.eVar66 = 'Video Share Bar';
    s.eVar67 = 'Video';
    s.linkTrackEvents = s.events;
    s.linkTrackVars = s.globalLinkTrackVars + ',eVar26,eVar66,eVar67';
    s.tl(true, 'o', 'video share');
});
</script><script>
/* globals $t, s */
$t('on', 'mbt_video_drawer_click', function(e) {
    var isCountinuousPlay = $t("mbt_video_drawer_click.video.isContinuousPlay", false);
    if(isCountinuousPlay) {
        //Continuous play event is not tracked at the moment
        //Could be used in the future to track using this flag
        return;
    }
    var index = parseInt($t(e.type + '.index', 0)) + 1;
    var actionContextData = {
        'news.linkmoduledetail': 'video drawer',
        'news.linkmoduletype': index,
        'news.videoplaylist': $t(e.type + '.playlist.headline.primary', s.noValue),
        'news.videoplaylistid': $t(e.type + '.playlist.id', s.noValue)
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'video drawer click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});
</script><script>
// subscribe to events
/* globals $t, s */
(function() {
    window.dtm_pageview = window.dtm_pageview || {};
    window.dtm_pageview.viewedPages = window.dtm_pageview.viewedPages || {}; //list of URLS already tracked (make it exposed, so )
    var viewedPages = window.dtm_pageview.viewedPages; //keep it simple, so its shorter
    var pageTries = {
        default:{timeout: 100, tries: 5}
    };

    $t('on', 'mbt_transporter_loadPage', function() {
        // reload ldjson
        // this should be when it is parsed, but loadPage is early from when the meta data is actualy available on the page.
        window.parseJsonLd();
    });

    $t('on', 'mbt_transporter_nav', function(e,data) {
        // try to re-parse ldjson until it is a match with the nav data, then trigger pageview
        // this is becuase the metadata loads late on the page vs the nav event. it is most likely a prolem with the <helmut> component
        pageTries[$t(e.type + '.url', 'na')] = {
            tries : pageTries.default.tries,
            timer : setTimeout(function(){
                var trackView = data.trackView !== false; //this will default all to true if not false
                var url = $t(e.type + '.url', 'na');
                window.parseJsonLd(); // parse again to get jsonld changes
                var index = (function() {
                    //this figures out index by compring urls, instead of relying on the provided one.
                    var i;
                    var dataset = $t('jsonLd.Dataset', []);
                    for (i = 0; dataset[i]; i++) {
                        if (dataset[i].url && dataset[i].url.match(new RegExp(url + '$' , 'g') )) {
                            return i;
                        }
                    }
                    return -1; //if no index from loop, default to -1 for no metadata;
                })();
                if(index != -1 || pageTries[url].tries <= 0){
                    //check to see if thise page has been tracked already (only one pageview per URL)
                    if (viewedPages[$t(e.type + '.url')]) {
                        trackView = false;
                    } else {
                        viewedPages[$t(e.type + '.url', 'na')] = true;
                        trackView = true;
                    }
                    $t('track', 'dtm_pageView', {
                        initiator: 'transporter',
                        index: index, // $t(e.type + '.index', index) just use the searched index, to know if there is metadata
                        url: $t(e.type + '.url', ''),
                        trackView: trackView
                    });
                    clearTimeout(pageTries[url].timer);
                }
                pageTries[url].tries--;
            },pageTries.default.timeout)
        };
    });

    $t('on', 'mbt_transporter_scrolled_percentage', function(e) {
        var actionContextData = {
            'news.pagescrollpercent': $t(e.type + '.percent', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'percent scrolled');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
})();
</script><script>
/* globals $t, s */
$t('on', 'mbt_router_pageView', function(e) {
    if (s & s.pageURL != $t(e.type + '.url', '')) {
        setTimeout(function() {
            window.parseJsonLd();
            $t('track', 'dtm_pageView', {
                initiator: 'router',
                index: $t(e.type + '.index', 0),
                url: $t(e.type + '.url')
            });
        }, 1);
    }
});
</script><script>
/* globals $t, s */
(function() {
    $t('on', 'mbt_navbar_topicClick', function(e) {
        var actionContextData = {
            'news.linkmoduledetail': 'Hamburger Link',
            'news.linkmoduletype': $t(e.type + '.topic', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'hamburger link click');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
    $t('on', 'mbt_navbar_hamburgerClick', function(e, data) {
        if (data.isOpen) {
            var actionContextData = {
                'news.linkmoduledetail': 'Hamburger',
                'news.linkmoduletype': 'Hamburger Expand'
            };
            s.contextData = s.extendArray(s.contextData, actionContextData);

            //track action
            s.tl(true, 'o', 'hamburger expand');

            //cleanup values after action
            for (var item in actionContextData) {
                delete s.contextData[item];
            }
        }
    });
    $t('on', 'mbt_navbar_follow', function(e) {
        var actionContextData = {
            'news.linkmoduledetail': 'Hamburger',
            'news.linkmoduletype': 'Hamburger Follow',
            'news.socialplatform': $t(e.type + '.platform', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'hamburger follow');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
    $t('on', 'mbt_navbar_socialShare', function(e) {
        var actionContextData = {
            'news.linkmoduledetail': 'Article Share Bar',
            'news.linkmoduletype': 'Article',
            'news.socialplatform': $t(e.type + '.platform', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'article share');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
})();
</script><script>
/* globals $t, s */
$t('on', 'mbt_moreloader_click', function() {
    var actionContextData = {
        'news.linkmoduledetail': 'Button',
        'news.linkmoduletype': 'Load More'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'load more link click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});
</script><script>
/* globals $t, s */
(function() {
    var inSlideshow = false;
    var prevSlide = -1;
    $t('on', 'mbt_gallery_scroll', function(e) {
        var adSlide = $t(e.type + '.adSlide');
        if (!adSlide) {
            prevSlide = $t(e.type + '.prevSlideNumber') != -1 ? $t(e.type + '.prevSlideNumber') : prevSlide;
            var curSlide = $t(e.type + '.slideNumber', 0);
            var action = '';

            var totalSlides = $t(e.type + '.totalSlides', 0);
            s.events = '';
            if (inSlideshow === false) {
                //start
                action = 'Start,';
                inSlideshow = true;
            }
            if (inSlideshow !== 'done' & curSlide === totalSlides) {
                action = 'Complete,';
                inSlideshow = 'done';
            }
            if (prevSlide < curSlide) {
                //scroll down
                action += 'Swipe Down';
            } else if (prevSlide > curSlide) {
                //scroll up
                action += 'Swipe Up';
            }

            var actionContextData = {
                'news.slideshowaction': action, //"Start", "Swipe Up", "Swipe Down", "Swipe Right", "Swipe Left", "Complete"
                'news.slideshowname': $t('jsonLd.imageGallery.0.headline', s.noValue),
                'news.slideshownumber': curSlide
            };
            s.contextData = s.extendArray(s.contextData, actionContextData);

            //track action
            s.tl(true, 'o', 'slideshow action');

            //cleanup values after action
            for (var item in actionContextData) {
                delete s.contextData[item];
            }
        }
    });
})();
</script><script>
// AppM - subscribe event
/* globals $t, s */
$t('on', 'mbt_curtain_closeClick', function() {
    var actionContextData = {
        'news.linkmoduledetail': 'Close',
        'news.linkmoduletype': 'Homepage Curtain'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'curtain close click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});
$t('on', 'mbt_curtain_scrollPast', function() {
    var actionContextData = {
        'news.belowcurtain': 'true',
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'scrolled past curtain');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});
</script><script>window.__enigmaconfig = {"provider":"mps","preprocessors":{"xfinity":true},"targeting":{"site":"nbcnews-bento","type":"bentoarticle","pageid":"ncna854906","transporter":"false","targeting":"news|politics|immigration"},"refreshInterval":30,"vendors":{"gptAdUnitPath":"\u002F2620\u002Fnbcnews\u002Fpolitics","mpsUrl":"https:\u002F\u002Fmps.nbcuni.com\u002Ffetch\u002Fext\u002Fload-nbcnews-bento.js?nowrite=jq"},"breakpoints":[1000,758,0]};</script><script async="" src="./M-050_files/ads-fbb67c73e2b54a839381.js.Download"></script><script charset="UTF-8">window.__data={"amp":{"vertical":null},"article":{"loading":false,"content":[{"type":"article","id":"ncna854906","subType":"post","dek":null,"unibrow":{"taxonomyPath":"nbcnews\u002Fsection\u002Fpolitics\u002Fimmigration","text":"Immigration","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\u002Fimmigration"}},"primaryMedia":null,"headline":{"primary":"What is DACA? What you need to know.","seo":"What is DACA? What you need to know.","social":"What is DACA? Who are the Dreamers?"},"description":{"primary":"DACA stands for Deferred Action for Childhood Arrivals and was created by President Barack Obama. The program protected immigrants from deportation and allowed work permits.","seo":"DACA stands for Deferred Action for Childhood Arrivals and was created by President Barack Obama. The program protected immigrants from deportation and allowed work permits."},"url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fstoryline\u002Fsmart-facts\u002Fwhat-daca-n854906","short":"https:\u002F\u002Fwww.nbcnews.com\u002Fstoryline\u002Fsmart-facts\u002Fwhat-daca-n854906"},"taxonomy":{"primarySection":{"type":"taxonomy","id":"nctx64","name":"Politics","description":{"primary":"Find the latest political news stories, photos, and videos on NBCNews.com. Read breaking headlines covering Congress, Democrats, Republicans, election news, and more."},"slug":"politics","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics"},"dateCreated":"Wed Mar 08 2017 00:55:52 GMT+0000 (UTC)","dateModified":"Wed Mar 08 2017 00:55:52 GMT+0000 (UTC)","path":"nbcnews\u002Fsection\u002Fpolitics"},"primaryTopic":{"type":"taxonomy","id":"nctx17741","name":"Immigration","description":{"primary":"Find the latest breaking U.S. news stories, photos, and videos on immigration on NBCNews.com. Find headlines covering citizenship, reforms, laws, refugees, and more."},"slug":"immigration","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\u002Fimmigration"},"dateCreated":"Wed Mar 08 2017 01:04:33 GMT+0000 (UTC)","dateModified":"Wed Mar 08 2017 01:04:33 GMT+0000 (UTC)"},"primarySubtopic":null,"primaryVertical":{"type":"taxonomy","id":"nctx20366","name":"News","description":{"primary":null},"slug":"news","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fnews"},"dateCreated":"Fri Apr 20 2018 12:07:57 GMT+0000 (UTC)","dateModified":"Fri Apr 20 2018 12:07:57 GMT+0000 (UTC)"},"primarySubvertical":null,"primaryChannel":null,"primaryLabel":null,"primaryShow":null,"channels":[],"topics":[{"type":"taxonomy","id":"nctx17741","name":"Immigration","description":{"primary":"Find the latest breaking U.S. news stories, photos, and videos on immigration on NBCNews.com. Find headlines covering citizenship, reforms, laws, refugees, and more."},"slug":"immigration","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\u002Fimmigration"},"dateCreated":"Wed Mar 08 2017 01:04:33 GMT+0000 (UTC)","dateModified":"Wed Mar 08 2017 01:04:33 GMT+0000 (UTC)"}],"sections":[{"type":"taxonomy","id":"nctx64","name":"Politics","description":{"primary":"Find the latest political news stories, photos, and videos on NBCNews.com. Read breaking headlines covering Congress, Democrats, Republicans, election news, and more."},"slug":"politics","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics"},"dateCreated":"Wed Mar 08 2017 00:55:52 GMT+0000 (UTC)","dateModified":"Wed Mar 08 2017 00:55:52 GMT+0000 (UTC)"}],"subverticals":[],"series":[],"labels":[],"subtopics":[],"shows":[],"anchors":[],"cuisines":[],"recipeCategories":[],"courseTypes":[]},"primaryImage":null,"teaseImage":{"id":"ncim2355751","headline":{"primary":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","tease":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","seo":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","social":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground"},"caption":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground in a pattern that spells out the word \"unafraid\" as they rally in support of DACA recipients, Monday, March 5, 2018, on Capitol Hill in Washington.","altText":"Image: Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","url":{"primary":"https:\u002F\u002Fmedia1.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2018_10\u002F2355751\u002F180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.jpg"},"encodingFormat":"image\u002Fjpeg","height":1546,"width":2500,"authors":[{"name":"Jacquelyn Martin"}],"source":{"name":"AP","copyright":"Copyright 2018 The Associated Press. All rights reserved."},"graphicContent":false},"socialImage":{"id":"ncim2355751","headline":{"primary":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","tease":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","seo":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","social":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground"},"caption":"Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground in a pattern that spells out the word \"unafraid\" as they rally in support of DACA recipients, Monday, March 5, 2018, on Capitol Hill in Washington.","altText":"Image: Supporters of the Deferred Action for Childhood Arrivals (DACA) program place paper flowers on the ground","url":{"primary":"https:\u002F\u002Fmedia1.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2018_10\u002F2355751\u002F180308-daca-capitol-se-523p_5271e44fa0ef5bd5dc14d84ea37c5685.jpg"},"encodingFormat":"image\u002Fjpeg","height":1546,"width":2500,"authors":[{"name":"Jacquelyn Martin"}],"source":{"name":"AP","copyright":"Copyright 2018 The Associated Press. All rights reserved."},"graphicContent":false},"authors":[{"type":"embeddedPerson","authorType":"author","featuredAuthor":{"isFeaturedAuthor":false},"person":{"id":"ncpn10291","type":"person","name":"Suzanne Gamboa","email":"Suzanne.Gamboa@nbcuni.com","jobTitle":["Senior Writer"],"primaryImage":{"id":"ncim168326","url":{"primary":"https:\u002F\u002Fmedia3.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2014_06\u002F168326\u002F140116-byline-gamboa-sq-_j4a8736_5719bd14a999a2319b1c2b68453e17a3.jpg"},"altText":"Image:  ","height":1500,"width":1500},"bio":[{"type":"markup","element":"p","html":"Suzanne Gamboa is a national reporter for NBC Latino and NBCNews.com"}],"socialMediaProfiles":{"gPlus":null,"twitter":"@SuzGamboa","facebook":null,"instagram":null}}}],"adsEnabled":true,"ecommerceEnabled":false,"sponsoredBy":null,"hidden":false,"searchable":true,"nativeAd":false,"breakingNews":false,"body":[{"type":"markup","element":"p","html":"President Barack Obama created the \u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Flatino\u002Fobama-administration-start-taking-daca-requests-feb-18-n296766\"\u003EDeferred Action for Childhood Arrivals program\u003C\u002Fa\u003E, better known as DACA, as he faced increasing backlash from allies and activists for failing to get immigration reform in his first term and was gearing up for a re-election run."},{"type":"markup","element":"h3","html":"What did DACA do?"},{"type":"markup","element":"p","html":"\u003Ca href=\"http:\u002F\u002Fwww.nytimes.com\u002F2012\u002F06\u002F16\u002Fus\u002Fus-to-stop-deporting-some-illegal-immigrants.html\"\u003EAnnounced on June 15, 2012\u003C\u002Fa\u003E, the program temporarily shielded certain immigrants from deportation and made them eligible for work permits. The program allowed for infinite renewals, but was considered a stopgap measure until Congress could address immigration reform."},{"presentation":{"size":"medium","style":"default","alignment":null},"type":"embeddedImage","image":{"id":"ncim2359886","headline":{"primary":"Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building in Los Angeles, California","tease":"Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building in Los Angeles, California","seo":"Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building in Los Angeles, California","social":"Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building in Los Angeles, California"},"caption":"Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building on Sept. 5, 2017 in Los Angeles.","altText":"Image: Allison Agsten of Los Angeles stands with supporters of the Deferred Action for Childhood Arrivals (DACA) program during a rally outside the Edward R. Roybal Federal Building in Los Angeles, California","url":{"primary":"https:\u002F\u002Fmedia4.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2018_11\u002F2359886\u002F180312-daca-protest-nationwide-ac-651p_931d636fa82ff1fb398e1636d1c36ce5.jpg"},"encodingFormat":"image\u002Fjpeg","height":1817,"width":2500,"authors":[{"name":"Kyle Grillot"}],"source":{"name":"Reuters","copyright":""},"graphicContent":false}},{"type":"markup","element":"h3","html":"When and why did DACA end?"},{"type":"markup","element":"p","html":"On the orders of President Donald Trump last September, Attorney General Jeff Sessions declared that \u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\u002Fimmigration\u002Ftrump-dreamers-daca-immigration-announcement-n798686\"\u003EDACA would end March 5\u003C\u002Fa\u003E. The administration immediately stopped taking new applications for DACA and accepted renewals for about a month. The administration said the deadline would pressure Congress to come up with a substitute for DACA, although there is strong opposition to the program among some Republican conservatives, particularly to Obama’s use of executive authority to create it. Congress has not found a substitute and, in the meantime, \u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Flatino\u002Fanother-judge-blocks-trump-administration-ending-daca-program-n847766\"\u003Etwo judges have ordered the administration to accept renewals\u003C\u002Fa\u003E again. Because DACA is granted for two years at a time, some immigrants won’t see their DACA end right away."},{"type":"markup","element":"h3","html":"How many people have DACA?"},{"type":"markup","element":"p","html":"The latest number reported by Department of Homeland Security’s \u003Ca href=\"https:\u002F\u002Fwww.uscis.gov\u002Fsites\u002Fdefault\u002Ffiles\u002FUSCIS\u002FResources\u002FReports%20and%20Studies\u002FImmigration%20Forms%20Data\u002FAll%20Form%20Types\u002FDACA\u002Fdaca_performancedata_fy2017_qtr4.pdf\"\u003ECitizenship and Immigration Services\u003C\u002Fa\u003E is about 690,000 as of Sept. 4, 2017. But Trump announced the end of DACA on Sept. 5, and advocates say some 122 immigrants a day were losing DACA since then for a total about 19,000. But that number does not take into account the recent court orders that have allowed \u003Ca href=\"https:\u002F\u002Fwww.uscis.gov\u002Farchive\u002Frenew-your-daca\"\u003Erenewals to restart.\u003C\u002Fa\u003E"},{"type":"markup","element":"h3","html":"What about DACA Renewals?"},{"type":"markup","element":"p","html":"Some immigrants have chosen not to renew or have been unable to because they fear providing \u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Flatino\u002Fkelly-s-lazy-dreamer-comment-racist-obscures-truth-daca-numbers-n845746\"\u003Eidentifying information\u003C\u002Fa\u003E about themselves or their families to the administration, which has ramped up its arrests of people not legally in the country. Others are unable to scrape together the $495 fee or gather needed documents, or face other reasons."},{"type":"markup","element":"h3","html":"Who is eligible for DACA? What are the DACA requirements?"},{"type":"markup","element":"p","html":"To qualify, immigrants had to have been under 31 at the time the program was announced, have come to the U.S. before reaching their 16th birthday and lived in the U.S. continuously since June 15, 2007. They also had to have been in the U.S. the day of the announcement, be in school, have a diploma or the equivalent or be an honorably discharged veteran and not have been convicted of a felony, a significant misdemeanor, three or more misdemeanors or be a public or national security threat."},{"type":"markup","element":"h3","html":"Is there support for DACA?"},{"type":"markup","element":"p","html":"Several polls have shown a majority of Americans support DACA. The support is less among Republicans. But a majority still supports the program. Results of an NBC News\u002FWall Street Journal poll released in December found \u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\u002Ffirst-read\u002Fpoll-public-sours-gop-tax-plan-democrats-regain-lead-economy-n831231\"\u003E62 percent of those polled wanted Congress to continue DACA\u003C\u002Fa\u003E, while 19 percent said Congress should take no action and let it end."}],"datePublished":"Thu Mar 08 2018 22:26:00 GMT+0000 (UTC)","dateModified":"Tue Jun 26 2018 16:18:10 GMT+0000 (UTC)","dateCreated":"Thu Mar 08 2018 18:44:44 GMT+0000 (UTC)","source":null,"presentation":{"alignment":null,"size":"medium","style":"default","byline":"STANDARD","hideRecommendations":false}}],"error":null,"isNativeAd":false,"presentation":{"alignment":null,"size":"medium","style":"default","byline":"STANDARD","hideRecommendations":false},"currentPageArticleId":"ncna854906","taboolaFeed":false},"front":{"loading":false,"draftId":null,"curation":{},"verticals":{},"error":null},"localnews":{"news":[],"zip":null,"city":null,"state":null,"latitude":null,"longitude":null,"error":null,"loading":false},"marquee":{"active":false,"marquees":[]},"navbar":{"theme":"light","headline":null,"active":false,"shortcutsVisible":true,"watchScroll":true,"transported":false,"fillOnScroll":false,"shareUrl":null,"mounted":false},"recommended":{"loading":false,"recommendations":{}},"router":{"status":200,"error":null,"loaded":false,"navigating":false,"path":"\u002Fstoryline\u002Fsmart-facts\u002Fwhat-daca-n854906","domain":"nbcnews.com","vertical":"news","transporting":false,"host":"www.nbcnews.com"},"shared":{"vertical":"news","section":null,"topic":null,"subTopic":null,"series":null,"label":null,"show":null,"pageType":"article","canonicalUrl":null,"signupPopupVisible":false,"adsEnabled":true,"globalMenu":[{"text":"News","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com"}},{"text":"Nightly News","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fnightly-news"}},{"text":"Meet the Press","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fmeet-the-press"}},{"text":"Dateline","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fdateline"}},{"text":"MSNBC","url":{"primary":"https:\u002F\u002Fwww.msnbc.com"}},{"text":"TODAY","url":{"primary":"https:\u002F\u002Fwww.today.com"}}],"shouldGlobalNavRendered":true,"localMenu":[{"text":"The Vote","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fdecision-2018"}},{"text":"U.S. News","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fus-news"}},{"text":"Business","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fbusiness"}},{"text":"World","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fworld"}},{"text":"Tech & Media","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fthe-thread"}},{"text":"THINK","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fthink"}},{"text":"Sports","url":{"primary":"https:\u002F\u002Fwww.nbcsports.com\u002F?cid=eref:nbcnews:text"}}],"menu":[{"title":"The Vote","url":"https:\u002F\u002Fwww.nbcnews.com\u002Fdecision-2018"},{"title":"U.S. News","url":"https:\u002F\u002Fwww.nbcnews.com\u002Fus-news"},{"title":"Business","url":"https:\u002F\u002Fwww.nbcnews.com\u002Fbusiness"},{"title":"World","url":"https:\u002F\u002Fwww.nbcnews.com\u002Fworld"},{"title":"Tech & Media","url":"https:\u002F\u002Fwww.nbcnews.com\u002Fthe-thread"},{"title":"THINK","url":"https:\u002F\u002Fwww.nbcnews.com\u002Fthink"},{"title":"Sports","url":"https:\u002F\u002Fwww.nbcsports.com\u002F?cid=eref:nbcnews:text"}],"socialMediaProfiles":{"facebook":"http:\u002F\u002Fwww.facebook.com\u002Fnbcnews","twitter":"https:\u002F\u002Fwww.twitter.com\u002Fnbcnews"},"subVerticals":[],"isChromeless":false,"enigmaConfig":{},"taboolaLoaderLoaded":false,"verticalScrollDisabled":false},"slideshow":{"loading":false,"current":null},"transporter":{"loading":false,"error":null,"content":{}},"video":{"current":null,"topPlaylists":[],"associatedPlaylists":[],"disableRecommendations":false}};</script><script src="./M-050_files/manifest-9149647a656fb6aa6453.js.Download" charset="UTF-8"></script><script src="./M-050_files/node_static_de55cdd367e2d8b40aa4.js.Download" charset="UTF-8"></script><script src="./M-050_files/main-691b09bcb93047ea795a.js.Download" defer="" charset="UTF-8"></script><script src="./M-050_files/vidrec.3.0.1.min.js.Download" data-publickey="a5d3c400d9872cc4aa3bb4e9c87c7cab" data-urlsplitchar="-" data-onpluginload="(function () { });" data-idattribute="vilynx-id" data-domain="nbcnews.com" data-limit="2" data-maxdays="5"></script><script src="./M-050_files/nbcnews-vilynx.min.js.Download" redirect="redirect" redirectwithclick="redirectwithclick" userid="a5d3c400d9872cc4aa3bb4e9c87c7cab" resizetoimage="resizetoimage" forcetoimageparent="forcetoimageparent" onpluginload="(function (e) {});"></script><script type="text/javascript" src="./M-050_files/vpg.4.5.0.min.js.Download" data-publickey="a5d3c400d9872cc4aa3bb4e9c87c7cab" data-ongalleryload="window.galleryNbcMach" urlregexp="[?]icid=(.*)" redirect="redirect" redirectwithclick="redirectwithclick" userid="a5d3c400d9872cc4aa3bb4e9c87c7cab" resizetoimage="resizetoimage" forcetoimageparent="forcetoimageparent" onpluginload="(function (e) {});"></script><style title="vilynx-css" type="text/css"> a.vilynx_registered{display:block;}  article > div > a.vilynx_registered .supra-wrapper{top:auto; bottom: 0px;}  article > div > h2 {z-index: 2}  .vilynx_borderRadius .supra-wrapper {border-top-left-radius: 50%; border-top-right-radius: 50%; border-bottom-right-radius: 50%; border-bottom-left-radius: 50%;}  a.vilynx_registered .vilynx_wrapperImg {vertical-align: baseline;}  a.vilynx_registered.vilynx_duplicated > .supra-wrapper {display: none;}  img.vilynx_wrapperImg[src*="msnbc-color-square-dvt"], img.vilynx_wrapperImg[src*="today-color-square-dvt"], img.vilynx_wrapperImg[src*="nbc-news-color-square-dvt"] {opacity: 0;}   </style><iframe src="./M-050_files/vtrk.html" style="display: none;"></iframe><img id="poke" alt="Tracking Image" width="0" height="0" style="display:none;"><iframe sandbox="allow-scripts allow-same-origin" title="Adobe ID Syncing iFrame" id="destination_publishing_iframe_nbcu_0" src="./M-050_files/dest5.html" class="aamIframeLoaded" style="display: none !important; width: 0px; height: 0px;" hidden=""></iframe><div id="dysegdiv" data-id="8765428:def:"></div><div class="dy_full_width_notifications_container dy_bottom_notification"><div class="dy_full_width_notification_instance dy_notification_instance_active dy_notification_from_bottom"><div class="dy-full-width-notifications-close"></div><div class="dy_unit dy_smart_object_488843 dyother dyMonitor" data-dy-exp-id="501758" data-dy-var-id="13735382" data-dy-ver-data="5031027::0:1541165051081:81620:81620:1:0:0" data-dy-att-method="0" data-dy-att-seq="81620" data-adid="smart_object_488843||920|||"><style type="text/css">
.dy_full_width_notifications_container div .dy_unit #overaly_dy_message {max-width:100vw ;width:100vw;}

#overaly_dy_message {
  background-color: rgba(0, 0, 0, 0.89);;
	padding: 24px;
}

#secondary_text_dy_message {
  font-family: “FoundersGroteskMono”, Menlo, Monaco, monospace;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  font-stretch: normal;
  line-height: 1.5;
  letter-spacing: -0.4px;
  color: #ffffff;
  max-width: 90vw;
  margin: auto;
}

@media only screen and (max-width : 320px) {
#secondary_text_dy_message {
    max-width: 280px;
}
}

@media only screen and (max-width : 758px) {
#secondary_text_dy_message {
    max-width: 560px;
}
}

@media only screen and (min-width : 1000px) {
#secondary_text_dy_message {
    max-width: 780px;
}
}
</style><div id="overaly_dy_message">
    <div id="secondary_text_dy_message">
      WE AND OUR PARTNERS USE COOKIES ON THIS SITE TO IMPROVE OUR SERVICE, PERFORM ANALYTICS, PERSONALIZE ADVERTISING, MEASURE ADVERTISING PERFORMANCE, AND REMEMBER WEBSITE PREFERENCES. BY USING THE SITE, YOU CONSENT TO THESE COOKIES. FOR MORE INFORMATION ON COOKIES INCLUDING HOW TO MANAGE YOUR CONSENT VISIT OUR <a href="https://www.nbcuniversal.com/privacy/cookies" style="text-decoration:underline; color: #3062ff;">COOKIE POLICY</a>.
    </div>
</div>
</div></div></div><video id="ndp_video_player_1541165053736" style="left:-9999px;height:1px;width:1px;position:absolute;"></video><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./M-050_files/widget_iframe.53652c702a2e752df1a75e4b2ec51f45.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./M-050_files/saved_resource.html"></iframe></body></html>